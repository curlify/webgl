/**
@preserve

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.JSZip=t()}}(function(){return function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,a,o,s,l,u="",c=0;c<t.length;)e=t.charCodeAt(c++),r=t.charCodeAt(c++),i=t.charCodeAt(c++),a=e>>2,o=(3&e)<<4|r>>4,s=(15&r)<<2|i>>6,l=63&i,isNaN(r)?s=l=64:isNaN(i)&&(l=64),u=u+n.charAt(a)+n.charAt(o)+n.charAt(s)+n.charAt(l);return u},r.decode=function(t){var e,r,i,a,o,s,l,u="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)a=n.indexOf(t.charAt(c++)),o=n.indexOf(t.charAt(c++)),s=n.indexOf(t.charAt(c++)),l=n.indexOf(t.charAt(c++)),e=a<<2|o>>4,r=(15&o)<<4|s>>2,i=(3&s)<<6|l,u+=String.fromCharCode(e),64!=s&&(u+=String.fromCharCode(r)),64!=l&&(u+=String.fromCharCode(i));return u}},{}],2:[function(t,e){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=r},{}],3:[function(t,e,r){"use strict";r.STORE={magic:"\x00\x00",compress:function(t){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},r.DEFLATE=t("./flate")},{"./flate":8}],4:[function(t,e){"use strict";var r=t("./utils"),n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var i="string"!==r.getTypeOf(t);"undefined"==typeof e&&(e=0);var a=0,o=0,s=0;e=-1^e;for(var l=0,u=t.length;u>l;l++)s=i?t[l]:t.charCodeAt(l),o=255&(e^s),a=n[o],e=e>>>8^a;return-1^e}},{"./utils":21}],5:[function(t,e){"use strict";function r(){this.data=null,this.length=0,this.index=0}var n=t("./utils");r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=r},{"./utils":21}],6:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.comment=null},{}],7:[function(t,e,r){"use strict";var n=t("./utils");r.string2binary=function(t){return n.string2binary(t)},r.string2Uint8Array=function(t){return n.transformTo("uint8array",t)},r.uint8Array2String=function(t){return n.transformTo("string",t)},r.string2Blob=function(t){var e=n.transformTo("arraybuffer",t);return n.arrayBuffer2Blob(e)},r.arrayBuffer2Blob=function(t){return n.arrayBuffer2Blob(t)},r.transformTo=function(t,e){return n.transformTo(t,e)},r.getTypeOf=function(t){return n.getTypeOf(t)},r.checkSupport=function(t){return n.checkSupport(t)},r.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,r.pretty=function(t){return n.pretty(t)},r.findCompression=function(t){return n.findCompression(t)},r.isRegExp=function(t){return n.isRegExp(t)}},{"./utils":21}],8:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako");r.uncompressInputType=n?"uint8array":"array",r.compressInputType=n?"uint8array":"array",r.magic="\b\x00",r.compress=function(t){return i.deflateRaw(t)},r.uncompress=function(t){return i.inflateRaw(t)}},{pako:24}],9:[function(t,e){"use strict";function r(t,e){return this instanceof r?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new r(t,e)}var n=t("./base64");r.prototype=t("./object"),r.prototype.load=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.utils=t("./deprecatedPublicUtils"),r.base64={encode:function(t){return n.encode(t)},decode:function(t){return n.decode(t)}},r.compressions=t("./compressions"),e.exports=r},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(t,e){"use strict";var r=t("./base64"),n=t("./zipEntries");e.exports=function(t,e){var i,a,o,s;for(e=e||{},e.base64&&(t=r.decode(t)),a=new n(t,e),i=a.files,o=0;o<i.length;o++)s=i[o],this.file(s.fileName,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileComment.length?s.fileComment:null,createFolders:e.createFolders});return a.zipComment.length&&(this.comment=a.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(t,e){(function(t){"use strict";e.exports=function(e,r){return new t(e,r)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(t,e){"use strict";function r(t){this.data=t,this.length=this.data.length,this.index=0}var n=t("./uint8ArrayReader");r.prototype=new n,r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./uint8ArrayReader":18}],13:[function(t,e){"use strict";var r=t("./support"),n=t("./utils"),i=t("./crc32"),a=t("./signature"),o=t("./defaults"),s=t("./base64"),l=t("./compressions"),u=t("./compressedObject"),c=t("./nodeBuffer"),h=t("./utf8"),d=t("./stringWriter"),f=t("./uint8ArrayWriter"),p=function(t){if(t._data instanceof u&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===n.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},m=function(t){var e=p(t),i=n.getTypeOf(e);return"string"===i?!t.options.binary&&r.nodebuffer?c(e,"utf-8"):t.asBinary():e},g=function(t){var e=p(this);return null===e||"undefined"==typeof e?"":(this.options.base64&&(e=s.decode(e)),e=t&&this.options.binary?A.utf8decode(e):n.transformTo("string",e),t||this.options.binary||(e=n.transformTo("string",A.utf8encode(e))),e)},v=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this._data=e,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};v.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var t=m(this);return n.transformTo("nodebuffer",t)},asUint8Array:function(){var t=m(this);return n.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var _=function(t,e){var r,n="";for(r=0;e>r;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},w=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof r[e]&&(r[e]=arguments[t][e]);return r},y=function(t){return t=t||{},t.base64!==!0||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=w(t,o),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},b=function(t,e,r){var i,a=n.getTypeOf(e);if(r=y(r),r.createFolders&&(i=x(t))&&M.call(this,i,!0),r.dir||null===e||"undefined"==typeof e)r.base64=!1,r.binary=!1,e=null;else if("string"===a)r.binary&&!r.base64&&r.optimizedBinaryString!==!0&&(e=n.string2binary(e));else{if(r.base64=!1,r.binary=!0,!(a||e instanceof u))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===a&&(e=n.transformTo("uint8array",e))}var o=new v(t,e,r);return this.files[t]=o,o},x=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},M=function(t,e){return"/"!=t.slice(-1)&&(t+="/"),e="undefined"!=typeof e?e:!1,this.files[t]||b.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},E=function(t,e){var r,a=new u;return t._data instanceof u?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=l.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(r=t._data.getContent(),a.compressedContent=e.compress(n.transformTo(e.compressInputType,r)))):(r=m(t),(!r||0===r.length||t.dir)&&(e=l.STORE,r=""),a.uncompressedSize=r.length,a.crc32=i(r),a.compressedContent=e.compress(n.transformTo(e.compressInputType,r))),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},z=function(t,e,r,o){var s,l,u,c,d=(r.compressedContent,n.transformTo("string",h.utf8encode(e.name))),f=e.comment||"",p=n.transformTo("string",h.utf8encode(f)),m=d.length!==e.name.length,g=p.length!==f.length,v=e.options,w="",y="",b="";u=e._initialMetadata.dir!==e.dir?e.dir:v.dir,c=e._initialMetadata.date!==e.date?e.date:v.date,s=c.getHours(),s<<=6,s|=c.getMinutes(),s<<=5,s|=c.getSeconds()/2,l=c.getFullYear()-1980,l<<=4,l|=c.getMonth()+1,l<<=5,l|=c.getDate(),m&&(y=_(1,1)+_(i(d),4)+d,w+="up"+_(y.length,2)+y),g&&(b=_(1,1)+_(this.crc32(p),4)+p,w+="uc"+_(b.length,2)+b);var x="";x+="\n\x00",x+=m||g?"\x00\b":"\x00\x00",x+=r.compressionMethod,x+=_(s,2),x+=_(l,2),x+=_(r.crc32,4),x+=_(r.compressedSize,4),x+=_(r.uncompressedSize,4),x+=_(d.length,2),x+=_(w.length,2);var M=a.LOCAL_FILE_HEADER+x+d+w,E=a.CENTRAL_FILE_HEADER+"\x00"+x+_(p.length,2)+"\x00\x00\x00\x00"+(u===!0?"\x00\x00\x00":"\x00\x00\x00\x00")+_(o,4)+d+w+p;return{fileRecord:M,dirRecord:E,compressedObject:r}},A={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,r,n,i,a=[];for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],i=new v(n.name,n._data,w(n.options)),r=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(r,i)&&a.push(i));return a},file:function(t,e,r){if(1===arguments.length){if(n.isRegExp(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}return this.filter(function(e,r){return!r.dir&&e===t})[0]||null}return t=this.root+t,b.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(n.isRegExp(t))return this.filter(function(e,r){return r.dir&&t.test(e)});var e=this.root+t,r=M.call(this,e),i=this.clone();return i.root=r.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter(function(e,r){return r.name.slice(0,t.length)===t}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){t=w(t||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),n.checkSupport(t.type);var e,r,i=[],o=0,u=0,c=n.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var h in this.files)if(this.files.hasOwnProperty(h)){var p=this.files[h],m=p.options.compression||t.compression.toUpperCase(),g=l[m];if(!g)throw new Error(m+" is not a valid compression method !");var v=E.call(this,p,g),y=z.call(this,h,p,v,o);o+=y.fileRecord.length+v.compressedSize,u+=y.dirRecord.length,i.push(y)}var b="";b=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+_(i.length,2)+_(i.length,2)+_(u,4)+_(o,4)+_(c.length,2)+c;var x=t.type.toLowerCase();for(e="uint8array"===x||"arraybuffer"===x||"blob"===x||"nodebuffer"===x?new f(o+u+b.length):new d(o+u+b.length),r=0;r<i.length;r++)e.append(i[r].fileRecord),e.append(i[r].compressedObject.compressedContent);for(r=0;r<i.length;r++)e.append(i[r].dirRecord);e.append(b);var M=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(t.type.toLowerCase(),M);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",M));case"base64":return t.base64?s.encode(M):M;default:return M}},crc32:function(t,e){return i(t,e)},utf8encode:function(t){return n.transformTo("string",h.utf8encode(t))},utf8decode:function(t){return h.utf8decode(t)}};e.exports=A},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],15:[function(t,e){"use strict";function r(t,e){this.data=t,e||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0}var n=t("./dataReader"),i=t("./utils");r.prototype=new n,r.prototype.byteAt=function(t){return this.data.charCodeAt(t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":5,"./utils":21}],16:[function(t,e){"use strict";var r=t("./utils"),n=function(){this.data=[]};n.prototype={append:function(t){t=r.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=n},{"./utils":21}],17:[function(t,e,r){(function(t){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var e=new ArrayBuffer(0);try{r.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=new n;i.append(e),r.blob=0===i.getBlob("application/zip").size}catch(t){r.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(t,e){"use strict";function r(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var n=t("./dataReader");r.prototype=new n,r.prototype.byteAt=function(t){return this.data[t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===e&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a;return-1},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":5}],19:[function(t,e){"use strict";var r=t("./utils"),n=function(t){this.data=new Uint8Array(t),this.index=0};n.prototype={append:function(t){0!==t.length&&(t=r.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=n},{"./utils":21}],20:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),a=t("./nodeBuffer"),o=new Array(256),s=0;256>s;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;o[254]=o[254]=1;var l=function(t){var e,r,n,a,o,s=t.length,l=0;for(a=0;s>a;a++)r=t.charCodeAt(a),55296===(64512&r)&&s>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=128>r?1:2048>r?2:65536>r?3:4;for(e=i.uint8array?new Uint8Array(l):new Array(l),o=0,a=0;l>o;a++)r=t.charCodeAt(a),55296===(64512&r)&&s>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),128>r?e[o++]=r:2048>r?(e[o++]=192|r>>>6,e[o++]=128|63&r):65536>r?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},u=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+o[t[r]]>e?r:e},c=function(t){var e,r,i,a,s=t.length,l=new Array(2*s);for(r=0,e=0;s>e;)if(i=t[e++],128>i)l[r++]=i;else if(a=o[i],a>4)l[r++]=65533,e+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&s>e;)i=i<<6|63&t[e++],a--;a>1?l[r++]=65533:65536>i?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),n.applyFromCharCode(l)};r.utf8encode=function(t){return i.nodebuffer?a(t,"utf-8"):l(t)},r.utf8decode=function(t){if(i.nodebuffer)return n.transformTo("nodebuffer",t).toString("utf-8");t=n.transformTo(i.uint8array?"uint8array":"array",t);for(var e=[],r=0,a=t.length,o=65536;a>r;){var s=u(t,Math.min(r+o,a));e.push(c(i.uint8array?t.subarray(r,s):t.slice(r,s))),r=s}return e.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(t,e,r){"use strict";function n(t){return t}function i(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}function a(t){var e=65536,n=[],i=t.length,a=r.getTypeOf(t),o=0,s=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(t){s=!1}if(!s){for(var l="",c=0;c<t.length;c++)l+=String.fromCharCode(t[c]);return l}for(;i>o&&e>1;)try{n.push("array"===a||"nodebuffer"===a?String.fromCharCode.apply(null,t.slice(o,Math.min(o+e,i))):String.fromCharCode.apply(null,t.subarray(o,Math.min(o+e,i)))),o+=e}catch(t){e=Math.floor(e/2)}return n.join("")}function o(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}var s=t("./support"),l=t("./compressions"),u=t("./nodeBuffer");r.string2binary=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r));return e},r.arrayBuffer2Blob=function(t){r.checkSupport("blob");try{return new Blob([t],{type:"application/zip"})}catch(r){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,n=new e;return n.append(t),n.getBlob("application/zip")}catch(t){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=a;var c={};c.string={string:n,array:function(t){return i(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return i(t,new Uint8Array(t.length))},nodebuffer:function(t){return i(t,u(t.length))}},c.array={string:a,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(t)}},c.arraybuffer={string:function(t){return a(new Uint8Array(t))},array:function(t){return o(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(new Uint8Array(t))}},c.uint8array={string:a,array:function(t){return o(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return u(t)}},c.nodebuffer={string:a,array:function(t){return o(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return o(t,new Uint8Array(t.length))},nodebuffer:n},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var n=r.getTypeOf(e),i=c[n][t](e);return i},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":s.nodebuffer&&u.test(t)?"nodebuffer":s.uint8array&&t instanceof Uint8Array?"uint8array":s.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){var e=s[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)e=t.charCodeAt(r),n+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return n},r.findCompression=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null},r.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(t,e){"use strict";function r(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var n=t("./stringReader"),i=t("./nodeBufferReader"),a=t("./uint8ArrayReader"),o=t("./utils"),s=t("./signature"),l=t("./zipEntry"),u=t("./support"),c=t("./object");r.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+o.pretty(e)+", expected "+o.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=c.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44,i=0;n>i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===s.CENTRAL_FILE_HEADER;)t=new l({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(-1===t)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(t),this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===t)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=o.getTypeOf(t);this.reader="string"!==e||u.uint8array?"nodebuffer"===e?new i(t):new a(o.transformTo("uint8array",t)):new n(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=r},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(t,e){"use strict";function r(t,e){this.options=t,this.loadOptions=e}var n=t("./stringReader"),i=t("./utils"),a=t("./compressedObject"),o=t("./object");r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(t,e,r){return function(){var n=t.index;t.setIndex(e);var i=t.readData(r);return t.setIndex(n),i}},prepareContent:function(t,e,r,n,a){return function(){var t=i.transformTo(n.uncompressInputType,this.getCompressedContent()),e=n.uncompress(t);if(e.length!==a)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(e=i.findCompression(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),o.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readString(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength),this.dir=16&this.externalFileAttributes?!0:!1},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=new n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index;for(this.extraFields=this.extraFields||{};t.index<i+this.extraFieldsLength;)e=t.readInt(2),r=t.readInt(2),n=t.readString(r),this.extraFields[e]={id:e,length:r,value:n}},handleUTF8:function(){if(this.useUTF8())this.fileName=o.utf8decode(this.fileName),this.fileComment=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new n(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new n(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null}},e.exports=r},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(t,e){"use strict";var r=t("./lib/utils/common").assign,n=t("./lib/deflate"),i=t("./lib/inflate"),a=t("./lib/zlib/constants"),o={};r(o,n,i,a),e.exports=o},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(t,e,r){"use strict";function n(t,e){var r=new _(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function i(t,e){return e=e||{},e.raw=!0,n(t,e)}function a(t,e){return e=e||{},e.gzip=!0,n(t,e)}var o=t("./zlib/deflate.js"),s=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),c=t("./zlib/zstream"),h=0,d=4,f=0,p=1,m=-1,g=0,v=8,_=function(t){this.options=s.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==f)throw new Error(u[r]);e.header&&o.deflateSetHeader(this.strm,e.header)
};_.prototype.push=function(t,e){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?d:h,i.input="string"==typeof t?l.string2buf(t):t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(a),i.next_out=0,i.avail_out=a),r=o.deflate(i,n),r!==p&&r!==f)return this.onEnd(r),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&n===d)&&this.onData("string"===this.options.to?l.buf2binstring(s.shrinkBuf(i.output,i.next_out)):s.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&r!==p);return n===d?(r=o.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===f):!0},_.prototype.onData=function(t){this.chunks.push(t)},_.prototype.onEnd=function(t){t===f&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=_,r.deflate=n,r.deflateRaw=i,r.gzip=a},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(t,e,r){"use strict";function n(t,e){var r=new d(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function i(t,e){return e=e||{},e.raw=!0,n(t,e)}var a=t("./zlib/inflate.js"),o=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),c=t("./zlib/zstream"),h=t("./zlib/gzheader"),d=function(t){this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,e.windowBits);if(r!==l.Z_OK)throw new Error(u[r]);this.header=new h,a.inflateGetHeader(this.strm,this.header)};d.prototype.push=function(t,e){var r,n,i,u,c,h=this.strm,d=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?l.Z_FINISH:l.Z_NO_FLUSH,h.input="string"==typeof t?s.binstring2buf(t):t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new o.Buf8(d),h.next_out=0,h.avail_out=d),r=a.inflate(h,l.Z_NO_FLUSH),r!==l.Z_STREAM_END&&r!==l.Z_OK)return this.onEnd(r),this.ended=!0,!1;h.next_out&&(0===h.avail_out||r===l.Z_STREAM_END||0===h.avail_in&&n===l.Z_FINISH)&&("string"===this.options.to?(i=s.utf8border(h.output,h.next_out),u=h.next_out-i,c=s.buf2string(h.output,i),h.next_out=u,h.avail_out=d-u,u&&o.arraySet(h.output,h.output,i,u,0),this.onData(c)):this.onData(o.shrinkBuf(h.output,h.next_out)))}while(h.avail_in>0&&r!==l.Z_STREAM_END);return r===l.Z_STREAM_END&&(n=l.Z_FINISH),n===l.Z_FINISH?(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l.Z_OK):!0},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===l.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=d,r.inflate=n,r.inflateRaw=i,r.ungzip=n},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+n),i);for(var a=0;n>a;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,o;for(n=0,e=0,r=t.length;r>e;e++)n+=t[e].length;for(o=new Uint8Array(n),i=0,e=0,r=t.length;r>e;e++)a=t[e],o.set(a,i),i+=a.length;return o}},a={arraySet:function(t,e,r,n,i){for(var a=0;n>a;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],28:[function(t,e,r){"use strict";function n(t,e){if(65537>e&&(t.subarray&&o||!t.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",n=0;e>n;n++)r+=String.fromCharCode(t[n]);return r}var i=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new i.Buf8(256),l=0;256>l;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,r.string2buf=function(t){var e,r,n,a,o,s=t.length,l=0;for(a=0;s>a;a++)r=t.charCodeAt(a),55296===(64512&r)&&s>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=128>r?1:2048>r?2:65536>r?3:4;for(e=new i.Buf8(l),o=0,a=0;l>o;a++)r=t.charCodeAt(a),55296===(64512&r)&&s>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),128>r?e[o++]=r:2048>r?(e[o++]=192|r>>>6,e[o++]=128|63&r):65536>r?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},r.buf2binstring=function(t){return n(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;n>r;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,a,o,l=e||t.length,u=new Array(2*l);for(i=0,r=0;l>r;)if(a=t[r++],128>a)u[i++]=a;else if(o=s[a],o>4)u[i++]=65533,r+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&l>r;)a=a<<6|63&t[r++],o--;o>1?u[i++]=65533:65536>a?u[i++]=a:(a-=65536,u[i++]=55296|a>>10&1023,u[i++]=56320|1023&a)}return n(u,i)},r.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+s[t[r]]>e?r:e}},{"./common":27}],29:[function(t,e){"use strict";function r(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,o=0;0!==r;){o=r>2e3?2e3:r,r-=o;do i=i+e[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0}e.exports=r},{}],30:[function(t,e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(t,e){"use strict";function r(){for(var t,e=[],r=0;256>r;r++){t=r;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function n(t,e,r,n){var a=i,o=n+r;t=-1^t;for(var s=n;o>s;s++)t=t>>>8^a[255&(t^e[s])];return-1^t}var i=r();e.exports=n},{}],32:[function(t,e,r){"use strict";function n(t,e){return t.msg=O[e],e}function i(t){return(t<<1)-(t>4?9:0)}function a(t){for(var e=t.length;--e>=0;)t[e]=0}function o(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(S.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function s(t,e){R._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,o(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function u(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,S.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=k(t.adler,e,i,r):2===t.state.wrap&&(t.adler=C(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function h(t,e){var r,n,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-ue?t.strstart-(t.w_size-ue):0,u=t.window,c=t.w_mask,h=t.prev,d=t.strstart+le,f=u[a+o-1],p=u[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do if(r=e,u[r+o]===p&&u[r+o-1]===f&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do;while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&d>a);if(n=le-(d-a),a=d-le,n>o){if(t.match_start=e,o=n,n>=s)break;f=u[a+o-1],p=u[a+o]}}while((e=h[e&c])>l&&0!==--i);return o<=t.lookahead?o:t.lookahead}function d(t){var e,r,n,i,a,o=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-ue)){S.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,r=t.hash_size,e=r;do n=t.head[--e],t.head[e]=n>=o?n-o:0;while(--r);r=o,e=r;do n=t.prev[--e],t.prev[e]=n>=o?n-o:0;while(--r);i+=o}if(0===t.strm.avail_in)break;if(r=c(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=se)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+se-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<se)););}while(t.lookahead<ue&&0!==t.strm.avail_in)}function f(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===P)return _e;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,s(t,!1),0===t.strm.avail_out))return _e;if(t.strstart-t.block_start>=t.w_size-ue&&(s(t,!1),0===t.strm.avail_out))return _e}return t.insert=0,e===D?(s(t,!0),0===t.strm.avail_out?ye:be):t.strstart>t.block_start&&(s(t,!1),0===t.strm.avail_out)?_e:_e}function p(t,e){for(var r,n;;){if(t.lookahead<ue){if(d(t),t.lookahead<ue&&e===P)return _e;if(0===t.lookahead)break}if(r=0,t.lookahead>=se&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+se-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-ue&&(t.match_length=h(t,r)),t.match_length>=se)if(n=R._tr_tally(t,t.strstart-t.match_start,t.match_length-se),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=se){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+se-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(s(t,!1),0===t.strm.avail_out))return _e}return t.insert=t.strstart<se-1?t.strstart:se-1,e===D?(s(t,!0),0===t.strm.avail_out?ye:be):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?_e:we}function m(t,e){for(var r,n,i;;){if(t.lookahead<ue){if(d(t),t.lookahead<ue&&e===P)return _e;if(0===t.lookahead)break}if(r=0,t.lookahead>=se&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+se-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=se-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-ue&&(t.match_length=h(t,r),t.match_length<=5&&(t.strategy===q||t.match_length===se&&t.strstart-t.match_start>4096)&&(t.match_length=se-1)),t.prev_length>=se&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-se,n=R._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-se),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+se-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=se-1,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return _e}else if(t.match_available){if(n=R._tr_tally(t,0,t.window[t.strstart-1]),n&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return _e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=R._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<se-1?t.strstart:se-1,e===D?(s(t,!0),0===t.strm.avail_out?ye:be):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?_e:we}function g(t,e){for(var r,n,i,a,o=t.window;;){if(t.lookahead<=le){if(d(t),t.lookahead<=le&&e===P)return _e;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=se&&t.strstart>0&&(i=t.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){a=t.strstart+le;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&a>i);t.match_length=le-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=se?(r=R._tr_tally(t,1,t.match_length-se),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(s(t,!1),0===t.strm.avail_out))return _e}return t.insert=0,e===D?(s(t,!0),0===t.strm.avail_out?ye:be):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?_e:we}function v(t,e){for(var r;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===P)return _e;break}if(t.match_length=0,r=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(s(t,!1),0===t.strm.avail_out))return _e}return t.insert=0,e===D?(s(t,!0),0===t.strm.avail_out?ye:be):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?_e:we}function _(t){t.window_size=2*t.w_size,a(t.head),t.max_lazy_match=T[t.level].max_lazy,t.good_match=T[t.level].good_length,t.nice_match=T[t.level].nice_length,t.max_chain_length=T[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=se-1,t.match_available=0,t.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*ae),this.dyn_dtree=new S.Buf16(2*(2*ne+1)),this.bl_tree=new S.Buf16(2*(2*ie+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(oe+1),this.heap=new S.Buf16(2*re+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*re+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=G,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?he:ge,t.adler=2===e.wrap?0:1,e.last_flush=P,R._tr_init(e),F):n(t,V)}function b(t){var e=y(t);return e===F&&_(t.state),e}function x(t,e){return t&&t.state?2!==t.state.wrap?V:(t.state.gzhead=e,F):V}function M(t,e,r,i,a,o){if(!t)return V;var s=1;if(e===H&&(e=6),0>i?(s=0,i=-i):i>15&&(s=2,i-=16),1>a||a>Q||r!==K||8>i||i>15||0>e||e>9||0>o||o>Z)return n(t,V);8===i&&(i=9);var l=new w;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new S.Buf8(2*l.w_size),l.head=new S.Buf16(l.hash_size),l.prev=new S.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new S.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=o,l.method=r,b(t)}function E(t,e){return M(t,e,K,J,$,Y)}function z(t,e){var r,s,c,h;if(!t||!t.state||e>L||0>e)return t?n(t,V):V;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===ve&&e!==D)return n(t,0===t.avail_out?j:V);if(s.strm=t,r=s.last_flush,s.last_flush=e,s.status===he)if(2===s.wrap)t.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=C(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=de):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,xe),s.status=ge);else{var d=K+(s.w_bits-8<<4)<<8,f=-1;f=s.strategy>=X||s.level<2?0:s.level<6?1:6===s.level?2:3,d|=f<<6,0!==s.strstart&&(d|=ce),d+=31-d%31,s.status=ge,u(s,d),0!==s.strstart&&(u(s,t.adler>>>16),u(s,65535&t.adler)),t.adler=1}if(s.status===de)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(t.adler=C(t.adler,s.pending_buf,s.pending-c,c)),o(t),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(t.adler=C(t.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=fe)}else s.status=fe;if(s.status===fe)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(t.adler=C(t.adler,s.pending_buf,s.pending-c,c)),o(t),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(t.adler=C(t.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(t.adler=C(t.adler,s.pending_buf,s.pending-c,c)),o(t),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(t.adler=C(t.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.status=me)}else s.status=me;if(s.status===me&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(t),s.pending+2<=s.pending_buf_size&&(l(s,255&t.adler),l(s,t.adler>>8&255),t.adler=0,s.status=ge)):s.status=ge),0!==s.pending){if(o(t),0===t.avail_out)return s.last_flush=-1,F}else if(0===t.avail_in&&i(e)<=i(r)&&e!==D)return n(t,j);if(s.status===ve&&0!==t.avail_in)return n(t,j);if(0!==t.avail_in||0!==s.lookahead||e!==P&&s.status!==ve){var p=s.strategy===X?v(s,e):s.strategy===W?g(s,e):T[s.level].func(s,e);if((p===ye||p===be)&&(s.status=ve),p===_e||p===ye)return 0===t.avail_out&&(s.last_flush=-1),F;if(p===we&&(e===I?R._tr_align(s):e!==L&&(R._tr_stored_block(s,0,0,!1),e===B&&(a(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(t),0===t.avail_out))return s.last_flush=-1,F}return e!==D?F:s.wrap<=0?U:(2===s.wrap?(l(s,255&t.adler),l(s,t.adler>>8&255),l(s,t.adler>>16&255),l(s,t.adler>>24&255),l(s,255&t.total_in),l(s,t.total_in>>8&255),l(s,t.total_in>>16&255),l(s,t.total_in>>24&255)):(u(s,t.adler>>>16),u(s,65535&t.adler)),o(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?F:U)}function A(t){var e;return t&&t.state?(e=t.state.status,e!==he&&e!==de&&e!==fe&&e!==pe&&e!==me&&e!==ge&&e!==ve?n(t,V):(t.state=null,e===ge?n(t,N):F)):V}var T,S=t("../utils/common"),R=t("./trees"),k=t("./adler32"),C=t("./crc32"),O=t("./messages"),P=0,I=1,B=3,D=4,L=5,F=0,U=1,V=-2,N=-3,j=-5,H=-1,q=1,X=2,W=3,Z=4,Y=0,G=2,K=8,Q=9,J=15,$=8,te=29,ee=256,re=ee+1+te,ne=30,ie=19,ae=2*re+1,oe=15,se=3,le=258,ue=le+se+1,ce=32,he=42,de=69,fe=73,pe=91,me=103,ge=113,ve=666,_e=1,we=2,ye=3,be=4,xe=3,Me=function(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i};T=[new Me(0,0,0,0,f),new Me(4,4,8,4,p),new Me(4,5,16,8,p),new Me(4,6,32,32,p),new Me(4,4,16,16,m),new Me(8,16,32,32,m),new Me(8,16,128,128,m),new Me(8,32,128,256,m),new Me(32,128,258,1024,m),new Me(32,258,258,4096,m)],r.deflateInit=E,r.deflateInit2=M,r.deflateReset=b,r.deflateResetKeep=y,r.deflateSetHeader=x,r.deflate=z,r.deflateEnd=A,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(t,e){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},{}],34:[function(t,e){"use strict";var r=30,n=12;e.exports=function(t,e){var i,a,o,s,l,u,c,h,d,f,p,m,g,v,_,w,y,b,x,M,E,z,A,T,S;i=t.state,a=t.next_in,T=t.input,o=a+(t.avail_in-5),s=t.next_out,S=t.output,l=s-(e-t.avail_out),u=s+(t.avail_out-257),c=i.dmax,h=i.wsize,d=i.whave,f=i.wnext,p=i.window,m=i.hold,g=i.bits,v=i.lencode,_=i.distcode,w=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{15>g&&(m+=T[a++]<<g,g+=8,m+=T[a++]<<g,g+=8),b=v[m&w];e:for(;;){if(x=b>>>24,m>>>=x,g-=x,x=b>>>16&255,0===x)S[s++]=65535&b;else{if(!(16&x)){if(0===(64&x)){b=v[(65535&b)+(m&(1<<x)-1)];continue e}if(32&x){i.mode=n;break t}t.msg="invalid literal/length code",i.mode=r;break t}M=65535&b,x&=15,x&&(x>g&&(m+=T[a++]<<g,g+=8),M+=m&(1<<x)-1,m>>>=x,g-=x),15>g&&(m+=T[a++]<<g,g+=8,m+=T[a++]<<g,g+=8),b=_[m&y];r:for(;;){if(x=b>>>24,m>>>=x,g-=x,x=b>>>16&255,!(16&x)){if(0===(64&x)){b=_[(65535&b)+(m&(1<<x)-1)];continue r}t.msg="invalid distance code",i.mode=r;break t}if(E=65535&b,x&=15,x>g&&(m+=T[a++]<<g,g+=8,x>g&&(m+=T[a++]<<g,g+=8)),E+=m&(1<<x)-1,E>c){t.msg="invalid distance too far back",i.mode=r;break t}if(m>>>=x,g-=x,x=s-l,E>x){if(x=E-x,x>d&&i.sane){t.msg="invalid distance too far back",i.mode=r;break t}if(z=0,A=p,0===f){if(z+=h-x,M>x){M-=x;do S[s++]=p[z++];while(--x);z=s-E,A=S}}else if(x>f){if(z+=h+f-x,x-=f,M>x){M-=x;do S[s++]=p[z++];while(--x);if(z=0,M>f){x=f,M-=x;do S[s++]=p[z++];while(--x);z=s-E,A=S}}}else if(z+=f-x,M>x){M-=x;do S[s++]=p[z++];while(--x);z=s-E,A=S}for(;M>2;)S[s++]=A[z++],S[s++]=A[z++],S[s++]=A[z++],M-=3;M&&(S[s++]=A[z++],M>1&&(S[s++]=A[z++]))}else{z=s-E;do S[s++]=S[z++],S[s++]=S[z++],S[s++]=S[z++],M-=3;while(M>2);M&&(S[s++]=S[z++],M>1&&(S[s++]=S[z++]))}break}}break}}while(o>a&&u>s);M=g>>3,a-=M,g-=M<<3,m&=(1<<g)-1,t.next_in=a,t.next_out=s,t.avail_in=o>a?5+(o-a):5-(a-o),t.avail_out=u>s?257+(u-s):257-(s-u),i.hold=m,i.bits=g}},{}],35:[function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=D,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new v.Buf32(pe),e.distcode=e.distdyn=new v.Buf32(me),e.sane=1,e.back=-1,S):C}function o(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,a(t)):C}function s(t,e){var r,n;return t&&t.state?(n=t.state,0>e?(r=0,e=-e):(r=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?C:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,o(t))):C}function l(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,r=s(t,e),r!==S&&(t.state=null),r):C}function u(t){return l(t,ve)}function c(t){if(_e){var e;for(m=new v.Buf32(512),g=new v.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(b(M,t.lens,0,288,m,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;b(E,t.lens,0,32,g,0,t.work,{bits:5}),_e=!1}t.lencode=m,t.lenbits=9,t.distcode=g,t.distbits=5}function h(t,e,r,n){var i,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new v.Buf8(a.wsize)),n>=a.wsize?(v.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),v.arraySet(a.window,e,r-n,i,a.wnext),n-=i,n?(v.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function d(t,e){var r,i,a,o,s,l,u,d,f,p,m,g,pe,me,ge,ve,_e,we,ye,be,xe,Me,Ee,ze,Ae=0,Te=new v.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return C;r=t.state,r.mode===Z&&(r.mode=Y),s=t.next_out,a=t.output,u=t.avail_out,o=t.next_in,i=t.input,l=t.avail_in,d=r.hold,f=r.bits,p=l,m=u,Me=S;t:for(;;)switch(r.mode){case D:if(0===r.wrap){r.mode=Y;break}for(;16>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if(2&r.wrap&&35615===d){r.check=0,Te[0]=255&d,Te[1]=d>>>8&255,r.check=w(r.check,Te,2,0),d=0,f=0,r.mode=L;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",r.mode=he;break}if((15&d)!==B){t.msg="unknown compression method",r.mode=he;break}if(d>>>=4,f-=4,xe=(15&d)+8,0===r.wbits)r.wbits=xe;else if(xe>r.wbits){t.msg="invalid window size",r.mode=he;break}r.dmax=1<<xe,t.adler=r.check=1,r.mode=512&d?X:Z,d=0,f=0;break;case L:for(;16>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if(r.flags=d,(255&r.flags)!==B){t.msg="unknown compression method",r.mode=he;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=he;break}r.head&&(r.head.text=d>>8&1),512&r.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,r.check=w(r.check,Te,2,0)),d=0,f=0,r.mode=F;case F:for(;32>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}r.head&&(r.head.time=d),512&r.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,Te[2]=d>>>16&255,Te[3]=d>>>24&255,r.check=w(r.check,Te,4,0)),d=0,f=0,r.mode=U;case U:for(;16>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}r.head&&(r.head.xflags=255&d,r.head.os=d>>8),512&r.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,r.check=w(r.check,Te,2,0)),d=0,f=0,r.mode=V;case V:if(1024&r.flags){for(;16>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}r.length=d,r.head&&(r.head.extra_len=d),512&r.flags&&(Te[0]=255&d,Te[1]=d>>>8&255,r.check=w(r.check,Te,2,0)),d=0,f=0}else r.head&&(r.head.extra=null);r.mode=N;case N:if(1024&r.flags&&(g=r.length,g>l&&(g=l),g&&(r.head&&(xe=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),v.arraySet(r.head.extra,i,o,g,xe)),512&r.flags&&(r.check=w(r.check,i,g,o)),l-=g,o+=g,r.length-=g),r.length))break t;r.length=0,r.mode=j;case j:if(2048&r.flags){if(0===l)break t;g=0;do xe=i[o+g++],r.head&&xe&&r.length<65536&&(r.head.name+=String.fromCharCode(xe));while(xe&&l>g);if(512&r.flags&&(r.check=w(r.check,i,g,o)),l-=g,o+=g,xe)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=H;case H:if(4096&r.flags){if(0===l)break t;g=0;do xe=i[o+g++],r.head&&xe&&r.length<65536&&(r.head.comment+=String.fromCharCode(xe));while(xe&&l>g);if(512&r.flags&&(r.check=w(r.check,i,g,o)),l-=g,o+=g,xe)break t}else r.head&&(r.head.comment=null);r.mode=q;case q:if(512&r.flags){for(;16>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if(d!==(65535&r.check)){t.msg="header crc mismatch",r.mode=he;break}d=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Z;break;case X:for(;32>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}t.adler=r.check=n(d),d=0,f=0,r.mode=W;case W:if(0===r.havedict)return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,r.hold=d,r.bits=f,k;t.adler=r.check=1,r.mode=Z;case Z:if(e===A||e===T)break t;case Y:if(r.last){d>>>=7&f,f-=7&f,r.mode=le;break}for(;3>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}switch(r.last=1&d,d>>>=1,f-=1,3&d){case 0:r.mode=G;break;case 1:if(c(r),r.mode=ee,e===T){d>>>=2,f-=2;break t}break;case 2:r.mode=J;break;case 3:t.msg="invalid block type",r.mode=he}d>>>=2,f-=2;break;case G:for(d>>>=7&f,f-=7&f;32>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){t.msg="invalid stored block lengths",r.mode=he;break}if(r.length=65535&d,d=0,f=0,r.mode=K,e===T)break t;case K:r.mode=Q;case Q:if(g=r.length){if(g>l&&(g=l),g>u&&(g=u),0===g)break t;v.arraySet(a,i,o,g,s),l-=g,o+=g,u-=g,s+=g,r.length-=g;break}r.mode=Z;break;case J:for(;14>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if(r.nlen=(31&d)+257,d>>>=5,f-=5,r.ndist=(31&d)+1,d>>>=5,f-=5,r.ncode=(15&d)+4,d>>>=4,f-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=he;break}r.have=0,r.mode=$;case $:for(;r.have<r.ncode;){for(;3>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}r.lens[Se[r.have++]]=7&d,d>>>=3,f-=3}for(;r.have<19;)r.lens[Se[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ee={bits:r.lenbits},Me=b(x,r.lens,0,19,r.lencode,0,r.work,Ee),r.lenbits=Ee.bits,Me){t.msg="invalid code lengths set",r.mode=he;break}r.have=0,r.mode=te;case te:for(;r.have<r.nlen+r.ndist;){for(;Ae=r.lencode[d&(1<<r.lenbits)-1],ge=Ae>>>24,ve=Ae>>>16&255,_e=65535&Ae,!(f>=ge);){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if(16>_e)d>>>=ge,f-=ge,r.lens[r.have++]=_e;else{if(16===_e){for(ze=ge+2;ze>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if(d>>>=ge,f-=ge,0===r.have){t.msg="invalid bit length repeat",r.mode=he;break}xe=r.lens[r.have-1],g=3+(3&d),d>>>=2,f-=2}else if(17===_e){for(ze=ge+3;ze>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}d>>>=ge,f-=ge,xe=0,g=3+(7&d),d>>>=3,f-=3}else{for(ze=ge+7;ze>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}d>>>=ge,f-=ge,xe=0,g=11+(127&d),d>>>=7,f-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=he;break}for(;g--;)r.lens[r.have++]=xe}}if(r.mode===he)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=he;break}if(r.lenbits=9,Ee={bits:r.lenbits},Me=b(M,r.lens,0,r.nlen,r.lencode,0,r.work,Ee),r.lenbits=Ee.bits,Me){t.msg="invalid literal/lengths set",r.mode=he;break}if(r.distbits=6,r.distcode=r.distdyn,Ee={bits:r.distbits},Me=b(E,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ee),r.distbits=Ee.bits,Me){t.msg="invalid distances set",r.mode=he;break}if(r.mode=ee,e===T)break t;case ee:r.mode=re;case re:if(l>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,r.hold=d,r.bits=f,y(t,m),s=t.next_out,a=t.output,u=t.avail_out,o=t.next_in,i=t.input,l=t.avail_in,d=r.hold,f=r.bits,r.mode===Z&&(r.back=-1);break}for(r.back=0;Ae=r.lencode[d&(1<<r.lenbits)-1],ge=Ae>>>24,ve=Ae>>>16&255,_e=65535&Ae,!(f>=ge);){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if(ve&&0===(240&ve)){for(we=ge,ye=ve,be=_e;Ae=r.lencode[be+((d&(1<<we+ye)-1)>>we)],ge=Ae>>>24,ve=Ae>>>16&255,_e=65535&Ae,!(f>=we+ge);){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}d>>>=we,f-=we,r.back+=we}if(d>>>=ge,f-=ge,r.back+=ge,r.length=_e,0===ve){r.mode=se;break}if(32&ve){r.back=-1,r.mode=Z;break}if(64&ve){t.msg="invalid literal/length code",r.mode=he;break}r.extra=15&ve,r.mode=ne;case ne:if(r.extra){for(ze=r.extra;ze>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ie;case ie:for(;Ae=r.distcode[d&(1<<r.distbits)-1],ge=Ae>>>24,ve=Ae>>>16&255,_e=65535&Ae,!(f>=ge);){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if(0===(240&ve)){for(we=ge,ye=ve,be=_e;Ae=r.distcode[be+((d&(1<<we+ye)-1)>>we)],ge=Ae>>>24,ve=Ae>>>16&255,_e=65535&Ae,!(f>=we+ge);){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}d>>>=we,f-=we,r.back+=we}if(d>>>=ge,f-=ge,r.back+=ge,64&ve){t.msg="invalid distance code",r.mode=he;break}r.offset=_e,r.extra=15&ve,r.mode=ae;case ae:if(r.extra){for(ze=r.extra;ze>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=he;break}r.mode=oe;case oe:if(0===u)break t;
if(g=m-u,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=he;break}g>r.wnext?(g-=r.wnext,pe=r.wsize-g):pe=r.wnext-g,g>r.length&&(g=r.length),me=r.window}else me=a,pe=s-r.offset,g=r.length;g>u&&(g=u),u-=g,r.length-=g;do a[s++]=me[pe++];while(--g);0===r.length&&(r.mode=re);break;case se:if(0===u)break t;a[s++]=r.length,u--,r.mode=re;break;case le:if(r.wrap){for(;32>f;){if(0===l)break t;l--,d|=i[o++]<<f,f+=8}if(m-=u,t.total_out+=m,r.total+=m,m&&(t.adler=r.check=r.flags?w(r.check,a,m,s-m):_(r.check,a,m,s-m)),m=u,(r.flags?d:n(d))!==r.check){t.msg="incorrect data check",r.mode=he;break}d=0,f=0}r.mode=ue;case ue:if(r.wrap&&r.flags){for(;32>f;){if(0===l)break t;l--,d+=i[o++]<<f,f+=8}if(d!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=he;break}d=0,f=0}r.mode=ce;case ce:Me=R;break t;case he:Me=O;break t;case de:return P;case fe:default:return C}return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,r.hold=d,r.bits=f,(r.wsize||m!==t.avail_out&&r.mode<he&&(r.mode<le||e!==z))&&h(t,t.output,t.next_out,m-t.avail_out)?(r.mode=de,P):(p-=t.avail_in,m-=t.avail_out,t.total_in+=p,t.total_out+=m,r.total+=m,r.wrap&&m&&(t.adler=r.check=r.flags?w(r.check,a,m,t.next_out-m):_(r.check,a,m,t.next_out-m)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Z?128:0)+(r.mode===ee||r.mode===K?256:0),(0===p&&0===m||e===z)&&Me===S&&(Me=I),Me)}function f(t){if(!t||!t.state)return C;var e=t.state;return e.window&&(e.window=null),t.state=null,S}function p(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?C:(r.head=e,e.done=!1,S)):C}var m,g,v=t("../utils/common"),_=t("./adler32"),w=t("./crc32"),y=t("./inffast"),b=t("./inftrees"),x=0,M=1,E=2,z=4,A=5,T=6,S=0,R=1,k=2,C=-2,O=-3,P=-4,I=-5,B=8,D=1,L=2,F=3,U=4,V=5,N=6,j=7,H=8,q=9,X=10,W=11,Z=12,Y=13,G=14,K=15,Q=16,J=17,$=18,te=19,ee=20,re=21,ne=22,ie=23,ae=24,oe=25,se=26,le=27,ue=28,ce=29,he=30,de=31,fe=32,pe=852,me=592,ge=15,ve=ge,_e=!0;r.inflateReset=o,r.inflateReset2=s,r.inflateResetKeep=a,r.inflateInit=u,r.inflateInit2=l,r.inflate=d,r.inflateEnd=f,r.inflateGetHeader=p,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(t,e){"use strict";var r=t("../utils/common"),n=15,i=852,a=592,o=0,s=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,f,p,m,g,v,_){var w,y,b,x,M,E,z,A,T,S=_.bits,R=0,k=0,C=0,O=0,P=0,I=0,B=0,D=0,L=0,F=0,U=null,V=0,N=new r.Buf16(n+1),j=new r.Buf16(n+1),H=null,q=0;for(R=0;n>=R;R++)N[R]=0;for(k=0;p>k;k++)N[e[f+k]]++;for(P=S,O=n;O>=1&&0===N[O];O--);if(P>O&&(P=O),0===O)return m[g++]=20971520,m[g++]=20971520,_.bits=1,0;for(C=1;O>C&&0===N[C];C++);for(C>P&&(P=C),D=1,R=1;n>=R;R++)if(D<<=1,D-=N[R],0>D)return-1;if(D>0&&(t===o||1!==O))return-1;for(j[1]=0,R=1;n>R;R++)j[R+1]=j[R]+N[R];for(k=0;p>k;k++)0!==e[f+k]&&(v[j[e[f+k]]++]=k);if(t===o?(U=H=v,E=19):t===s?(U=u,V-=257,H=c,q-=257,E=256):(U=h,H=d,E=-1),F=0,k=0,R=C,M=g,I=P,B=0,b=-1,L=1<<P,x=L-1,t===s&&L>i||t===l&&L>a)return 1;for(var X=0;;){X++,z=R-B,v[k]<E?(A=0,T=v[k]):v[k]>E?(A=H[q+v[k]],T=U[V+v[k]]):(A=96,T=0),w=1<<R-B,y=1<<I,C=y;do y-=w,m[M+(F>>B)+y]=z<<24|A<<16|T|0;while(0!==y);for(w=1<<R-1;F&w;)w>>=1;if(0!==w?(F&=w-1,F+=w):F=0,k++,0===--N[R]){if(R===O)break;R=e[f+v[k]]}if(R>P&&(F&x)!==b){for(0===B&&(B=P),M+=C,I=R-B,D=1<<I;O>I+B&&(D-=N[I+B],!(0>=D));)I++,D<<=1;if(L+=1<<I,t===s&&L>i||t===l&&L>a)return 1;b=F&x,m[b]=P<<24|I<<16|M-g|0}}return 0!==F&&(m[M+F]=R-B<<24|64<<16|0),_.bits=P,0}},{"../utils/common":27}],37:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t){return 256>t?oe[t]:oe[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function o(t,e,r){t.bi_valid>Z-r?(t.bi_buf|=e<<t.bi_valid&65535,a(t,t.bi_buf),t.bi_buf=e>>Z-t.bi_valid,t.bi_valid+=r-Z):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function s(t,e,r){o(t,r[2*e],r[2*e+1])}function l(t,e){var r=0;do r|=1&t,t>>>=1,r<<=1;while(--e>0);return r>>>1}function u(t){16===t.bi_valid?(a(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function c(t,e){var r,n,i,a,o,s,l=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(a=0;W>=a;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;X>r;r++)n=t.heap[r],a=l[2*l[2*n+1]+1]+1,a>p&&(a=p,m++),l[2*n+1]=a,n>u||(t.bl_count[a]++,o=0,n>=f&&(o=d[n-f]),s=l[2*n],t.opt_len+=s*(a+o),h&&(t.static_len+=s*(c[2*n+1]+o)));if(0!==m){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(n=t.bl_count[a];0!==n;)i=t.heap[--r],i>u||(l[2*i+1]!==a&&(t.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),n--)}}function h(t,e,r){var n,i,a=new Array(W+1),o=0;for(n=1;W>=n;n++)a[n]=o=o+r[n-1]<<1;for(i=0;e>=i;i++){var s=t[2*i+1];0!==s&&(t[2*i]=l(a[s]++,s))}}function d(){var t,e,r,n,i,a=new Array(W+1);for(r=0,n=0;V-1>n;n++)for(le[n]=r,t=0;t<1<<$[n];t++)se[r++]=n;for(se[r-1]=n,i=0,n=0;16>n;n++)for(ue[n]=i,t=0;t<1<<te[n];t++)oe[i++]=n;for(i>>=7;H>n;n++)for(ue[n]=i<<7,t=0;t<1<<te[n]-7;t++)oe[256+i++]=n;for(e=0;W>=e;e++)a[e]=0;for(t=0;143>=t;)ie[2*t+1]=8,t++,a[8]++;for(;255>=t;)ie[2*t+1]=9,t++,a[9]++;for(;279>=t;)ie[2*t+1]=7,t++,a[7]++;for(;287>=t;)ie[2*t+1]=8,t++,a[8]++;for(h(ie,j+1,a),t=0;H>t;t++)ae[2*t+1]=5,ae[2*t]=l(t,5);ce=new fe(ie,$,N+1,j,W),he=new fe(ae,te,0,H,W),de=new fe(new Array(0),ee,0,q,Y)}function f(t){var e;for(e=0;j>e;e++)t.dyn_ltree[2*e]=0;for(e=0;H>e;e++)t.dyn_dtree[2*e]=0;for(e=0;q>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*G]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function m(t,e,r,n){p(t),n&&(a(t,r),a(t,~r)),k.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function g(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function v(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&g(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!g(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function _(t,e,r){var n,a,l,u,c=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],a=t.pending_buf[t.l_buf+c],c++,0===n?s(t,a,e):(l=se[a],s(t,l+N+1,e),u=$[l],0!==u&&(a-=le[l],o(t,a,u)),n--,l=i(n),s(t,l,r),u=te[l],0!==u&&(n-=ue[l],o(t,n,u)));while(c<t.last_lit);s(t,G,e)}function w(t,e){var r,n,i,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=X,r=0;l>r;r++)0!==a[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=2>u?++u:0,a[2*i]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=u,r=t.heap_len>>1;r>=1;r--)v(t,a,r);i=l;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],v(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,v(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],c(t,e),h(a,u,t.bl_count)}function y(t,e,r){var n,i,a=-1,o=e[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),e[2*(r+1)+1]=65535,n=0;r>=n;n++)i=o,o=e[2*(n+1)+1],++s<l&&i===o||(u>s?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[2*K]++):10>=s?t.bl_tree[2*Q]++:t.bl_tree[2*J]++,s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4))}function b(t,e,r){var n,i,a=-1,l=e[1],u=0,c=7,h=4;for(0===l&&(c=138,h=3),n=0;r>=n;n++)if(i=l,l=e[2*(n+1)+1],!(++u<c&&i===l)){if(h>u)do s(t,i,t.bl_tree);while(0!==--u);else 0!==i?(i!==a&&(s(t,i,t.bl_tree),u--),s(t,K,t.bl_tree),o(t,u-3,2)):10>=u?(s(t,Q,t.bl_tree),o(t,u-3,3)):(s(t,J,t.bl_tree),o(t,u-11,7));u=0,a=i,0===l?(c=138,h=3):i===l?(c=6,h=3):(c=7,h=4)}}function x(t){var e;for(y(t,t.dyn_ltree,t.l_desc.max_code),y(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=q-1;e>=3&&0===t.bl_tree[2*re[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function M(t,e,r,n){var i;for(o(t,e-257,5),o(t,r-1,5),o(t,n-4,4),i=0;n>i;i++)o(t,t.bl_tree[2*re[i]+1],3);b(t,t.dyn_ltree,e-1),b(t,t.dyn_dtree,r-1)}function E(t){var e,r=4093624447;for(e=0;31>=e;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return O;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return P;for(e=32;N>e;e++)if(0!==t.dyn_ltree[2*e])return P;return O}function z(t){me||(d(),me=!0),t.l_desc=new pe(t.dyn_ltree,ce),t.d_desc=new pe(t.dyn_dtree,he),t.bl_desc=new pe(t.bl_tree,de),t.bi_buf=0,t.bi_valid=0,f(t)}function A(t,e,r,n){o(t,(B<<1)+(n?1:0),3),m(t,e,r,!0)}function T(t){o(t,D<<1,3),s(t,G,ie),u(t)}function S(t,e,r,n){var i,a,s=0;t.level>0?(t.strm.data_type===I&&(t.strm.data_type=E(t)),w(t,t.l_desc),w(t,t.d_desc),s=x(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,i>=a&&(i=a)):i=a=r+5,i>=r+4&&-1!==e?A(t,e,r,n):t.strategy===C||a===i?(o(t,(D<<1)+(n?1:0),3),_(t,ie,ae)):(o(t,(L<<1)+(n?1:0),3),M(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),_(t,t.dyn_ltree,t.dyn_dtree)),f(t),n&&p(t)}function R(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(se[r]+N+1)]++,t.dyn_dtree[2*i(e)]++),t.last_lit===t.lit_bufsize-1}var k=t("../utils/common"),C=4,O=0,P=1,I=2,B=0,D=1,L=2,F=3,U=258,V=29,N=256,j=N+1+V,H=30,q=19,X=2*j+1,W=15,Z=16,Y=7,G=256,K=16,Q=17,J=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=512,ie=new Array(2*(j+2));n(ie);var ae=new Array(2*H);n(ae);var oe=new Array(ne);n(oe);var se=new Array(U-F+1);n(se);var le=new Array(V);n(le);var ue=new Array(H);n(ue);var ce,he,de,fe=function(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length},pe=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},me=!1;r._tr_init=z,r._tr_stored_block=A,r._tr_flush_block=S,r._tr_tally=R,r._tr_align=T},{"../utils/common":27}],39:[function(t,e){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},{}]},{},[9])(9)}),/**
@preserve

JSZipUtils - A collection of cross-browser utilities to go along with JSZip.
<http://stuk.github.io/jszip-utils>

(c) 2014 Stuart Knightley, David Duponchel
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip-utils/master/LICENSE.markdown.

*/
!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.JSZipUtils=t():"undefined"!=typeof global?global.JSZipUtils=t():"undefined"!=typeof self&&(self.JSZipUtils=t())}(function(){return function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e){"use strict";function r(){try{return new window.XMLHttpRequest}catch(t){}}function n(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}var i={};i._getBinaryFromXHR=function(t){return t.response||t.responseText};var a=window.ActiveXObject?function(){return r()||n()}:r;i.getBinaryContent=function(t,e){try{var r=a();r.open("GET",t,!0),"responseType"in r&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(){var n,a;if(4===r.readyState)if(200===r.status||0===r.status){n=null,a=null;try{n=i._getBinaryFromXHR(r)}catch(t){a=new Error(t)}e(a,n)}else e(new Error("Ajax error for "+t+" : "+this.status+" "+this.statusText),null)},r.send()}catch(t){e(new Error(t),null)}},e.exports=i},{}]},{},[1])(1)}),/**
 @preserve
 * @fileoverview gl-matrix - High performance matrix and vector operations
 * @author Brandon Jones
 * @author Colin MacKenzie IV
 * @version 2.2.1

Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

  * Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
  * Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */
function(t){"use strict";var e={};"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e.exports={},define(function(){return e.exports})):e.exports="undefined"!=typeof window?window:t:e.exports=exports,function(t){if(!e)var e=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;if(!n)var n=Math.random;var i={};i.setMatrixArrayType=function(t){r=t},"undefined"!=typeof t&&(t.glMatrix=i);var a=Math.PI/180;i.toRadian=function(t){return t*a};var o={};o.create=function(){var t=new r(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new r(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var n=new r(2);return n[0]=t,n[1]=e,n},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,r){return t[0]=e,t[1]=r,t},o.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},o.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},o.sub=o.subtract,o.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},o.mul=o.multiply,o.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},o.div=o.divide,o.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},o.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},o.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},o.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},o.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},o.dist=o.distance,o.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},o.len=o.length,o.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},o.lerp=function(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t},o.random=function(t,e){e=e||1;var r=2*n()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},o.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},o.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},o.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},o.transformMat4=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},o.forEach=function(){var t=o.create();return function(e,r,n,i,a,o){var s,l;for(r||(r=2),n||(n=0),l=i?Math.min(i*r+n,e.length):e.length,s=n;l>s;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=o);var s={};s.create=function(){var t=new r(3);return t[0]=0,t[1]=0,t[2]=0,t},s.clone=function(t){var e=new r(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},s.fromValues=function(t,e,n){var i=new r(3);return i[0]=t,i[1]=e,i[2]=n,i},s.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},s.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},s.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},s.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},s.sub=s.subtract,s.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},s.mul=s.multiply,s.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},s.div=s.divide,s.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},s.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},s.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},s.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},s.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},s.dist=s.distance,s.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i},s.sqrDist=s.squaredDistance,s.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},s.len=s.length,s.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},s.sqrLen=s.squaredLength,s.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},s.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t},s.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},s.cross=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2];return t[0]=i*l-a*s,t[1]=a*o-n*l,t[2]=n*s-i*o,t},s.lerp=function(t,e,r,n){var i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t},s.random=function(t,e){e=e||1;var r=2*n()*Math.PI,i=2*n()-1,a=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=i*e,t},s.transformMat4=function(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12],t[1]=r[1]*n+r[5]*i+r[9]*a+r[13],t[2]=r[2]*n+r[6]*i+r[10]*a+r[14],t},s.transformMat3=function(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t},s.transformQuat=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*a-l*i,h=u*i+l*n-o*a,d=u*a+o*i-s*n,f=-o*n-s*i-l*a;return t[0]=c*u+f*-o+h*-l-d*-s,t[1]=h*u+f*-s+d*-o-c*-l,t[2]=d*u+f*-l+c*-s-h*-o,t},s.rotateX=function(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},s.rotateY=function(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},s.rotateZ=function(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},s.forEach=function(){var t=s.create();return function(e,r,n,i,a,o){var s,l;for(r||(r=3),n||(n=0),l=i?Math.min(i*r+n,e.length):e.length,s=n;l>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),s.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=s);var l={};l.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},l.clone=function(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},l.fromValues=function(t,e,n,i){var a=new r(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a},l.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},l.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},l.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},l.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},l.sub=l.subtract,l.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},l.mul=l.multiply,l.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},l.div=l.divide,l.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},l.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},l.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},l.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},l.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+a*a)},l.dist=l.distance,l.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a},l.sqrDist=l.squaredDistance,l.length=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)},l.len=l.length,l.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i},l.sqrLen=l.squaredLength,l.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},l.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o),t},l.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},l.lerp=function(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t},l.random=function(t,e){return e=e||1,t[0]=n(),t[1]=n(),t[2]=n(),t[3]=n(),l.normalize(t,t),l.scale(t,t,e),t},l.transformMat4=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t},l.transformQuat=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*a-l*i,h=u*i+l*n-o*a,d=u*a+o*i-s*n,f=-o*n-s*i-l*a;return t[0]=c*u+f*-o+h*-l-d*-s,t[1]=h*u+f*-s+d*-o-c*-l,t[2]=d*u+f*-l+c*-s-h*-o,t},l.forEach=function(){var t=l.create();return function(e,r,n,i,a,o){var s,l;for(r||(r=4),n||(n=0),l=i?Math.min(i*r+n,e.length):e.length,s=n;l>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),l.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=l);var u={};u.create=function(){var t=new r(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},u.clone=function(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},u.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},u.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},u.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},u.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*a-i*n;return o?(o=1/o,t[0]=a*o,t[1]=-n*o,t[2]=-i*o,t[3]=r*o,t):null},u.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},u.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},u.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*s+a*l,t[1]=i*s+o*l,t[2]=n*u+a*c,t[3]=i*u+o*c,t},u.mul=u.multiply,u.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*s,t[1]=i*l+o*s,t[2]=n*-s+a*l,t[3]=i*-s+o*l,t},u.scale=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1];return t[0]=n*s,t[1]=i*s,t[2]=a*l,t[3]=o*l,t},u.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},u.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},"undefined"!=typeof t&&(t.mat2=u);var c={};c.create=function(){var t=new r(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},c.clone=function(t){var e=new r(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},c.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},c.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=r*a-n*i;return l?(l=1/l,t[0]=a*l,t[1]=-n*l,t[2]=-i*l,t[3]=r*l,t[4]=(i*s-a*o)*l,t[5]=(n*o-r*s)*l,t):null},c.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},c.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1],h=r[2],d=r[3],f=r[4],p=r[5];return t[0]=n*u+a*c,t[1]=i*u+o*c,t[2]=n*h+a*d,t[3]=i*h+o*d,t[4]=n*f+a*p+s,t[5]=i*f+o*p+l,t},c.mul=c.multiply,c.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*u,t[1]=i*c+o*u,t[2]=n*-u+a*c,t[3]=i*-u+o*c,t[4]=s,t[5]=l,t},c.scale=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=n*u,t[1]=i*u,t[2]=a*c,t[3]=o*c,t[4]=s,t[5]=l,t},c.translate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=n*u+a*c+s,t[5]=i*u+o*c+l,t},c.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=c);var h={};h.create=function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},h.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},h.clone=function(t){var e=new r(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},h.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},h.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},h.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*o-s*u,d=-c*a+s*l,f=u*a-o*l,p=r*h+n*d+i*f;return p?(p=1/p,t[0]=h*p,t[1]=(-c*n+i*u)*p,t[2]=(s*n-i*o)*p,t[3]=d*p,t[4]=(c*r-i*l)*p,t[5]=(-s*r+i*a)*p,t[6]=f*p,t[7]=(-u*r+n*l)*p,t[8]=(o*r-n*a)*p,t):null},h.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=o*c-s*u,t[1]=i*u-n*c,t[2]=n*s-i*o,t[3]=s*l-a*c,t[4]=r*c-i*l,t[5]=i*a-r*s,t[6]=a*u-o*l,t[7]=n*l-r*u,t[8]=r*o-n*a,t},h.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*(u*a-o*l)+r*(-u*i+o*s)+n*(l*i-a*s)},h.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=r[0],f=r[1],p=r[2],m=r[3],g=r[4],v=r[5],_=r[6],w=r[7],y=r[8];return t[0]=d*n+f*o+p*u,t[1]=d*i+f*s+p*c,t[2]=d*a+f*l+p*h,t[3]=m*n+g*o+v*u,t[4]=m*i+g*s+v*c,t[5]=m*a+g*l+v*h,t[6]=_*n+w*o+y*u,t[7]=_*i+w*s+y*c,t[8]=_*a+w*l+y*h,t},h.mul=h.multiply,h.translate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=r[0],f=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=d*n+f*o+u,t[7]=d*i+f*s+c,t[8]=d*a+f*l+h,t},h.rotate=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=Math.sin(r),f=Math.cos(r);return t[0]=f*n+d*o,t[1]=f*i+d*s,t[2]=f*a+d*l,t[3]=f*o-d*n,t[4]=f*s-d*i,t[5]=f*l-d*a,t[6]=u,t[7]=c,t[8]=h,t},h.scale=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},h.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},h.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,h=n*s,d=i*o,f=i*s,p=i*l,m=a*o,g=a*s,v=a*l;return t[0]=1-h-p,t[3]=c-v,t[6]=d+g,t[1]=c+v,t[4]=1-u-p,t[7]=f-m,t[2]=d-g,t[5]=f+m,t[8]=1-u-h,t},h.normalFromMat4=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],_=r*s-n*o,w=r*l-i*o,y=r*u-a*o,b=n*l-i*s,x=n*u-a*s,M=i*u-a*l,E=c*m-h*p,z=c*g-d*p,A=c*v-f*p,T=h*g-d*m,S=h*v-f*m,R=d*v-f*g,k=_*R-w*S+y*T+b*A-x*z+M*E;return k?(k=1/k,t[0]=(s*R-l*S+u*T)*k,t[1]=(l*A-o*R-u*z)*k,t[2]=(o*S-s*A+u*E)*k,t[3]=(i*S-n*R-a*T)*k,t[4]=(r*R-i*A+a*z)*k,t[5]=(n*A-r*S-a*E)*k,t[6]=(m*M-g*x+v*b)*k,t[7]=(g*y-p*M-v*w)*k,t[8]=(p*x-m*y+v*_)*k,t):null},h.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=h);var d={};d.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},d.clone=function(t){var e=new r(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},d.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},d.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},d.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},d.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],_=r*s-n*o,w=r*l-i*o,y=r*u-a*o,b=n*l-i*s,x=n*u-a*s,M=i*u-a*l,E=c*m-h*p,z=c*g-d*p,A=c*v-f*p,T=h*g-d*m,S=h*v-f*m,R=d*v-f*g,k=_*R-w*S+y*T+b*A-x*z+M*E;return k?(k=1/k,t[0]=(s*R-l*S+u*T)*k,t[1]=(i*S-n*R-a*T)*k,t[2]=(m*M-g*x+v*b)*k,t[3]=(d*x-h*M-f*b)*k,t[4]=(l*A-o*R-u*z)*k,t[5]=(r*R-i*A+a*z)*k,t[6]=(g*y-p*M-v*w)*k,t[7]=(c*M-d*y+f*w)*k,t[8]=(o*S-s*A+u*E)*k,t[9]=(n*A-r*S-a*E)*k,t[10]=(p*x-m*y+v*_)*k,t[11]=(h*y-c*x-f*_)*k,t[12]=(s*z-o*T-l*E)*k,t[13]=(r*T-n*z+i*E)*k,t[14]=(m*w-p*b-g*_)*k,t[15]=(c*b-h*w+d*_)*k,t):null},d.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15];return t[0]=s*(d*v-f*g)-h*(l*v-u*g)+m*(l*f-u*d),t[1]=-(n*(d*v-f*g)-h*(i*v-a*g)+m*(i*f-a*d)),t[2]=n*(l*v-u*g)-s*(i*v-a*g)+m*(i*u-a*l),t[3]=-(n*(l*f-u*d)-s*(i*f-a*d)+h*(i*u-a*l)),t[4]=-(o*(d*v-f*g)-c*(l*v-u*g)+p*(l*f-u*d)),t[5]=r*(d*v-f*g)-c*(i*v-a*g)+p*(i*f-a*d),t[6]=-(r*(l*v-u*g)-o*(i*v-a*g)+p*(i*u-a*l)),t[7]=r*(l*f-u*d)-o*(i*f-a*d)+c*(i*u-a*l),t[8]=o*(h*v-f*m)-c*(s*v-u*m)+p*(s*f-u*h),t[9]=-(r*(h*v-f*m)-c*(n*v-a*m)+p*(n*f-a*h)),t[10]=r*(s*v-u*m)-o*(n*v-a*m)+p*(n*u-a*s),t[11]=-(r*(s*f-u*h)-o*(n*f-a*h)+c*(n*u-a*s)),t[12]=-(o*(h*g-d*m)-c*(s*g-l*m)+p*(s*d-l*h)),t[13]=r*(h*g-d*m)-c*(n*g-i*m)+p*(n*d-i*h),t[14]=-(r*(s*g-l*m)-o*(n*g-i*m)+p*(n*l-i*s)),t[15]=r*(s*d-l*h)-o*(n*d-i*h)+c*(n*l-i*s),t},d.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],v=e*o-r*a,_=e*s-n*a,w=e*l-i*a,y=r*s-n*o,b=r*l-i*o,x=n*l-i*s,M=u*p-c*f,E=u*m-h*f,z=u*g-d*f,A=c*m-h*p,T=c*g-d*p,S=h*g-d*m;return v*S-_*T+w*A+y*z-b*E+x*M},d.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],v=e[14],_=e[15],w=r[0],y=r[1],b=r[2],x=r[3];return t[0]=w*n+y*s+b*h+x*m,t[1]=w*i+y*l+b*d+x*g,t[2]=w*a+y*u+b*f+x*v,t[3]=w*o+y*c+b*p+x*_,w=r[4],y=r[5],b=r[6],x=r[7],t[4]=w*n+y*s+b*h+x*m,t[5]=w*i+y*l+b*d+x*g,t[6]=w*a+y*u+b*f+x*v,t[7]=w*o+y*c+b*p+x*_,w=r[8],y=r[9],b=r[10],x=r[11],t[8]=w*n+y*s+b*h+x*m,t[9]=w*i+y*l+b*d+x*g,t[10]=w*a+y*u+b*f+x*v,t[11]=w*o+y*c+b*p+x*_,w=r[12],y=r[13],b=r[14],x=r[15],t[12]=w*n+y*s+b*h+x*m,t[13]=w*i+y*l+b*d+x*g,t[14]=w*a+y*u+b*f+x*v,t[15]=w*o+y*c+b*p+x*_,t},d.mul=d.multiply,d.translate=function(t,e,r){var n,i,a,o,s,l,u,c,h,d,f,p,m=r[0],g=r[1],v=r[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=n*m+s*g+h*v+e[12],t[13]=i*m+l*g+d*v+e[13],t[14]=a*m+u*g+f*v+e[14],t[15]=o*m+c*g+p*v+e[15]),t},d.scale=function(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},d.rotate=function(t,r,n,i){var a,o,s,l,u,c,h,d,f,p,m,g,v,_,w,y,b,x,M,E,z,A,T,S,R=i[0],k=i[1],C=i[2],O=Math.sqrt(R*R+k*k+C*C);return Math.abs(O)<e?null:(O=1/O,R*=O,k*=O,C*=O,a=Math.sin(n),o=Math.cos(n),s=1-o,l=r[0],u=r[1],c=r[2],h=r[3],d=r[4],f=r[5],p=r[6],m=r[7],g=r[8],v=r[9],_=r[10],w=r[11],y=R*R*s+o,b=k*R*s+C*a,x=C*R*s-k*a,M=R*k*s-C*a,E=k*k*s+o,z=C*k*s+R*a,A=R*C*s+k*a,T=k*C*s-R*a,S=C*C*s+o,t[0]=l*y+d*b+g*x,t[1]=u*y+f*b+v*x,t[2]=c*y+p*b+_*x,t[3]=h*y+m*b+w*x,t[4]=l*M+d*E+g*z,t[5]=u*M+f*E+v*z,t[6]=c*M+p*E+_*z,t[7]=h*M+m*E+w*z,t[8]=l*A+d*T+g*S,t[9]=u*A+f*T+v*S,t[10]=c*A+p*T+_*S,t[11]=h*A+m*T+w*S,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},d.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+u*n,t[5]=o*i+c*n,t[6]=s*i+h*n,t[7]=l*i+d*n,t[8]=u*i-a*n,t[9]=c*i-o*n,t[10]=h*i-s*n,t[11]=d*i-l*n,t},d.rotateY=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-u*n,t[1]=o*i-c*n,t[2]=s*i-h*n,t[3]=l*i-d*n,t[8]=a*n+u*i,t[9]=o*n+c*i,t[10]=s*n+h*i,t[11]=l*n+d*i,t},d.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+u*n,t[1]=o*i+c*n,t[2]=s*i+h*n,t[3]=l*i+d*n,t[4]=u*i-a*n,t[5]=c*i-o*n,t[6]=h*i-s*n,t[7]=d*i-l*n,t},d.fromRotationTranslation=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,u=a+a,c=n*s,h=n*l,d=n*u,f=i*l,p=i*u,m=a*u,g=o*s,v=o*l,_=o*u;return t[0]=1-(f+m),t[1]=h+_,t[2]=d-v,t[3]=0,t[4]=h-_,t[5]=1-(c+m),t[6]=p+g,t[7]=0,t[8]=d+v,t[9]=p-g,t[10]=1-(c+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},d.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,h=n*s,d=i*o,f=i*s,p=i*l,m=a*o,g=a*s,v=a*l;return t[0]=1-h-p,t[1]=c+v,t[2]=d-g,t[3]=0,t[4]=c-v,t[5]=1-u-p,t[6]=f+m,t[7]=0,t[8]=d+g,t[9]=f-m,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},d.frustum=function(t,e,r,n,i,a,o){var s=1/(r-e),l=1/(i-n),u=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*l,t[10]=(o+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*u,t[15]=0,t},d.perspective=function(t,e,r,n,i){var a=1/Math.tan(e/2),o=1/(n-i);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*o,t[15]=0,t},d.ortho=function(t,e,r,n,i,a,o){var s=1/(e-r),l=1/(n-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(o+a)*u,t[15]=1,t},d.lookAt=function(t,r,n,i){var a,o,s,l,u,c,h,f,p,m,g=r[0],v=r[1],_=r[2],w=i[0],y=i[1],b=i[2],x=n[0],M=n[1],E=n[2];return Math.abs(g-x)<e&&Math.abs(v-M)<e&&Math.abs(_-E)<e?d.identity(t):(h=g-x,f=v-M,p=_-E,m=1/Math.sqrt(h*h+f*f+p*p),h*=m,f*=m,p*=m,a=y*p-b*f,o=b*h-w*p,s=w*f-y*h,m=Math.sqrt(a*a+o*o+s*s),m?(m=1/m,a*=m,o*=m,s*=m):(a=0,o=0,s=0),l=f*s-p*o,u=p*a-h*s,c=h*o-f*a,m=Math.sqrt(l*l+u*u+c*c),m?(m=1/m,l*=m,u*=m,c*=m):(l=0,u=0,c=0),t[0]=a,t[1]=l,t[2]=h,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=s,t[9]=c,t[10]=p,t[11]=0,t[12]=-(a*g+o*v+s*_),t[13]=-(l*g+u*v+c*_),t[14]=-(h*g+f*v+p*_),t[15]=1,t)},d.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},d.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=d);var f={};f.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},f.rotationTo=function(){var t=s.create(),e=s.fromValues(1,0,0),r=s.fromValues(0,1,0);return function(n,i,a){var o=s.dot(i,a);return-.999999>o?(s.cross(t,e,i),s.length(t)<1e-6&&s.cross(t,r,i),s.normalize(t,t),f.setAxisAngle(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(s.cross(t,i,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,f.normalize(n,n))}}(),f.setAxes=function(){var t=h.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],f.normalize(e,f.fromMat3(e,t))}}(),f.clone=l.clone,f.fromValues=l.fromValues,f.copy=l.copy,f.set=l.set,f.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},f.setAxisAngle=function(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t},f.add=l.add,f.multiply=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=n*c+o*s+i*u-a*l,t[1]=i*c+o*l+a*s-n*u,t[2]=a*c+o*u+n*l-i*s,t[3]=o*c-n*s-i*l-a*u,t},f.mul=f.multiply,f.scale=l.scale,f.rotateX=function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*s,t[1]=i*l+a*s,t[2]=a*l-i*s,t[3]=o*l-n*s,t},f.rotateY=function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l-a*s,t[1]=i*l+o*s,t[2]=a*l+n*s,t[3]=o*l-i*s,t},f.rotateZ=function(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*s,t[1]=i*l-n*s,t[2]=a*l+o*s,t[3]=o*l-a*s,t},f.calculateW=function(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},f.dot=l.dot,f.lerp=l.lerp,f.slerp=function(t,e,r,n){var i,a,o,s,l,u=e[0],c=e[1],h=e[2],d=e[3],f=r[0],p=r[1],m=r[2],g=r[3];return a=u*f+c*p+h*m+d*g,0>a&&(a=-a,f=-f,p=-p,m=-m,g=-g),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,l=Math.sin(n*i)/o):(s=1-n,l=n),t[0]=s*u+l*f,t[1]=s*c+l*p,t[2]=s*h+l*m,t[3]=s*d+l*g,t},f.invert=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s,t},f.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},f.length=l.length,f.len=f.length,f.squaredLength=l.squaredLength,f.sqrLen=f.squaredLength,f.normalize=l.normalize,f.fromMat3=function(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[7]-e[5])*r,t[1]=(e[2]-e[6])*r,t[2]=(e[3]-e[1])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*o+a]-e[3*a+o])*r,t[a]=(e[3*a+i]+e[3*i+a])*r,t[o]=(e[3*o+i]+e[3*i+o])*r}return t},f.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=f)}(e.exports)}(this),/**
@preserve

Curlify - A javascript webgl framework
<http://curlify.io>

(c) 2013-2015 Curlify LLC
*/
function(){console.log("initialize curlify",document.currentScript,document.currentScript.nodeParent),document.currentScript.curlify={modules:{},localVars:{},extract:function(obj,objId){var code=[];for(var i in obj)if(obj.hasOwnProperty(i))try{eval("var "+i),code.push("var "+i+"="+objId+'["'+i+'"]')}catch(t){}return code.join(";")},module:function(t,e){null!=this.modules[t]&&console.log("WARNING: overwriting module",t),null==e&&console.log("ERROR: setting null code as module '"+t+"'"),this.modules[t]=e},getModule:function(t){return this.modules[t]},clearModuleBuffersAndPrograms:function(){console.log("clearModuleBuffersAndPrograms()");for(var t in this.modules){var e=this.modules[t];console.log("checking",e.id),null!=e.default_program&&(console.log("clearing module program",e.id),e.default_program.glProgram=null),null!=e.buffer&&(console.log("clearing module buffer",e.id),e.buffer=null)}}},document.currentScript.curlify.localVars.sensors={acceleration:null,rotation:null,orientation:null},document.currentScript.curlify.localVars.zipfile=null,document.currentScript.curlify.localVars.layoutWidth=null,document.currentScript.curlify.localVars.layoutHeight=null,document.currentScript.curlify.localVars.layoutOffset={x:0,y:0},document.currentScript.curlify.localVars.layoutScale={x:1,y:1},document.currentScript.curlify.localVars.gl=null,document.currentScript.curlify.localVars.camera=null,document.currentScript.curlify.localVars.viewWidth=null,document.currentScript.curlify.localVars.viewHeight=null,document.currentScript.curlify.localVars.screenWidth=null,document.currentScript.curlify.localVars.screenHeight=null}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize glutils module");var t=function(t){window.console&&(window.console.error?window.console.error(t):window.console.log&&window.console.log(t))},e=function(e,r,n,i){var a=i||t,o=e.createShader(n);e.shaderSource(o,r),e.compileShader(o);var s=e.getShaderParameter(o,e.COMPILE_STATUS);return s?o:(lastError=e.getShaderInfoLog(o),a("*** Error compiling shader '"+o+"':"+lastError),e.deleteShader(o),null)};return{loadProgram:function(e,r,n,i){for(var a={},o=e.createProgram(),s=0;s<r.length;++s)e.attachShader(o,r[s]);e.linkProgram(o);var l=e.getProgramParameter(o,e.LINK_STATUS);if(!l)return lastError=e.getProgramInfoLog(o),t("Error in program linking:"+lastError),e.deleteProgram(o),null;if(n)for(var s=0;s<n.length;++s){var u=n[s]+"_handle";a[u]=e.getAttribLocation(o,n[s])}if(i)for(var s=0;s<i.length;++s){var u=i[s]+"_handle";a[u]=e.getUniformLocation(o,i[s])}return a.program=o,a},createShader:function(t,r,n,i){var a,o=r.text;if(!n)if("x-shader/x-vertex"==r.type)a=t.VERTEX_SHADER;else if("x-shader/x-fragment"==r.type)a=t.FRAGMENT_SHADER;else if(a!=t.VERTEX_SHADER&&a!=t.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return e(t,o,n?n:a,i)}}}();t.module("glutils",e)}(),function(){var t=document.currentScript.curlify,e=function(){return console.log("initialize sys module"),{timestamp:function(){return(new Date).getTime()},ismobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.ismobile.Android()||e.ismobile.BlackBerry()||e.ismobile.iOS()||e.ismobile.Opera()||e.ismobile.Windows()}}}}();t.module("sys",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize fps module");var e=t.getModule("sys"),r=0,n=0;return{updateFps:function(){if(100==r){r=0;var t=e.timestamp(),i=1e5/(t-n);console.log("FPS : "+i),n=t}r+=1}}}();t.module("fps",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize animator module");var r=t.getModule("sys"),n={time:!0,ease:!0,start:!0,onComplete:!0};return{new:function(){return{animations:[],animate:function(t,i){null==i.ease&&(i.ease=e.linear),null==i.start&&(i.start=0);var a={};for(var o in i){{i[o]}null==n[o]&&(null==t[o]?console.log("ERROR: Animated property cannot be initially nil : "+o):a[o]=t[o])}this.animations.push({target:t,start:r.timestamp()+i.start,deadline:r.timestamp()+i.start+i.time,config:i,init:a})},step:function(){var t=[],e=r.timestamp();for(var n in this.animations){var a=this.animations[n],o=(a.deadline,0);1==a.paused&&(e=a.pausetimestamp),e<a.deadline?o=1-(a.deadline-e)/a.config.time:e<a.start?o=0:(o=1,t.push(n)),o=Math.max(o,1e-5);for(var n in a.init)initial=a.init[n],a.target[n]=a.config.ease(initial,a.config[n],o)}for(i=t.length-1;i>=0;i--){var s=this.animations[t[i]].config.onComplete;this.animations.splice(t[i],1),null!=s&&s()}},pause:function(){for(var t in this.animations)this.animations[t].paused=!0,this.animations[t].pausetimestamp=r.timestamp()},resume:function(){for(var t in this.animations)this.animations[t].paused=!1,this.animations[t].deadline=this.animations[t].deadline+(r.timestamp()-self.animations[t].pausetimestamp)},stop:function(){for(var t in this.animations)this.animations[t].init={},this.animations[t].config.onComplete=null;this.animations=[]}}}}}();e.linear=function(t,e,r){return t+(e-t)*r},e.inQuad=function(t,e,r){return t+(e-t)*r*r},e.outQuad=function(t,e,r){return t+-(e-t)*r*(r-2)},e.inOutQuad=function(t,e,r){return.5>r?(r=2*r,t+(e-t)/2*r*r):(r=2*(r-.5),t-(e-t)/2*(r*(r-2)-1))},e.inCubic=function(t,e,r){return t+(e-t)*r*r*r},e.outCubic=function(t,e,r){return r-=1,t+(e-t)*(r*r*r+1)},e.inOutCubic=function(t,e,r){return.5>r?(r=2*r,t+(e-t)/2*r*r*r):(r=2*(r-.5)-1,t+(e-t)/2*(r*r*r+2))},e.inQuart=function(t,e,r){return t+(e-t)*r*r*r*r},e.outQuart=function(t,e,r){return r-=1,t-(e-t)*(r*r*r*r-1)},e.inOutQuart=function(t,e,r){return.5>r?(r=2*r,t+(e-t)/2*r*r*r*r):(r=2*(r-.5)-1,t-(e-t)/2*(r*r*r*r-2))},e.inSine=function(t,e,r){return t+(e-t)*(1-Math.cos(r*Math.pi/2))},e.outSine=function(t,e,r){return t+(e-t)*Math.sin(r*Math.pi/2)},e.inOutSine=function(t,e,r){return t-(e-t)/2*(Math.cos(Math.pi*r)-1)},e.inExpo=function(t,e,r){return r-=1,t+(e-t)*Math.pow(2,10*r)},e.outExpo=function(t,e,r){return t+(e-t)*(1-Math.pow(2,-10*r))},e.inOutExpo=function(t,e,r){return.5>r?(r=2*r-1,t+(e-t)/2*Math.pow(2,10*r)):(r=2*(r-.5),t+(e-t)/2*(2-Math.pow(2,-10*r)))},e.inCirc=function(t,e,r){return t+(e-t)*(1-Math.sqrt(1-r*r))},e.outCirc=function(t,e,r){return r-=1,t+(e-t)*Math.sqrt(1-r*r)},e.inOutCirc=function(t,e,r){return.5>r?(r=2*r,t+(e-t)/2*(1-Math.sqrt(1-r*r))):(r=2*(r-.5)-1,t+(e-t)/2*(1+Math.sqrt(1-r*r)))},e.inElastic=function(t,e,r){return r-=1,t-(e-t)*Math.pow(2,10*r)*Math.sin(6*(r-.0777777)*Math.pi)},e.outElastic=function(t,e,r){return t+(e-t)*(Math.pow(2,-10*r)*Math.sin(6*(r-.0777777)*Math.pi)+1)},t.module("animator",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize scene module");var e=t.getModule("animator"),r=[],n=[],i=e.new(),a=null;return{render:function(){if(i.step(),i.animations.length>0){var t=r[r.length-2];t.stepTree(),t.drawTree()}var e=r[r.length-1];if(null!=e){e.stepTree(),e.drawTree();for(var a=0;a<n.length;a++)!new function(){var t=n[a];t.renderFbo()};n=[]}},openScene:function(t,e,n){var a=r[r.length-1];r.push(t),null!=e&&i.animate(t,e),null!=a&&null!=n&&i.animate(a,n)},closeScene:function(t,e){var n=r[r.length-1],a=r[r.length-2];if(null!=t){var o=t.onComplete,s=function(){null!=o&&o(),r.splice(r.length-1,1),console.log("remove scene from stack",n.identifier,r.length)};t.onComplete=s,i.animate(n,t)}else r.splice(r.length-1,1);null!=a&&null!=e&&i.animate(a,e)},removeAllScenes:function(){r=[],n=[],i.stop(),a=null},isAnimating:function(){return i.animations.length>0?!0:!1},getPointerUser:function(){return a?a:r[r.length-1]},getpointerStealer:function(){return a},stealPointers:function(t){console.log("stealPointers",t);var e=a?a:r[r.length-1];a=t,e.resetpress()},resetPointerStealer:function(){a=null},addFboUpdate:function(t){n.push(t)}}}();t.module("scene",e)}(),function(){var curlify=document.currentScript.curlify,object=function(){console.log("initialize object module");var scene=curlify.getModule("scene"),animator=curlify.getModule("animator"),sys=curlify.getModule("sys");return{new:function(ident,width,height){return eval(curlify.extract(curlify.localVars,"curlify.localVars")),{identifier:null==ident?"object identifier":ident,position:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},size:{width:null==width?screenWidth:width,height:null==height?screenHeight:height},children:[],active:!0,visible:!0,alpha:1,blend:!0,drawbackside:!1,depthtest:!1,projectionMatrix:camera.projectionMatrix,viewMatrix:camera.viewMatrix,modelMatrix:mat4.create(),modelViewMatrix:mat4.create(),translateScale:camera.translateScale,identityMatrix:mat4.create(),anim:animator.new(),timervalue:0,lastdraw:0,laststep:0,add:function(t){return t.parent=this,this.children.push(t),t},updateModelMatrix:function(){var t=this.modelMatrix;if(mat4.copy(t,this.identityMatrix),0!=this.position.x||0!=this.position.y||0!=this.position.z){var e=screenWidth/(2*this.translateScale);mat4.translate(t,t,vec3.clone([this.position.x/e,-this.position.y/e,this.position.z/e]))}0!=this.rotate.z&&mat4.rotateZ(t,t,-this.rotate.z),0!=this.rotate.y&&mat4.rotateY(t,t,-this.rotate.y),0!=this.rotate.x&&mat4.rotateX(t,t,-this.rotate.x),(1!=this.scale.x||1!=this.scale.y||1!=this.scale.z)&&mat4.scale(t,t,vec3.clone([this.scale.x,this.scale.y,this.scale.z])),this.modelMatrix=t},update:function(){var t=this.viewMatrix;null!=this.parent&&null!=this.parent.modelViewMatrix&&(t=this.parent.modelViewMatrix),this.viewMatrix=t,this.updateModelMatrix(),this.children.length>0&&(mat4.copy(this.modelViewMatrix,this.viewMatrix),mat4.multiply(this.modelViewMatrix,this.modelViewMatrix,this.modelMatrix)),this.depthtest?gl.enable(gl.DEPTH_TEST):gl.disable(gl.DEPTH_TEST),0==this.blend?gl.disable(gl.BLEND):(gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)),1==this.drawbackside?gl.disable(gl.CULL_FACE):(gl.enable(gl.CULL_FACE),gl.cullFace(gl.FRONT))},stepTree:function(){var t=Math.max(1,Math.min(sys.timestamp()-this.laststep,60));this.laststep=sys.timestamp(),this.anim.step(),null!=this.preStep&&this.preStep(),null!=this.step&&this.step(t);for(var e=0;e<this.children.length;e++)this.children[e].stepTree();null!=this.postStep&&this.postStep()},drawTree:function(){Math.min(sys.timestamp()-this.lastdraw,60);if(this.lastdraw=sys.timestamp(),0!=this.visible){if(this.update(),null!=this.preDraw&&this.preDraw(),null!=this.draw&&this.draw(),this.reverseDrawOrder)for(var t=this.children.length-1;t>=0;t--)this.children[t].drawTree();else for(var t=0;t<this.children.length;t++)this.children[t].drawTree();null!=this.postDraw&&this.postDraw()}},press:function(t,e){var r=!1;if(null!=this.relativePress){var n=t-screenWidth/2-this.absolutex(),i=e-screenHeight/2-this.absolutey();r=this.relativePress(n,i)}null!=this.absolutePress&&(r=this.absolutePress(t,e));for(var a=this.children.length-1;a>=0;a--)this.children[a].active&&(r=this.children[a].press(t,e));return r},drag:function(t,e){var r=!1;if(null!=this.relativeDrag){var n=t-screenWidth/2-this.absolutex(),i=e-screenHeight/2-this.absolutey();r=this.relativeDrag(n,i)}null!=this.absoluteDrag&&(r=this.absoluteDrag(t,e));for(var a=this.children.length-1;a>=0;a--)this.children[a].active&&(r=this.children[a].drag(t,e));return r},release:function(t,e){var r=!1;if(null!=this.relativeRelease){var n=t-screenWidth/2-this.absolutex(),i=e-screenHeight/2-this.absolutey();r=this.relativeRelease(n,i)}null!=this.absoluteRelease&&(r=this.absoluteRelease(t,e));for(var a=this.children.length-1;a>=0;a--)this.children[a].active&&(r=this.children[a].release(t,e));return r},resetpress:function(){if(1==this.active){for(var t=this.children.length-1;t>=0;t--)this.children[t].resetpress();this!=scene.getpointerStealer()&&null!=this.pointerReset&&this.pointerReset()}},x:function(){return this.position.x},y:function(){return this.position.y},width:function(){return this.size.width*this.scale.x},height:function(){return this.size.height*this.scale.y},top:function(){return this.position.y-this.height()/2},bottom:function(){return this.position.y+this.height()/2},left:function(){return this.position.x-this.width()/2},right:function(){return this.position.x+this.width()/2},absolutex:function(){var t=0;return null!=this.parent&&(t=this.parent.absolutex()),t+this.x()},absolutey:function(){var t=0;return null!=this.parent&&(t=this.parent.absolutey()),t+this.y()},absolutescalex:function(){var t=1;return null!=this.parent&&(t=this.parent.absolutescalex()),t*this.scale.x},absolutescaley:function(){var t=1;return null!=this.parent&&(t=this.parent.absolutescaley()),t*this.scale.y},absolutealpha:function(){var t=1;return null!=this.parent&&(t=this.parent.absolutealpha()),t*this.alpha},activate:function(){this.active=!0,null!=this.postActivate&&this.postActivate()},deactivate:function(){this.active=!1,null!=this.postDeactivate&&this.postDeactivate()}}}}}();curlify.module("object",object)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize quad module");var r=t.getModule("glutils"),n=t.getModule("object");return{buffer:null,default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var e={text:"              attribute vec2 a_position;              attribute vec2 a_tex_coordinate;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            varying vec2 v_tex_coord;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);                v_tex_coord = a_tex_coordinate;              }            ",type:"x-shader/x-vertex"},n={text:"              precision mediump float;                            varying vec2      v_tex_coord;                            uniform sampler2D u_texture;              uniform float     u_alpha;                            void main() {                vec4 color = texture2D(u_texture, v_tex_coord);                gl_FragColor = color * u_alpha;              }            ",type:"x-shader/x-fragment"},i=t.localVars.gl,a=r.createShader(i,e),o=r.createShader(i,n);this.glProgram=r.loadProgram(i,[a,o],["a_position","a_tex_coordinate"],["u_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(r,i,a){var o=t.localVars.gl,s=t.localVars.screenWidth;null==this.buffer&&(this.buffer=o.createBuffer(),this.buffer.itemSize=2,this.buffer.numItems=4,o.bindBuffer(o.ARRAY_BUFFER,this.buffer),vertices=[-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1],o.bufferData(o.ARRAY_BUFFER,new Float32Array(vertices),o.STATIC_DRAW));var l=n.new(r,i,a);return l.glProgram=this.default_program.getProgram(),l.quadModelMatrix=mat4.create(),l.updateModelMatrix=function(){var t=this.modelMatrix;if(mat4.copy(t,this.identityMatrix),0!=this.position.x||0!=this.position.y||0!=this.position.z){var e=s/(2*this.translateScale);mat4.translate(t,t,[this.position.x/e,-this.position.y/e,this.position.z/e])}0!=this.rotate.z&&mat4.rotateZ(t,t,-this.rotate.z),0!=this.rotate.y&&mat4.rotateY(t,t,-this.rotate.y),0!=this.rotate.x&&mat4.rotateX(t,t,-this.rotate.x),(1!=this.scale.x||1!=this.scale.y||1!=this.scale.z)&&mat4.scale(t,t,[this.scale.x,this.scale.y,this.scale.z]),this.modelMatrix=t,mat4.copy(this.quadModelMatrix,this.modelMatrix);var r=s/this.translateScale;mat4.scale(this.quadModelMatrix,this.quadModelMatrix,[this.size.width/r,-this.size.height/r,1])},l.draw=function(){if(null!=l.texture){o.useProgram(this.glProgram.program),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,l.texture),o.uniform1i(this.glProgram.u_texture_handle,0),o.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),o.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),o.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),o.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:e.buffer;o.bindBuffer(o.ARRAY_BUFFER,t),o.enableVertexAttribArray(this.glProgram.a_position_handle),o.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),o.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,o.FLOAT,!1,16,0),o.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,t.itemSize,o.FLOAT,!1,16,8),o.drawArrays(o.TRIANGLE_STRIP,0,t.numItems)}},l}}}();t.module("quad",e)}(),function(){var t=document.currentScript.curlify,e=t.getModule("object"),r=t.getModule("quad"),n=function(){return console.log("initialize plane module"),{new:function(n,i,a,o,s){for(var l=t.localVars.gl,u=t.localVars.screenWidth,c=(t.localVars.screenHeight,e.new(n,o,s)),h=i+1,d=a+1,f=c.size.height/c.size.width,p=[],m=0;d>m;m++)for(var g=(-1+2*m/a)*f,v=m/a,_=0;h>_;_++){var w=-1+2*_/i,y=_/i;p.push(w,g,y,v)}c.buffer=l.createBuffer(),c.buffer.itemSize=2,c.buffer.numItems=4,l.bindBuffer(l.ARRAY_BUFFER,c.buffer),l.bufferData(l.ARRAY_BUFFER,new Float32Array(p),l.STATIC_DRAW);for(var b=[],x=0,M=0;a>M;M++)for(var E=0;i>E;E++)b.push(M*h+E),b.push(M*h+E+1),b.push((M+1)*h+E),b.push(M*h+E+1),b.push((M+1)*h+E+1),b.push((M+1)*h+E),x+=6;return c.indices=l.createBuffer(),c.indices.indexCount=b.length,l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,c.indices),l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(b),l.STATIC_DRAW),c.glProgram=r.default_program.getProgram(),c.quadModelMatrix=mat4.create(),c.updateModelMatrix=function(){var t=this.modelMatrix;if(mat4.copy(t,this.identityMatrix),0!=this.position.x||0!=this.position.y||0!=this.position.z){var e=u/(2*this.translateScale);mat4.translate(t,t,[this.position.x/e,-this.position.y/e,this.position.z/e])}0!=this.rotate.z&&mat4.rotateZ(t,t,-this.rotate.z),0!=this.rotate.y&&mat4.rotateY(t,t,-this.rotate.y),0!=this.rotate.x&&mat4.rotateX(t,t,-this.rotate.x),(1!=this.scale.x||1!=this.scale.y||1!=this.scale.z)&&mat4.scale(t,t,[this.scale.x,this.scale.y,this.scale.z]),this.modelMatrix=t,mat4.copy(this.quadModelMatrix,this.modelMatrix);var r=u/this.translateScale;mat4.scale(this.quadModelMatrix,this.quadModelMatrix,[this.size.width/r,-this.size.height/r*1/f,1])},c.draw=function(){null!=c.texture&&(l.useProgram(this.glProgram.program),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.texture),l.uniform1i(this.glProgram.u_texture_handle,0),l.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),l.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),l.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),l.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix),l.bindBuffer(l.ARRAY_BUFFER,this.buffer),l.enableVertexAttribArray(this.glProgram.a_position_handle),l.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),l.vertexAttribPointer(this.glProgram.a_position_handle,this.buffer.itemSize,l.FLOAT,!1,16,0),l.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,this.buffer.itemSize,l.FLOAT,!1,16,8),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.indices),l.drawElements(l.TRIANGLES,this.indices.indexCount,l.UNSIGNED_SHORT,0))},c}}}();t.module("plane",n)}(),function(){var t=document.currentScript.curlify,e=function(){var e=t.getModule("quad");return{new:function(t,r,n){var i=e.new(t,r,n);return i.focused=!1,i.hit=function(t,e){return t<-this.width()/2||t>this.width()/2||e<-this.height()/2||e>this.height()/2?!1:!0},i.relativePress=function(t,e){return this.hit(t,e)?(null!=this.focus&&this.focus(t,e),this.focused=!0,!0):!1},i.relativeDrag=function(t,e){return 1!=this.focused?!1:(1!=this.hit(t,e)?(null!=this.defocus&&this.defocus(t,e),this.focused=!1):null!=this.focusdrag&&this.focusdrag(t,e),!0)},i.relativeRelease=function(t,e){return 1!=this.focused?!1:(null!=this.click&&this.click(t,e),null!=this.defocus&&this.defocus(t,e),this.focused=!1,!0)},i.pointerReset=function(){null!=this.defocus&&this.defocus(0,0),this.focused=!1},i}}}();t.module("focusable",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize rectangle module");var e=t.getModule("glutils"),r=t.getModule("quad");return{default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"              attribute vec2 a_position;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);              }",type:"x-shader/x-vertex"},n={text:"              precision mediump float;                            uniform float     u_red;              uniform float     u_green;              uniform float     u_blue;              uniform float     u_alpha;                            void main() {                gl_FragColor = vec4( u_red, u_green, u_blue, 1.0 ) * u_alpha;              }",type:"x-shader/x-fragment"},i=t.localVars.gl,a=e.createShader(i,r),o=e.createShader(i,n);this.glProgram=e.loadProgram(i,[a,o],["a_position"],["u_red","u_green","u_blue","u_alpha","u_model","u_view","u_projection"])}},new:function(e,n,i){var a=t.localVars.gl,o=r.new("rectangle",e,n);return o.glProgram=this.default_program.getProgram(),o.color=null==i?{red:0,green:0,blue:0}:i,o.draw=function(){a.useProgram(this.glProgram.program),a.uniform1f(this.glProgram.u_red_handle,this.color.red),a.uniform1f(this.glProgram.u_green_handle,this.color.green),a.uniform1f(this.glProgram.u_blue_handle,this.color.blue),a.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),a.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),a.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),a.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:r.buffer;a.bindBuffer(a.ARRAY_BUFFER,t),a.enableVertexAttribArray(this.glProgram.a_position_handle),a.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,a.FLOAT,!1,16,0),a.drawArrays(a.TRIANGLE_STRIP,0,t.numItems)},o}}}();t.module("rectangle",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize image module");var r=t.getModule("quad");return{loadImage:function(e){var r=t.localVars.zipfile,n=null;if("string"!=typeof e)return console.log("ERROR: image.loadImage source is not of type string",e),null;if(n=new Image,null!=r){var i=r.file(e);console.log("image.source zip",i,e,r),n.src="data:image/jpg;base64,"+JSZip.base64.encode(i.asBinary())}else n.crossOrigin="anonymous",n.src=e;return n},new:function(n,i){var a=t.localVars.gl,o=i?i:r.new("image : "+n);return o.size.width=null,o.size.height=null,n instanceof HTMLElement?(o.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,o.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,n),null==o.size.width&&(o.size.width=n.width),null==o.size.height&&(o.size.height=n.height),o.loaded=!0,null!=o.onload&&o.onload()):n instanceof Object?null!=n.texture||null!=n.size?(o.texture=n.texture,o.image=n.image,null==o.size.width&&(o.size.width=n.size.width),null==o.size.height&&(o.size.height=n.size.height),o.loaded=!0,null!=o.onload&&o.onload()):console.log("ERROR: image.new from unknown Object",n):"string"==typeof n?(o.image=e.loadImage(n),o.image.onload=function(){return null==e?void console.log("image == null!"):(o.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,o.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,o.image),null==o.size.width&&(o.size.width=o.image.width),null==o.size.height&&(o.size.height=o.image.height),o.loaded=!0,void(null!=o.onload&&o.onload()))},o.image.onerror=function(){console.log("texture load failed",n)}):console.log("ERROR: image.new from unknown object",n),o}}}();t.module("image",e)}(),function(){var t=document.currentScript.curlify,e=t.getModule("glutils"),r=t.getModule("image"),n=t.getModule("quad"),i=function(){return console.log("initialize masked_image module"),{default_program:{program:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"            attribute vec2 a_position;             attribute vec2 a_tex_coordinate;                         uniform mat4 u_projection;             uniform mat4 u_view;             uniform mat4 u_model;                         varying vec2 v_tex_coord;                         void main() {               gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);               v_tex_coord = a_tex_coordinate;             }             ",type:"x-shader/x-vertex"},n={text:"            precision mediump float;                         varying vec2      v_tex_coord;                         uniform sampler2D u_texture;             uniform sampler2D u_mask_texture;             uniform float     u_alpha;                         void main() {                             vec4 color = texture2D(u_texture, v_tex_coord);               vec4 mask_color = texture2D(u_mask_texture, v_tex_coord);                             gl_FragColor = color * mask_color.a * u_alpha;             }             ",type:"x-shader/x-fragment"},i=t.localVars.gl,a=e.createShader(i,r),o=e.createShader(i,n);this.glProgram=e.loadProgram(i,[a,o],["a_position","a_tex_coordinate"],["u_texture","u_mask_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,i){var a=t.localVars.gl,o=r.new(e);return o.identifier="masked_image : "+e+" : "+i,console.log(o.identifier),o.mask=i,o.glProgram=this.default_program.getProgram(),o.draw=function(){if(1==o.loaded){a.useProgram(this.glProgram.program),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o.texture),a.uniform1i(this.glProgram.u_texture_handle,0),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,o.mask.texture),a.uniform1i(this.glProgram.u_mask_texture_handle,1),a.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),a.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),a.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),a.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:n.buffer;a.bindBuffer(a.ARRAY_BUFFER,t),a.enableVertexAttribArray(this.glProgram.a_position_handle),a.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),a.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,a.FLOAT,!1,16,0),a.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,t.itemSize,a.FLOAT,!1,16,8),a.drawArrays(a.TRIANGLE_STRIP,0,t.numItems)}},o}}}();t.module("masked_image",i)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize fbo_object module");var e=t.getModule("glutils"),r=t.getModule("scene"),n=t.getModule("quad"),i=t.getModule("sys");return{default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"              attribute vec2 a_position;              attribute vec2 a_tex_coordinate;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            varying vec2 v_tex_coord;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);                v_tex_coord = vec2(a_tex_coordinate.x,1.0-a_tex_coordinate.y);              }              ",type:"x-shader/x-vertex"},n={text:"              precision mediump float;                            varying vec2      v_tex_coord;                            uniform sampler2D u_texture;              uniform float     u_alpha;                            void main() {                vec4 color = texture2D(u_texture, v_tex_coord);                gl_FragColor = color * u_alpha;              }            ",type:"x-shader/x-fragment"},i=t.localVars.gl,a=e.createShader(i,r),o=e.createShader(i,n);this.glProgram=e.loadProgram(i,[a,o],["a_position","a_tex_coordinate"],["u_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,a,o,s){var l=t.localVars.gl,u=n.new("fbo_object : "+e,a,o);u.glProgram=this.default_program.getProgram(),console.log("fbo_object.new(",u.dentifier,u.size.width,u.size.height,t.localVars.screenWidth,t.localVars.screenHeight,")"),u.dobypassFbo=!1,u.lastUpdated=-99999,u.updateInterval=0,u.framebuffer=l.createFramebuffer(),u.framebuffer.width=u.size.width,u.framebuffer.height=u.size.height,l.bindFramebuffer(l.FRAMEBUFFER,u.framebuffer),u.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,u.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR);var c=s?l.RGB:l.RGBA;return l.texImage2D(l.TEXTURE_2D,0,c,u.framebuffer.width,u.framebuffer.height,0,c,l.UNSIGNED_BYTE,null),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,u.texture,0),l.bindTexture(l.TEXTURE_2D,null),l.bindFramebuffer(l.FRAMEBUFFER,null),u.preStep=function(){var t=i.timestamp()-this.lastUpdated;this.fboUpdatesDisabled||this.dobypassFbo||t>=this.updateInterval&&u.updateFbo()},u.updateFbo=function(){r.addFboUpdate(u)},u.renderFbo=function(){l.bindTexture(l.TEXTURE_2D,null);var e=l.getParameter(l.FRAMEBUFFER_BINDING),r=t.localVars.screenWidth,n=t.localVars.screenHeight,a=t.localVars.layoutWidth,o=t.localVars.layoutHeight,s={x:t.localVars.layoutOffset.x,y:t.localVars.layoutOffset.y};l.viewport(0,0,u.size.width,u.size.height),l.bindFramebuffer(l.FRAMEBUFFER,u.framebuffer),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),t.localVars.screenWidth=u.size.width,t.localVars.screenHeight=u.size.height,t.localVars.layoutWidth=u.size.width,t.localVars.layoutHeight=u.size.height,t.localVars.layoutOffset={x:0,y:0},screenWidth=t.localVars.screenWidth,screenHeight=t.localVars.screenHeight,layoutWidth=t.localVars.layoutWidth,layoutHeight=t.localVars.layoutHeight,layoutOffset=t.localVars.layoutOffset;for(var c=0;c<u.children.length;c++)u.children[c].parent=null,u.children[c].viewMatrix=t.localVars.camera.viewMatrix,u.children[c].drawTree();t.localVars.screenWidth=r,t.localVars.screenHeight=n,t.localVars.layoutWidth=a,t.localVars.layoutHeight=o,t.localVars.layoutOffset=s,screenWidth=t.localVars.screenWidth,screenHeight=t.localVars.screenHeight,layoutWidth=t.localVars.layoutWidth,layoutHeight=t.localVars.layoutHeight,layoutOffset=t.localVars.layoutOffset,l.viewport(t.localVars.layoutOffset.x,t.localVars.layoutOffset.y,t.localVars.layoutWidth,t.localVars.layoutHeight),l.bindFramebuffer(l.FRAMEBUFFER,e),u.lastUpdated=i.timestamp()},u.drawTree=function(){Math.min(i.timestamp()-this.lastdraw,60);if(this.lastdraw=i.timestamp(),0!=this.visible){if(this.update(),this.dobypassFbo)for(var t=0;t<this.children.length;t++)this.children[t].parent=this,this.children[t].viewMatrix=this.modelViewMatrix,this.children[t].drawTree();else null!=this.draw&&this.draw();null!=this.postDraw&&this.postDraw()}},u.draw=function(){l.useProgram(this.glProgram.program),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.texture),l.uniform1i(this.glProgram.u_texture_handle,0),l.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),l.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),l.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),l.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);
var t=this.buffer?this.buffer:n.buffer;l.bindBuffer(l.ARRAY_BUFFER,t),l.enableVertexAttribArray(this.glProgram.a_position_handle),l.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),l.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,l.FLOAT,!1,16,0),l.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,t.itemSize,l.FLOAT,!1,16,8),l.drawArrays(l.TRIANGLE_STRIP,0,t.numItems)},u}}}();t.module("fbo_object",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize button module");{var e=t.getModule("image");t.getModule("focusable")}return{new:function(t){var r=e.new(t);return r.focused=!1,r.identifier="button : "+t,r.hit=function(t,e){return t<-this.width()/2||t>this.width()/2||e<-this.height()/2||e>this.height()/2?!1:!0},r.relativePress=function(t,e){return this.hit(t,e)?(null!=this.focus&&this.focus(t,e),this.focused=!0,!0):!1},r.relativeDrag=function(t,e){return 1!=this.focused?!1:(1!=this.hit(t,e)?(null!=this.defocus&&this.defocus(t,e),this.focused=!1):null!=this.focusdrag&&this.focusdrag(t,e),!0)},r.relativeRelease=function(t,e){return 1!=this.focused?!1:(null!=this.click&&this.click(t,e),null!=this.defocus&&this.defocus(t,e),this.focused=!1,!0)},r.pointerReset=function(){null!=this.defocus&&this.defocus(0,0),this.focused=!1},r}}}();t.module("button",e)}(),function(){var t=document.currentScript.curlify,e=t.getModule("object"),r=t.getModule("focusable"),n=t.getModule("image"),i=function(t,e,i,a,o){i=i?i:t.frames.length,a=a?a:0;for(var s=o?o:r.new("spritesheet "+t.name),l=a;a+i>l;l++){var u=s.add(n.new(t.frames[l]));u.visible=!1,u.active=!1}return s.size.width=t.spritewidth,s.size.height=t.spriteheight,s.frame=s.children[0],s.frametimervalue=0,s.frametime=35,s.restart=function(t){s.frametimervalue=0;var r=s.restart;0==e&&(r=null);var n=s.loopdelay&&!t?s.loopdelay:0;s.anim.animate(s,{frametimervalue:s.children.length,start:n,time:s.frametime*s.children.length,onComplete:r})},s.preStep=function(){s.frame.visible=!1;var t=Math.floor(s.frametimervalue);t>s.children.length-1||(s.frame=s.children[t],s.frame.visible=!0)},s.start=function(){return s.anim.animations.length>0&&s.anim.animations[0].paused?void s.anim.resume():void s.restart()},s.stop=function(){s.anim.pause()},s.unload=function(){s.anim.stop()},0!=e&&s.restart(!0),s},a=function(){return{newSheet:function(t,e,r){var i={spritewidth:0,spriteheight:0,frames:[]};if(t instanceof Array){var a=e,o=r,s=document.createElement("canvas");s.width=a,s.height=o;for(var l=s.getContext("2d"),u=0,c=0;c<t.length;c++)!new function(){var e=n.loadImage(t[c]);e.onload=function(){l.drawImage(e,0,0),i.frames.push(n.new(s)),l.clearRect(0,0,s.width,s.height),u+=1,u==t.length&&null!=i.onload&&i.onload()}};i.spritewidth=a,i.spriteheight=o,i.name="array "+t.length}else{var h=n.loadImage(t);h.onload=function(){var a=h.width/e,o=h.height/r,s=document.createElement("canvas");s.width=a,s.height=o;for(var l=s.getContext("2d"),u=0;r>u;u++)for(var c=0;e>c;c++)l.drawImage(h,-c*a,-u*o),i.frames.push(n.new(s)),l.clearRect(0,0,s.width,s.height);i.spritewidth=a,i.spriteheight=o,i.name=t,null!=i.onload&&i.onload()}}return i},newFromSheet:function(t,e,r,n,a){return i(t,e,r,n,a)},new:function(t,r,n,a,o,s){var l=this.newSheet(t,r,n),u=e.new("sprite loader");return u.sheet=l,l.onload=function(){i(l,a,o,s,u),null!=u.onload&&u.onload()},u}}}();t.module("sprite",a)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize carousel module");var e=t.getModule("object"),r=t.getModule("focusable"),n=t.getModule("animator"),i=t.getModule("scene"),a=t.getModule("sys");return{new:function(o,s,l){var u=t.localVars.screenWidth,c=t.localVars.screenHeight,h=r.new(o,s,l),d={name:"coverflow",show:[],hide:[]};d.show.push({target:"position.x",startposition:1*u,endposition:0,func:n.linear}),d.show.push({target:"rotate.y",startposition:.8*Math.PI,endposition:0,func:n.linear}),d.show.push({target:"scale.x",startposition:.6,endposition:1,func:n.linear}),d.show.push({target:"scale.y",startposition:.6,endposition:1,func:n.linear}),d.hide.push({target:"position.x",startposition:0,endposition:1*-u,func:n.linear}),d.hide.push({target:"rotate.y",startposition:0,endposition:.8*-Math.PI,func:n.linear}),d.hide.push({target:"scale.x",startposition:1,endposition:.6,func:n.linear}),d.hide.push({target:"scale.y",startposition:1,endposition:.6,func:n.linear}),h.contentsize={width:h.size.width,height:h.size.height},h.inertia=5,h.swipespeed=u,h.movespeed=1,h.movethreshold=60,h.itemsize=u,h.transition=d,h.unload_distance=1,h.wrap=!1,h.bounceOnWrap=!1,h.alwaysmove=!1,h.nevermove=!1,h.selecteditem=1,h.moveToSelectedItem=!0;var f=h.add(e.new("carousel"));f.targetposition={x:0,y:0,z:0},f.pressOffset={x:0,y:0};var p=h.add(e.new("item container"));p.targetposition={x:0,y:0,z:0},h.instance=f,h.itemcontainer=p;var m=function(t,e,r){r>100&&(r=100);var n=1;t>e&&(n=-1);var i=-n*r/(16.66*h.inertia)*Math.abs(t-e);return Math.abs(i)<1e-4?t=e:t-=i,1==n&&t>e&&(t=e),-1==n&&e>t&&(t=e),t};return f.setMoving=function(t,e){null==i.getpointerStealer()&&1!=h.nevermove&&(i.stealPointers(h),null!=h.stolePointers&&h.stolePointers(t,e),f.moving=!0)},h.focus=function(t,e){f.moving&&(f.moving=!1,f.targetposition.x=f.position.x,f.targetposition.y=f.position.y),f.pressOffset={x:f.targetposition.x-t*h.movespeed/u*2,y:f.targetposition.y-e*h.movespeed},h.pressStarted={x:t,y:e}},h.focusdrag=function(t,e){var r=f.pressOffset.x+t*h.movespeed/u*2,n=f.pressOffset.y+e*h.movespeed/c*2,i=h.pressStarted.x-t,a=h.pressStarted.y-e;(h.alwaysmove||h.contentsize.width!=h.size.width)&&Math.abs(i)>h.movethreshold&&f.setMoving(i,a),f.moving&&(f.targetposition.x=r,f.targetposition.y=n)},h.defocus=function(){var t=Math.floor(-f.targetposition.x+.5);h.moveToSelectedItem&&(f.targetposition.x=-t),h.selecteditem=t,h.selecteditem<0&&(h.selecteditem=h.wrap?p.children.length+t:0),h.selecteditem>p.children.length-1&&(h.selecteditem=h.wrap?t-p.children.length:p.children.length-1),h.selecteditem=h.selecteditem+1,null!=h.carouselmoved&&h.carouselmoved(h.selecteditem)},h.postDraw=function(){if(h.wrap)for(var t=0;t<p.children.length;t++){var e=p.children[t],r=e.active,n=e.visible,i=e.itemposition;e.itemposition=i+p.children.length,e.stepTree(),e.drawTree(),e.itemposition=i-p.children.length,e.stepTree(),e.drawTree(),e.itemposition=i,e.step(0),e.visible=n,e.active=r}},h.selected=function(){return h.selecteditem},h.getItem=function(t){return p.children[t-1]},h.moveto=function(t,e){f.targetposition.x=-t,e&&(f.position.x=f.targetposition.x),h.selecteditem=t,null!=h.carouselmoved&&h.carouselmoved(t+1)},h.step=function(t){var e=-p.children.length+1,r=-p.children.length+1,n=.75,i=.75;0==h.wrap||h.bounceOnWrap&&f.position.x>e-n&&f.position.x<n?(h.bounceOnWrap&&(n=2*n,i=2*i),f.targetposition.x>n&&(f.targetposition.x=n),f.targetposition.y>i&&(f.targetposition.y=i),f.targetposition.x<e-n&&(f.targetposition.x=e-n),f.targetposition.y<r-i&&(f.targetposition.y=r-i),0==h.focused&&(f.targetposition.x>0&&(f.targetposition.x=m(f.targetposition.x,0,t/2)),f.targetposition.y>0&&(f.targetposition.y=m(f.targetposition.y,0,t/2)),f.targetposition.x<e&&(f.targetposition.x=m(f.targetposition.x,e,t/2)),f.targetposition.y<r&&(f.targetposition.y=m(f.targetposition.y,r,t/2)))):f.targetposition.x>1?(console.log("switch",f.position.x,f.targetposition.x,h.contentsize.width),f.targetposition.x=f.targetposition.x-p.children.length,f.position.x=f.position.x-p.children.length,f.pressOffset.x=f.pressOffset.x-p.children.length):f.targetposition.x<-p.children.length&&(console.log("+++switch2",f.position.x,f.targetposition.x),f.targetposition.x=f.targetposition.x+p.children.length,f.position.x=f.position.x+p.children.length,f.pressOffset.x=f.pressOffset.x+p.children.length);var a=t;a>100&&(a=1),0==h.focused&&(a=t/2),(h.alwaysmove||h.contentsize.width!=h.size.width)&&(f.position.x=m(f.position.x,f.targetposition.x,a)),(h.alwaysmove||h.contentsize.height!=h.size.height)&&(f.position.y=m(f.position.y,f.targetposition.y,a)),0==h.focused&&f.position.x==f.targetposition.x&&f.position.y==f.targetposition.y&&(f.moving=!1),f.moving},h.getDistance=function(){var t=(f.position.x*h.itemsize+this.itemposition*h.itemsize)/u;return t},h.setContentSize=function(){h.contentsize.width=h.itemsize*p.children.length},h.add=function(t,e){var e=p.children.length,n=r.new("carousel item container");return n.add(t),n.parent=p,p.children.push(n),p.drawTree=function(){function t(t,e){return Math.abs(t.dist)>Math.abs(e.dist)?-1:1}Math.min(a.timestamp()-this.lastdraw,60);if(this.lastdraw=a.timestamp(),0!=this.visible){if(this.update(),null!=this.preDraw&&this.preDraw(),null!=this.draw&&this.draw(),h.transition.order_draw){for(var e=[],r=0;r<this.children.length;r++)e.push(this.children[r]);e.sort(t);for(var r=0;r<e.length;r++)e[r].drawTree()}else if(this.reverseDrawOrder)for(var r=this.children.length-1;r>=0;r--)this.children[r].drawTree();else for(var r=0;r<this.children.length;r++)this.children[r].drawTree();null!=this.postDraw&&this.postDraw()}},t.carouselobject=n,n.index=e,n.child=t,n.itemposition=e,n.getDistance=h.getDistance,n.step=function(){var t=this.getDistance();if(this.dist=t,t<=-h.unload_distance||t>=h.unload_distance?null!=this.unload_content&&null!=this.content&&this.unload_content():null!=this.load_content&&null==this.content&&this.load_content(),this.active=!0,Math.abs(t)>.2&&(this.active=!1),this.visible=!0,Math.abs(t)>1&&(this.visible=!1),!(this.distance==t||Math.abs(t)>2)){this.distance=t;var e=h.transition;if(p.reverseDrawOrder=e.reverse_draw?!0:!1,t>=0)for(var r=0;r<e.show.length;r++){var n=e.show[r];"position.x"==n.target?this.position.x=n.func(n.startposition,n.endposition,Math.abs(1-t)):"position.y"==n.target?this.position.y=n.func(n.startposition,n.endposition,Math.abs(1-t)):"position.z"==n.target?this.position.z=n.func(n.startposition,n.endposition,Math.abs(1-t)):"scale.x"==n.target?this.scale.x=n.func(n.startposition,n.endposition,Math.abs(1-t)):"scale.y"==n.target?this.scale.y=n.func(n.startposition,n.endposition,Math.abs(1-t)):"rotate.x"==n.target?this.rotate.x=n.func(n.startposition,n.endposition,Math.abs(1-t)):"rotate.y"==n.target?this.rotate.y=n.func(n.startposition,n.endposition,Math.abs(1-t)):"rotate.z"==n.target?this.rotate.z=n.func(n.startposition,n.endposition,Math.abs(1-t)):"alpha"==n.target?this.alpha=n.func(n.startposition,n.endposition,Math.abs(1-t)):"transition_value"==n.target&&(this.transition_value=n.func(n.startposition,n.endposition,Math.abs(1-t)))}else for(var r=0;r<e.hide.length;r++){var i=e.hide[r];"position.x"==i.target?this.position.x=i.func(i.startposition,i.endposition,Math.abs(t)):"position.y"==i.target?this.position.y=i.func(i.startposition,i.endposition,Math.abs(t)):"position.z"==i.target?this.position.z=i.func(i.startposition,i.endposition,Math.abs(t)):"scale.x"==i.target?this.scale.x=i.func(i.startposition,i.endposition,Math.abs(t)):"scale.y"==i.target?this.scale.y=i.func(i.startposition,i.endposition,Math.abs(t)):"rotate.x"==i.target?this.rotate.x=i.func(i.startposition,i.endposition,Math.abs(t)):"rotate.y"==i.target?this.rotate.y=i.func(i.startposition,i.endposition,Math.abs(t)):"rotate.z"==i.target?this.rotate.z=i.func(i.startposition,i.endposition,Math.abs(t)):"alpha"==i.target?this.alpha=i.func(i.startposition,i.endposition,Math.abs(t)):"transition_value"==i.target&&(this.transition_value=i.func(i.startposition,i.endposition,Math.abs(t)))}}},p.itemaddposition=p.itemaddposition+1,h.setContentSize(),n},h}}}();t.module("carousel",e)}(),function(){var t=document.currentScript.curlify,e=t.getModule("animator"),r=t.getModule("carousel"),n=function(){return{new:function(n,i,a){var o=t.localVars.screenWidth,s=t.localVars.screenHeight,l={name:"move in",show:[],hide:[]};l.show.push({target:"position.y",startposition:s,endposition:0,func:e.outQuad}),l.show.push({target:"alpha",startposition:0,endposition:1,func:e.outExpo}),l.hide.push({target:"position.y",startposition:0,endposition:0,func:e.linear}),l.hide.push({target:"alpha",startposition:1,endposition:0,func:e.inExpo});var u=r.new(n,i,a);return u.itemsize=s,u.transition=l,u.getDistance=function(){var t=(u.instance.position.y*u.itemsize+this.itemposition*u.itemsize)/s;return t},u.setContentSize=function(){u.contentsize.height=u.itemsize*u.itemcontainer.children.length},u.focus=function(t,e){u.instance.moving&&(u.instance.moving=!1,u.instance.targetposition.x=u.instance.position.x,u.instance.targetposition.y=u.instance.position.y),u.instance.pressOffset={x:u.instance.targetposition.x-t*u.movespeed/o*2,y:u.instance.targetposition.y-e*u.movespeed/s*2},u.pressStarted={x:t,y:e}},u.focusdrag=function(t,e){var r=u.instance.pressOffset.x+t*u.movespeed/o*2,n=u.instance.pressOffset.y+e*u.movespeed/s*2,i=u.pressStarted.x-t,a=u.pressStarted.y-e;(u.alwaysmove||u.contentsize.height!=u.size.height)&&Math.abs(a)>u.movethreshold&&u.instance.setMoving(i,a),u.instance.moving&&(u.instance.targetposition.x=r,u.instance.targetposition.y=n)},u.defocus=function(){var t=Math.floor(-u.instance.targetposition.y+.5);u.moveToSelectedItem&&(u.instance.targetposition.y=-t),u.selecteditem=t,u.selecteditem<0&&(u.selecteditem=u.wrap?u.itemcontainer.children.length+t:0),u.selecteditem>u.itemcontainer.children.length-1&&(u.selecteditem=u.wrap?t-u.itemcontainer.children.length:u.itemcontainer.children.length-1),u.selecteditem=u.selecteditem+1,null!=u.carouselmoved&&u.carouselmoved(u.selecteditem)},u.moveto=function(t,e){u.instance.targetposition.y=-t,e&&(u.instance.position.y=u.instance.targetposition.y),u.selecteditem=t,null!=u.carouselmoved&&u.carouselmoved(t)},u}}}();t.module("carousel_vertical",n)}(),function(){var t=document.currentScript.curlify,e=t.getModule("scene"),r=t.getModule("animator"),n=t.getModule("object"),i=t.getModule("focusable"),a=function(){return{new:function(a,o,s){var l=t.localVars.screenWidth,u=t.localVars.screenHeight,c=i.new(a,o,s);c.contentsize={width:c.size.width,height:c.size.height},c.movespeed=1,c.movethreshold=40,c.swipespeed=(l+u)/2*5,c.maxspeed=200,c.inertia=7,c.zeroposition=0,c.loaddistance=u,c.visibledistance=c.loaddistance,c.itempad=0,c.centerslots=!1,c.swipefunc=r.inQuad;var h=c.add(n.new("scrollable"));c.instance=h,h.targetposition={x:0,y:0,z:0};var d=function(t,e,r){r>100&&(r=100);var n=1;t>e&&(n=-1);var i=-n*(r/(16.66*c.inertia))*Math.abs(t-e),a=r/16.66*c.maxspeed;return i>a&&(i=a),-a>i&&(i=-a),Math.abs(i)<1e-5?t=e:t-=i,1==n&&t>e&&(t=e),-1==n&&e>t&&(t=e),t};c.focus=function(t,e){h.pressOffset={x:h.position.x-t*c.movespeed,y:h.position.y-e*c.movespeed},h.moving&&(h.resetpress(),h.moving=!1)},c.defocus=function(){e.getpointerStealer()==c&&c.centeronslots(),console.log("DEFOCUS",c.identifier,h.position.y,h.targetposition.y)},c.centeronslots=function(){if(c.centerslots){var t=Math.floor(c.selected()/(l+c.itempad));c.movetox(t*(l+c.itempad)+l/2)}},h.setMoving=function(){0==h.moving&&null==e.getpointerStealer()&&(e.stealPointers(c),h.moving=!0)},c.focusdrag=function(t,e){var r=h.pressOffset.x+t*c.movespeed,n=h.pressOffset.y+e*c.movespeed,i=r-h.targetposition.x,a=n-h.targetposition.y;c.contentsize.width!=c.size.width&&Math.abs(i)>c.movethreshold&&h.setMoving(),c.contentsize.height!=c.size.height&&Math.abs(a)>c.movethreshold&&h.setMoving(),h.moving&&(h.targetposition.x=r,h.targetposition.y=n)},c.step=function(t){var e=-(c.contentsize.width-c.size.width)+c.zeroposition,r=-(c.contentsize.height-c.size.height),n=t;n>66&&(n=66),0!=c.enforcelimits&&(h.targetposition.x>c.size.width/4+c.zeroposition&&(h.targetposition.x=c.size.width/4+c.zeroposition),h.targetposition.y>c.size.height/4&&(h.targetposition.y=c.size.height/4),h.targetposition.x<e-c.size.width/4&&(h.targetposition.x=e-c.size.width/4),h.targetposition.y<r-c.size.height/4&&(h.targetposition.y=r-c.size.height/4),0==c.focused&&(h.targetposition.x>c.zeroposition&&(h.targetposition.x=d(h.targetposition.x,c.zeroposition,t/2)),h.targetposition.y>0&&(h.targetposition.y=d(h.targetposition.y,0,t/2)),h.targetposition.x<e&&(h.targetposition.x=d(h.targetposition.x,e,t/2)),h.targetposition.y<r&&(h.targetposition.y=d(h.targetposition.y,r,t/2)))),0==c.focused&&(n/=2),c.contentsize.width!=c.size.width&&(h.position.x=d(h.position.x,h.targetposition.x,n)),c.contentsize.height!=c.size.height&&(h.position.y=d(h.position.y,h.targetposition.y,n)),0==c.focused&&h.position.x==h.targetposition.x&&h.position.y==h.targetposition.y&&(h.moving=!1)},c.selected=function(){return Math.floor(h.targetposition.x)},c.movetox=function(t,e){e&&(h.position.x=t),h.targetposition.x=t},c.movetoy=function(t,e){e&&(h.position.y=t),h.targetposition.y=t},c.prepare=function(){c.step(0);for(var t=0;t<h.children.length;t++)h.children[t].step(0)};var f=4*l,p=4*u,m=-f,g=f,v=-p,_=p;return c.intersectsScreen=function(t){var e=t.absolutex(),r=t.absolutey(),n=e-t.width()/2,i=e+t.width()/2,a=r-t.height()/2,o=r+t.height()/2;return!(m>i||n>g||v>o||a>_)},c.add=function(t,e){e?e:h.children.length;return t.parent=h,h.children.push(t),t.step=function(){this.xdistance=this.absolutex();var t=Math.sqrt(Math.pow(this.xdistance,2)+Math.pow(this.absolutey(),2));if(t<c.loaddistance)null!=this.load_content&&0==this.loaded&&this.load_content();else{var e=c.unloaddistance;null==e&&(e=c.loaddistance),t>e&&null!=this.load_content&&null!=this.unload_content&&this.loaded&&this.unload_content()}this.visible=t<c.visibledistance?!0:!1,this.distance=t},t},c}}}();t.module("scrollable",a)}(),function(){function initWebGL(t){gl=null;try{gl=t.getContext("webgl")||t.getContext("experimental-webgl")}catch(t){}return gl||(console.log("ERROR: Unable to initialize WebGL in target node"),gl=null),gl}function mousedown(t){if(!scene.isAnimating()&&1!=touch){var e=t.currentTarget.getBoundingClientRect();touch=!0;var r=scene.getPointerUser();null!=r&&(r.press((t.clientX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,(t.clientY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y),r.drag((t.clientX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,(t.clientY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y))}}function mouseup(t){if(scene.resetPointerStealer(),!scene.isAnimating()&&0!=touch){var e=t.currentTarget.getBoundingClientRect();touch=!1;var r=scene.getPointerUser();null!=r&&r.release((t.clientX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,(t.clientY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y)}}function mouseout(t){touch&&mouseup(t)}function mousemove(t){if(!scene.isAnimating()&&0!=touch){var e=t.currentTarget.getBoundingClientRect(),r=scene.getPointerUser();null!=r&&touch&&r.drag((t.clientX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,(t.clientY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y)}}function touchstart(t){if(!scene.isAnimating()&&1!=touch){var e=t.currentTarget.getBoundingClientRect();touch=!0;var r=scene.getPointerUser();null!=r&&(r.press((t.touches[0].pageX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,(t.touches[0].pageY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y),r.drag((t.touches[0].pageX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,(t.touches[0].pageY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y),lasttouch=t)}}function touchend(t){if(scene.resetPointerStealer(),!scene.isAnimating()&&0!=touch){var e=t.currentTarget.getBoundingClientRect();touch=!1;var r=scene.getPointerUser();null!=r&&r.release((lasttouch.touches[0].pageX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,(lasttouch.touches[0].pageY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y)}}function touchmove(t){if(t.preventDefault(),!scene.isAnimating()&&0!=touch){var e=t.currentTarget.getBoundingClientRect(),r=scene.getPointerUser();null!=r&&(touch&&r.drag((t.touches[0].pageX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,(t.touches[0].pageY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y),lasttouch=t)}}function deviceMotionHandler(t){sensors.acceleration=t.acceleration,sensors.rotation=t.rotationRate}function deviceOrientationHandler(t){sensors.orientation=t}function orientationChanged(){console.log("ORIENTATION CHANGED")}function resizeCanvas(){var t=glcanvas.clientWidth,e=glcanvas.clientHeight;if(glcanvas.width!=t||glcanvas.height!=e){layoutWidth=t,layoutHeight=e,layoutScale={x:screenWidth/layoutWidth,y:screenHeight/layoutHeight},viewWidth=screenWidth,viewHeight=screenHeight;var r=Math.max(layoutScale.x,layoutScale.y);aspectratioZoom&&(r=Math.min(layoutScale.x,layoutScale.y),viewWidth=t*r,viewHeight=e*r),layoutScale.x=r,layoutScale.y=r,layoutWidth=Math.floor(screenWidth*(1/r)),layoutHeight=Math.floor(screenHeight*(1/r)),layoutOffset.x=(t-layoutWidth)/2,layoutOffset.y=(e-layoutHeight)/2,glcanvas.width=glcanvas.clientWidth,glcanvas.height=glcanvas.clientHeight,curlify.localVars.layoutWidth=layoutWidth,curlify.localVars.layoutHeight=layoutHeight,curlify.localVars.layoutScale=layoutScale,curlify.localVars.layoutOffset=layoutOffset,curlify.localVars.viewWidth=viewWidth,curlify.localVars.viewHeight=viewHeight,curlify.localVars.screenWidth=screenWidth,curlify.localVars.screenHeight=screenHeight}}function mergeRecursive(t,e){for(var r in e)try{t[r]=e[r].constructor==Object?mergeRecursive(t[r],e[r]):e[r]}catch(n){t[r]=e[r]}return t}function getRandom(t,e){return Math.floor(Math.random()*(e-t)+t)}function spawn(t){return function(){function e(t,e){var a;try{a=r[t](e)}catch(t){return Promise.reject(t)}return a.done?a.value:Promise.resolve(a.value).then(n,i)}var r=t.apply(this,arguments),n=e.bind(e,"next"),i=e.bind(e,"throw");return n()}}function createCORSRequest(t,e){return new Promise(function(r,n){var i=new XMLHttpRequest;if("withCredentials"in i)i.open(t,e,!0);else{if("undefined"==typeof XDomainRequest)return i=null,void n(Error("createCORSRequest failed with 'XMLHttpRequest not supported'"));i=new XDomainRequest,i.open(t,e)}i.onload=function(){200==i.status?r(i.response):n(Error("cors request failed with '"+i.statusText+"'"))},i.onerror=function(){n(Error("cors request failed with 'Network Error'"))},i.send()})}function require(script){var module=curlify.getModule(script);return null!=module?module:new Promise(function(resolve,reject){var scriptid=script,element=document.getElementById(scriptid);if(null==element)if(".zip"==script.slice(-4))JSZipUtils.getBinaryContent(script,function(err,data){if(err)return void reject(Error("require zip load failed for '"+script+"' with '"+err+"'"));zipfile=new JSZip(data),curlify.localVars.zipfile=zipfile;var adscriptfile=zipfile.file("main.js");if(null==adscriptfile)return zipfile=null,curlify.localVars.zipfile=null,void reject(Error("require failed for '"+script+"' with 'main.js not found inside zip'"));var scriptobject=null;try{scriptobject=eval(adscriptfile.asText())}catch(t){return zipfile=null,curlify.localVars.zipfile=null,void reject(Error("require eval failed for zip '"+script+"' with '"+t+"'"))}resolve(scriptobject)});else{if(".js"!=script.slice(-3))return void reject(Error("require failed for '"+script+"' with 'unsupported source'"));element=document.createElement("script"),element.setAttribute("id",scriptid),element.setAttribute("type","script-container"),document.head.appendChild(element),appendedElements.push(scriptid),createCORSRequest("GET",script).then(function(response){try{element.scriptobject=eval(response)}catch(t){return void reject(Error("require eval failed for '"+script+"' with '"+t+"'",response))}resolve(element.scriptobject)},function(t){reject(Error("require load failed for '"+script+"' with '"+t+"'"))})}else resolve(element.scriptobject)})}function isElementInViewport(t){var e=t.getBoundingClientRect();return e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)}console.log("inititalize main");var currentScript=document.currentScript,curlify=document.currentScript.curlify,revision="5";eval(curlify.extract(curlify.modules,"curlify.modules")),eval(curlify.extract(curlify.localVars,"curlify.localVars"));var glcanvas,aspectratioZoom=!0,touch=!1,lasttouch=null,imageid=0,running=!1,appendedElements=[],createProjection=function(t,e,r,n){var i=mat4.clone([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);return i[0]=r/t,i[5]=r/e,i[10]=-(n+r)/(n-r),i[11]=-1,i[14]=-2*n*r/(n-r),i},createProjectionAndView=function(t,e,r,n){var i=createProjection(1,e/t,r,n),a=mat4.create();mat4.translate(a,a,vec3.clone([0,0,-(n-r)/2]));var o=(n-r)/2/r,s={near:r,far:n,width:t,height:e,projectionMatrix:i,viewMatrix:a,translateScale:o};return s};curlify.addImageElement=function(){var t="curlify_image_"+imageid,e=document.createElement("img");return e.setAttribute("id",t),document.body.appendChild(e),appendedElements.push(t),imageid+=1,e},curlify.render=function(){0!=running&&(window.requestAnimationFrame(curlify.render),document.hidden||0==isElementInViewport(glcanvas)||(gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.disable(gl.DEPTH_TEST),gl.enable(gl.CULL_FACE),gl.cullFace(gl.FRONT),gl.viewport(layoutOffset.x,layoutOffset.y,layoutWidth,layoutHeight),scene.render()))},curlify.stop=function(){if(console.log("Cleaning up..."),null==glcanvas)return void console.log("ERROR: canvas not set");"ontouchstart"in window?(glcanvas.removeEventListener("touchstart",touchstart,!1),glcanvas.removeEventListener("touchmove",touchmove,!1),glcanvas.removeEventListener("touchend",touchend,!1)):(glcanvas.removeEventListener("mousedown",mousedown,!1),glcanvas.removeEventListener("mousemove",mousemove,!1),glcanvas.removeEventListener("mouseup",mouseup,!1),glcanvas.removeEventListener("mouseout",mouseout,!1)),window.DeviceMotionEvent&&window.removeEventListener("devicemotion",deviceMotionHandler,!1),window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",deviceOrientationHandler,!1),window.removeEventListener("orientationchange",orientationChanged),scene.removeAllScenes();for(var t=0;t<appendedElements.length;t++){var e=appendedElements[t],r=document.getElementById(e);r.parentNode.removeChild(r),console.log("... removed element "+e)}appendedElements=[],null!=curlify.intervalId&&(console.log("... stopping render interval"),window.clearInterval(curlify.intervalId)),curlify.clearModuleBuffersAndPrograms(),running=!1},curlify.start=function(t){return console.log("curlify.start",t,revision),running&&curlify.stop(),running=!0,null==t.script?void console.log("ERROR: no script source set"):(screenWidth=t.width?t.width:480,screenHeight=t.height?t.height:852,curlify.localVars.screenWidth=screenWidth,curlify.localVars.screenHeight=screenHeight,glcanvas=t.canvas?document.getElementById(t.canvas):currentScript.parentNode,curlify.localVars.glcanvas=glcanvas,null==glcanvas?void(t.canvas?console.log("ERROR: cannot find canvas to draw on:",t.canvas):console.log("ERROR: no canvas to draw to as parentNode:",glcanvas)):(resizeCanvas(),gl=initWebGL(glcanvas),curlify.localVars.gl=gl,void(null!=gl&&("ontouchstart"in window?(glcanvas.addEventListener("touchstart",touchstart,!1),glcanvas.addEventListener("touchmove",touchmove,!1),glcanvas.addEventListener("touchend",touchend,!1)):(glcanvas.addEventListener("mousedown",mousedown,!1),glcanvas.addEventListener("mousemove",mousemove,!1),glcanvas.addEventListener("mouseup",mouseup,!1),glcanvas.addEventListener("mouseout",mouseout,!1)),camera=createProjectionAndView(screenWidth,screenHeight,3,100),curlify.localVars.camera=camera,window.DeviceMotionEvent?window.addEventListener("devicemotion",deviceMotionHandler,!1):alert("DeviceMotionEvent not supported"),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",deviceOrientationHandler,!1):alert("DeviceOrientationEvent not supported"),window.addEventListener("orientationchange",orientationChanged),require(t.script).then(function(t){scene.openScene(t.new()),window.requestAnimationFrame(curlify.render)})))))}}();