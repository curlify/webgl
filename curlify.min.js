!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.JSZip=e()}}(function(){return function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return n(r?r:e)},u,u.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,n,o,a,s,l,u="",c=0;c<e.length;)t=e.charCodeAt(c++),r=e.charCodeAt(c++),n=e.charCodeAt(c++),o=t>>2,a=(3&t)<<4|r>>4,s=(15&r)<<2|n>>6,l=63&n,isNaN(r)?s=l=64:isNaN(n)&&(l=64),u=u+i.charAt(o)+i.charAt(a)+i.charAt(s)+i.charAt(l);return u},r.decode=function(e){var t,r,n,o,a,s,l,u="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)o=i.indexOf(e.charAt(c++)),a=i.indexOf(e.charAt(c++)),s=i.indexOf(e.charAt(c++)),l=i.indexOf(e.charAt(c++)),t=o<<2|a>>4,r=(15&a)<<4|s>>2,n=(3&s)<<6|l,u+=String.fromCharCode(t),64!=s&&(u+=String.fromCharCode(r)),64!=l&&(u+=String.fromCharCode(n));return u}},{}],2:[function(e,t){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=r},{}],3:[function(e,t,r){"use strict";r.STORE={magic:"\x00\x00",compress:function(e){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},r.DEFLATE=e("./flate")},{"./flate":8}],4:[function(e,t){"use strict";var r=e("./utils"),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if("undefined"==typeof e||!e.length)return 0;var n="string"!==r.getTypeOf(e);"undefined"==typeof t&&(t=0);var o=0,a=0,s=0;t=-1^t;for(var l=0,u=e.length;u>l;l++)s=n?e[l]:e.charCodeAt(l),a=255&(t^s),o=i[a],t=t>>>8^o;return-1^t}},{"./utils":21}],5:[function(e,t){"use strict";function r(){this.data=null,this.length=0,this.index=0}var i=e("./utils");r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},t.exports=r},{"./utils":21}],6:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.comment=null},{}],7:[function(e,t,r){"use strict";var i=e("./utils");r.string2binary=function(e){return i.string2binary(e)},r.string2Uint8Array=function(e){return i.transformTo("uint8array",e)},r.uint8Array2String=function(e){return i.transformTo("string",e)},r.string2Blob=function(e){var t=i.transformTo("arraybuffer",e);return i.arrayBuffer2Blob(t)},r.arrayBuffer2Blob=function(e){return i.arrayBuffer2Blob(e)},r.transformTo=function(e,t){return i.transformTo(e,t)},r.getTypeOf=function(e){return i.getTypeOf(e)},r.checkSupport=function(e){return i.checkSupport(e)},r.MAX_VALUE_16BITS=i.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=i.MAX_VALUE_32BITS,r.pretty=function(e){return i.pretty(e)},r.findCompression=function(e){return i.findCompression(e)},r.isRegExp=function(e){return i.isRegExp(e)}},{"./utils":21}],8:[function(e,t,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako");r.uncompressInputType=i?"uint8array":"array",r.compressInputType=i?"uint8array":"array",r.magic="\b\x00",r.compress=function(e){return n.deflateRaw(e)},r.uncompress=function(e){return n.inflateRaw(e)}},{pako:24}],9:[function(e,t){"use strict";function r(e,t){return this instanceof r?(this.files={},this.comment=null,this.root="",e&&this.load(e,t),void(this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e})):new r(e,t)}var i=e("./base64");r.prototype=e("./object"),r.prototype.load=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.utils=e("./deprecatedPublicUtils"),r.base64={encode:function(e){return i.encode(e)},decode:function(e){return i.decode(e)}},r.compressions=e("./compressions"),t.exports=r},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(e,t){"use strict";var r=e("./base64"),i=e("./zipEntries");t.exports=function(e,t){var n,o,a,s;for(t=t||{},t.base64&&(e=r.decode(e)),o=new i(e,t),n=o.files,a=0;a<n.length;a++)s=n[a],this.file(s.fileName,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileComment.length?s.fileComment:null,createFolders:t.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(e,t){(function(e){"use strict";t.exports=function(t,r){return new e(t,r)},t.exports.test=function(t){return e.isBuffer(t)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(e,t){"use strict";function r(e){this.data=e,this.length=this.data.length,this.index=0}var i=e("./uint8ArrayReader");r.prototype=new i,r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./uint8ArrayReader":18}],13:[function(e,t){"use strict";var r=e("./support"),i=e("./utils"),n=e("./crc32"),o=e("./signature"),a=e("./defaults"),s=e("./base64"),l=e("./compressions"),u=e("./compressedObject"),c=e("./nodeBuffer"),d=e("./utf8"),h=e("./stringWriter"),f=e("./uint8ArrayWriter"),p=function(e){if(e._data instanceof u&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===i.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},m=function(e){var t=p(e),n=i.getTypeOf(t);return"string"===n?!e.options.binary&&r.nodebuffer?c(t,"utf-8"):e.asBinary():t},g=function(e){var t=p(this);return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=s.decode(t)),t=e&&this.options.binary?R.utf8decode(t):i.transformTo("string",t),e||this.options.binary||(t=i.transformTo("string",R.utf8encode(t))),t)},v=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this._data=t,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};v.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var e=m(this);return i.transformTo("nodebuffer",e)},asUint8Array:function(){var e=m(this);return i.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var _=function(e,t){var r,i="";for(r=0;t>r;r++)i+=String.fromCharCode(255&e),e>>>=8;return i},x=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&"undefined"==typeof r[t]&&(r[t]=arguments[e][t]);return r},y=function(e){return e=e||{},e.base64!==!0||null!==e.binary&&void 0!==e.binary||(e.binary=!0),e=x(e,a),e.date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},b=function(e,t,r){var n,o=i.getTypeOf(t);if(r=y(r),r.createFolders&&(n=w(e))&&E.call(this,n,!0),r.dir||null===t||"undefined"==typeof t)r.base64=!1,r.binary=!1,t=null;else if("string"===o)r.binary&&!r.base64&&r.optimizedBinaryString!==!0&&(t=i.string2binary(t));else{if(r.base64=!1,r.binary=!0,!(o||t instanceof u))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===o&&(t=i.transformTo("uint8array",t))}var a=new v(e,t,r);return this.files[e]=a,a},w=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},E=function(e,t){return"/"!=e.slice(-1)&&(e+="/"),t="undefined"!=typeof t?t:!1,this.files[e]||b.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},M=function(e,t){var r,o=new u;return e._data instanceof u?(o.uncompressedSize=e._data.uncompressedSize,o.crc32=e._data.crc32,0===o.uncompressedSize||e.dir?(t=l.STORE,o.compressedContent="",o.crc32=0):e._data.compressionMethod===t.magic?o.compressedContent=e._data.getCompressedContent():(r=e._data.getContent(),o.compressedContent=t.compress(i.transformTo(t.compressInputType,r)))):(r=m(e),(!r||0===r.length||e.dir)&&(t=l.STORE,r=""),o.uncompressedSize=r.length,o.crc32=n(r),o.compressedContent=t.compress(i.transformTo(t.compressInputType,r))),o.compressedSize=o.compressedContent.length,o.compressionMethod=t.magic,o},T=function(e,t,r,a){var s,l,u,c,h=(r.compressedContent,i.transformTo("string",d.utf8encode(t.name))),f=t.comment||"",p=i.transformTo("string",d.utf8encode(f)),m=h.length!==t.name.length,g=p.length!==f.length,v=t.options,x="",y="",b="";u=t._initialMetadata.dir!==t.dir?t.dir:v.dir,c=t._initialMetadata.date!==t.date?t.date:v.date,s=c.getHours(),s<<=6,s|=c.getMinutes(),s<<=5,s|=c.getSeconds()/2,l=c.getFullYear()-1980,l<<=4,l|=c.getMonth()+1,l<<=5,l|=c.getDate(),m&&(y=_(1,1)+_(n(h),4)+h,x+="up"+_(y.length,2)+y),g&&(b=_(1,1)+_(this.crc32(p),4)+p,x+="uc"+_(b.length,2)+b);var w="";w+="\n\x00",w+=m||g?"\x00\b":"\x00\x00",w+=r.compressionMethod,w+=_(s,2),w+=_(l,2),w+=_(r.crc32,4),w+=_(r.compressedSize,4),w+=_(r.uncompressedSize,4),w+=_(h.length,2),w+=_(x.length,2);var E=o.LOCAL_FILE_HEADER+w+h+x,M=o.CENTRAL_FILE_HEADER+"\x00"+w+_(p.length,2)+"\x00\x00\x00\x00"+(u===!0?"\x00\x00\x00":"\x00\x00\x00\x00")+_(a,4)+h+x+p;return{fileRecord:E,dirRecord:M,compressedObject:r}},R={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,r,i,n,o=[];for(t in this.files)this.files.hasOwnProperty(t)&&(i=this.files[t],n=new v(i.name,i._data,x(i.options)),r=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(r,n)&&o.push(n));return o},file:function(e,t,r){if(1===arguments.length){if(i.isRegExp(e)){var n=e;return this.filter(function(e,t){return!t.dir&&n.test(e)})}return this.filter(function(t,r){return!r.dir&&t===e})[0]||null}return e=this.root+e,b.call(this,e,t,r),this},folder:function(e){if(!e)return this;if(i.isRegExp(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=this.root+e,r=E.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),i=0;i<r.length;i++)delete this.files[r[i].name];return this},generate:function(e){e=x(e||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),i.checkSupport(e.type);var t,r,n=[],a=0,u=0,c=i.transformTo("string",this.utf8encode(e.comment||this.comment||""));for(var d in this.files)if(this.files.hasOwnProperty(d)){var p=this.files[d],m=p.options.compression||e.compression.toUpperCase(),g=l[m];if(!g)throw new Error(m+" is not a valid compression method !");var v=M.call(this,p,g),y=T.call(this,d,p,v,a);a+=y.fileRecord.length+v.compressedSize,u+=y.dirRecord.length,n.push(y)}var b="";b=o.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+_(n.length,2)+_(n.length,2)+_(u,4)+_(a,4)+_(c.length,2)+c;var w=e.type.toLowerCase();for(t="uint8array"===w||"arraybuffer"===w||"blob"===w||"nodebuffer"===w?new f(a+u+b.length):new h(a+u+b.length),r=0;r<n.length;r++)t.append(n[r].fileRecord),t.append(n[r].compressedObject.compressedContent);for(r=0;r<n.length;r++)t.append(n[r].dirRecord);t.append(b);var E=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(e.type.toLowerCase(),E);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",E));case"base64":return e.base64?s.encode(E):E;default:return E}},crc32:function(e,t){return n(e,t)},utf8encode:function(e){return i.transformTo("string",d.utf8encode(e))},utf8decode:function(e){return d.utf8decode(e)}};t.exports=R},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],15:[function(e,t){"use strict";function r(e,t){this.data=e,t||(this.data=n.string2binary(this.data)),this.length=this.data.length,this.index=0}var i=e("./dataReader"),n=e("./utils");r.prototype=new i,r.prototype.byteAt=function(e){return this.data.charCodeAt(e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":5,"./utils":21}],16:[function(e,t){"use strict";var r=e("./utils"),i=function(){this.data=[]};i.prototype={append:function(e){e=r.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=i},{"./utils":21}],17:[function(e,t,r){(function(e){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof e,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var t=new ArrayBuffer(0);try{r.blob=0===new Blob([t],{type:"application/zip"}).size}catch(e){try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,n=new i;n.append(t),r.blob=0===n.getBlob("application/zip").size}catch(e){r.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(e,t){"use strict";function r(e){e&&(this.data=e,this.length=this.data.length,this.index=0)}var i=e("./dataReader");r.prototype=new i,r.prototype.byteAt=function(e){return this.data[e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===r&&this.data[o+2]===i&&this.data[o+3]===n)return o;return-1},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.index,this.index+e);return this.index+=e,t},t.exports=r},{"./dataReader":5}],19:[function(e,t){"use strict";var r=e("./utils"),i=function(e){this.data=new Uint8Array(e),this.index=0};i.prototype={append:function(e){0!==e.length&&(e=r.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=i},{"./utils":21}],20:[function(e,t,r){"use strict";for(var i=e("./utils"),n=e("./support"),o=e("./nodeBuffer"),a=new Array(256),s=0;256>s;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1;var l=function(e){var t,r,i,o,a,s=e.length,l=0;for(o=0;s>o;o++)r=e.charCodeAt(o),55296===(64512&r)&&s>o+1&&(i=e.charCodeAt(o+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),o++)),l+=128>r?1:2048>r?2:65536>r?3:4;for(t=n.uint8array?new Uint8Array(l):new Array(l),a=0,o=0;l>a;o++)r=e.charCodeAt(o),55296===(64512&r)&&s>o+1&&(i=e.charCodeAt(o+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),o++)),128>r?t[a++]=r:2048>r?(t[a++]=192|r>>>6,t[a++]=128|63&r):65536>r?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},u=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&128===(192&e[r]);)r--;return 0>r?t:0===r?t:r+a[e[r]]>t?r:t},c=function(e){var t,r,n,o,s=e.length,l=new Array(2*s);for(r=0,t=0;s>t;)if(n=e[t++],128>n)l[r++]=n;else if(o=a[n],o>4)l[r++]=65533,t+=o-1;else{for(n&=2===o?31:3===o?15:7;o>1&&s>t;)n=n<<6|63&e[t++],o--;o>1?l[r++]=65533:65536>n?l[r++]=n:(n-=65536,l[r++]=55296|n>>10&1023,l[r++]=56320|1023&n)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),i.applyFromCharCode(l)};r.utf8encode=function(e){return n.nodebuffer?o(e,"utf-8"):l(e)},r.utf8decode=function(e){if(n.nodebuffer)return i.transformTo("nodebuffer",e).toString("utf-8");e=i.transformTo(n.uint8array?"uint8array":"array",e);for(var t=[],r=0,o=e.length,a=65536;o>r;){var s=u(e,Math.min(r+a,o));t.push(n.uint8array?c(e.subarray(r,s)):c(e.slice(r,s))),r=s}return t.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(e,t,r){"use strict";function i(e){return e}function n(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}function o(e){var t=65536,i=[],n=e.length,o=r.getTypeOf(e),a=0,s=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(e){s=!1}if(!s){for(var l="",c=0;c<e.length;c++)l+=String.fromCharCode(e[c]);return l}for(;n>a&&t>1;)try{i.push("array"===o||"nodebuffer"===o?String.fromCharCode.apply(null,e.slice(a,Math.min(a+t,n))):String.fromCharCode.apply(null,e.subarray(a,Math.min(a+t,n)))),a+=t}catch(e){t=Math.floor(t/2)}return i.join("")}function a(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}var s=e("./support"),l=e("./compressions"),u=e("./nodeBuffer");r.string2binary=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r));return t},r.arrayBuffer2Blob=function(e){r.checkSupport("blob");try{return new Blob([e],{type:"application/zip"})}catch(r){try{var t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=new t;return i.append(e),i.getBlob("application/zip")}catch(e){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=o;var c={};c.string={string:i,array:function(e){return n(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return n(e,new Uint8Array(e.length))},nodebuffer:function(e){return n(e,u(e.length))}},c.array={string:o,array:i,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(e)}},c.arraybuffer={string:function(e){return o(new Uint8Array(e))},array:function(e){return a(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:i,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(new Uint8Array(e))}},c.uint8array={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:i,nodebuffer:function(e){return u(e)}},c.nodebuffer={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return a(e,new Uint8Array(e.length))},nodebuffer:i},r.transformTo=function(e,t){if(t||(t=""),!e)return t;r.checkSupport(e);var i=r.getTypeOf(t),n=c[i][e](t);return n},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":s.nodebuffer&&u.test(e)?"nodebuffer":s.uint8array&&e instanceof Uint8Array?"uint8array":s.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){var t=s[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,i="";for(r=0;r<(e||"").length;r++)t=e.charCodeAt(r),i+="\\x"+(16>t?"0":"")+t.toString(16).toUpperCase();return i},r.findCompression=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null},r.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(e,t){"use strict";function r(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var i=e("./stringReader"),n=e("./nodeBufferReader"),o=e("./uint8ArrayReader"),a=e("./utils"),s=e("./signature"),l=e("./zipEntry"),u=e("./support"),c=e("./object");r.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+a.pretty(t)+", expected "+a.pretty(e)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=c.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,i=this.zip64EndOfCentralSize-44,n=0;i>n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===s.CENTRAL_FILE_HEADER;)e=new l({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(-1===e)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(e),this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===e)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(e){var t=a.getTypeOf(e);this.reader="string"!==t||u.uint8array?"nodebuffer"===t?new n(e):new o(a.transformTo("uint8array",e)):new i(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=r},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(e,t){"use strict";function r(e,t){this.options=e,this.loadOptions=t}var i=e("./stringReader"),n=e("./utils"),o=e("./compressedObject"),a=e("./object");r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(e,t,r){return function(){var i=e.index;e.setIndex(t);var n=e.readData(r);return e.setIndex(i),n}},prepareContent:function(e,t,r,i,o){return function(){var e=n.transformTo(i.uncompressInputType,this.getCompressedContent()),t=i.uncompress(e);if(t.length!==o)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readString(this.fileNameLength),e.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(t=n.findCompression(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new o,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=n.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readString(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readString(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readString(this.fileCommentLength),this.dir=16&this.externalFileAttributes?!0:!1},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=new i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,i,n=e.index;for(this.extraFields=this.extraFields||{};e.index<n+this.extraFieldsLength;)t=e.readInt(2),r=e.readInt(2),i=e.readString(r),this.extraFields[t]={id:t,length:r,value:i}},handleUTF8:function(){if(this.useUTF8())this.fileName=a.utf8decode(this.fileName),this.fileComment=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();null!==e&&(this.fileName=e);var t=this.findExtraFieldUnicodeComment();null!==t&&(this.fileComment=t)}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new i(e.value);return 1!==t.readInt(1)?null:a.crc32(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new i(e.value);return 1!==t.readInt(1)?null:a.crc32(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readString(e.length-5))}return null}},t.exports=r},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(e,t){"use strict";var r=e("./lib/utils/common").assign,i=e("./lib/deflate"),n=e("./lib/inflate"),o=e("./lib/zlib/constants"),a={};r(a,i,n,o),t.exports=a},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(e,t,r){"use strict";function i(){}function n(){}function o(e,t){return t=t||{},t.gzip=!0,i(e,t)}var a=(e("./zlib/deflate.js"),e("./utils/common"),e("./utils/strings"),e("./zlib/messages"),e("./zlib/zstream"),function(){});a.prototype.push=function(){},a.prototype.onEnd=function(){},r.Deflate=a,r.deflate=i,r.deflateRaw=n,r.gzip=o},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(e,t,r){"use strict";function i(e,t){var r=new h(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}function n(e,t){return t=t||{},t.raw=!0,i(e,t)}var o=e("./zlib/inflate.js"),a=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),c=e("./zlib/zstream"),d=e("./zlib/gzheader"),h=function(e){this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});
var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=o.inflateInit2(this.strm,t.windowBits);if(r!==l.Z_OK)throw new Error(u[r]);this.header=new d,o.inflateGetHeader(this.strm,this.header)};h.prototype.push=function(e,t){var r,i,n,u,c,d=this.strm,h=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,d.input="string"==typeof e?s.binstring2buf(e):e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new a.Buf8(h),d.next_out=0,d.avail_out=h),r=o.inflate(d,l.Z_NO_FLUSH),r!==l.Z_STREAM_END&&r!==l.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0===d.avail_out||r===l.Z_STREAM_END||0===d.avail_in&&i===l.Z_FINISH)&&("string"===this.options.to?(n=s.utf8border(d.output,d.next_out),u=d.next_out-n,c=s.buf2string(d.output,n),d.next_out=u,d.avail_out=h-u,u&&a.arraySet(d.output,d.output,n,u,0),this.onData(c)):this.onData(a.shrinkBuf(d.output,d.next_out)))}while(d.avail_in>0&&r!==l.Z_STREAM_END);return r===l.Z_STREAM_END&&(i=l.Z_FINISH),i===l.Z_FINISH?(r=o.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l.Z_OK):!0},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===l.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=h,r.inflate=i,r.inflateRaw=n,r.ungzip=i},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(e,t,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)return void e.set(t.subarray(r,r+i),n);for(var o=0;i>o;o++)e[n+o]=t[r+o]},flattenChunks:function(e){var t,r,i,n,o,a;for(i=0,t=0,r=e.length;r>t;t++)i+=e[t].length;for(a=new Uint8Array(i),n=0,t=0,r=e.length;r>t;t++)o=e[t],a.set(o,n),n+=o.length;return a}},o={arraySet:function(e,t,r,i,n){for(var o=0;i>o;o++)e[n+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(i)},{}],28:[function(e,t,r){"use strict";function i(e,t){if(65537>t&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",i=0;t>i;i++)r+=String.fromCharCode(e[i]);return r}var n=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new n.Buf8(256),l=0;256>l;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,r.string2buf=function(e){var t,r,i,o,a,s=e.length,l=0;for(o=0;s>o;o++)r=e.charCodeAt(o),55296===(64512&r)&&s>o+1&&(i=e.charCodeAt(o+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),o++)),l+=128>r?1:2048>r?2:65536>r?3:4;for(t=new n.Buf8(l),a=0,o=0;l>a;o++)r=e.charCodeAt(o),55296===(64512&r)&&s>o+1&&(i=e.charCodeAt(o+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),o++)),128>r?t[a++]=r:2048>r?(t[a++]=192|r>>>6,t[a++]=128|63&r):65536>r?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},r.buf2binstring=function(e){return i(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;i>r;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,o,a,l=t||e.length,u=new Array(2*l);for(n=0,r=0;l>r;)if(o=e[r++],128>o)u[n++]=o;else if(a=s[o],a>4)u[n++]=65533,r+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&l>r;)o=o<<6|63&e[r++],a--;a>1?u[n++]=65533:65536>o?u[n++]=o:(o-=65536,u[n++]=55296|o>>10&1023,u[n++]=56320|1023&o)}return i(u,n)},r.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&128===(192&e[r]);)r--;return 0>r?t:0===r?t:r+s[e[r]]>t?r:t}},{"./common":27}],29:[function(e,t){"use strict";function r(e,t,r,i){for(var n=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){a=r>2e3?2e3:r,r-=a;do n=n+t[i++]|0,o=o+n|0;while(--a);n%=65521,o%=65521}return n|o<<16|0}t.exports=r},{}],30:[function(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(e,t){"use strict";function r(){for(var e,t=[],r=0;256>r;r++){e=r;for(var i=0;8>i;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}function i(e,t,r,i){var o=n,a=i+r;e=-1^e;for(var s=i;a>s;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}var n=r();t.exports=i},{}],32:[function(e,t,r){"use strict";function i(){}function n(){}function o(){}function a(){}function s(){}function l(){}function u(){}function c(){}function d(){}function h(){}var f,p=(e("../utils/common"),e("./trees"),e("./adler32"),e("./crc32"),e("./messages"),function(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n});f=[new p(0,0,0,0,i),new p(4,4,8,4,n),new p(4,5,16,8,n),new p(4,6,32,32,n),new p(4,4,16,16,o),new p(8,16,32,32,o),new p(8,16,128,128,o),new p(8,32,128,256,o),new p(32,128,258,1024,o),new p(32,258,258,4096,o)],r.deflateInit=c,r.deflateInit2=u,r.deflateReset=s,r.deflateResetKeep=a,r.deflateSetHeader=l,r.deflate=d,r.deflateEnd=h,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(e,t){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],34:[function(e,t){"use strict";var r=30,i=12;t.exports=function(e,t){var n,o,a,s,l,u,c,d,h,f,p,m,g,v,_,x,y,b,w,E,M,T,R,A,S;n=e.state,o=e.next_in,A=e.input,a=o+(e.avail_in-5),s=e.next_out,S=e.output,l=s-(t-e.avail_out),u=s+(e.avail_out-257),c=n.dmax,d=n.wsize,h=n.whave,f=n.wnext,p=n.window,m=n.hold,g=n.bits,v=n.lencode,_=n.distcode,x=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{15>g&&(m+=A[o++]<<g,g+=8,m+=A[o++]<<g,g+=8),b=v[m&x];t:for(;;){if(w=b>>>24,m>>>=w,g-=w,w=b>>>16&255,0===w)S[s++]=65535&b;else{if(!(16&w)){if(0===(64&w)){b=v[(65535&b)+(m&(1<<w)-1)];continue t}if(32&w){n.mode=i;break e}e.msg="invalid literal/length code",n.mode=r;break e}E=65535&b,w&=15,w&&(w>g&&(m+=A[o++]<<g,g+=8),E+=m&(1<<w)-1,m>>>=w,g-=w),15>g&&(m+=A[o++]<<g,g+=8,m+=A[o++]<<g,g+=8),b=_[m&y];r:for(;;){if(w=b>>>24,m>>>=w,g-=w,w=b>>>16&255,!(16&w)){if(0===(64&w)){b=_[(65535&b)+(m&(1<<w)-1)];continue r}e.msg="invalid distance code",n.mode=r;break e}if(M=65535&b,w&=15,w>g&&(m+=A[o++]<<g,g+=8,w>g&&(m+=A[o++]<<g,g+=8)),M+=m&(1<<w)-1,M>c){e.msg="invalid distance too far back",n.mode=r;break e}if(m>>>=w,g-=w,w=s-l,M>w){if(w=M-w,w>h&&n.sane){e.msg="invalid distance too far back",n.mode=r;break e}if(T=0,R=p,0===f){if(T+=d-w,E>w){E-=w;do S[s++]=p[T++];while(--w);T=s-M,R=S}}else if(w>f){if(T+=d+f-w,w-=f,E>w){E-=w;do S[s++]=p[T++];while(--w);if(T=0,E>f){w=f,E-=w;do S[s++]=p[T++];while(--w);T=s-M,R=S}}}else if(T+=f-w,E>w){E-=w;do S[s++]=p[T++];while(--w);T=s-M,R=S}for(;E>2;)S[s++]=R[T++],S[s++]=R[T++],S[s++]=R[T++],E-=3;E&&(S[s++]=R[T++],E>1&&(S[s++]=R[T++]))}else{T=s-M;do S[s++]=S[T++],S[s++]=S[T++],S[s++]=S[T++],E-=3;while(E>2);E&&(S[s++]=S[T++],E>1&&(S[s++]=S[T++]))}break}}break}}while(a>o&&u>s);E=g>>3,o-=E,g-=E<<3,m&=(1<<g)-1,e.next_in=o,e.next_out=s,e.avail_in=a>o?5+(a-o):5-(o-a),e.avail_out=u>s?257+(u-s):257-(s-u),n.hold=m,n.bits=g}},{}],35:[function(e,t,r){"use strict";function i(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=B,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(pt),t.distcode=t.distdyn=new v.Buf32(mt),t.sane=1,t.back=-1,S):D}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):D}function s(e,t){var r,i;return e&&e.state?(i=e.state,0>t?(r=0,t=-t):(r=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?D:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,a(e))):D}function l(e,t){var r,i;return e?(i=new n,e.state=i,i.window=null,r=s(e,t),r!==S&&(e.state=null),r):D}function u(e){return l(e,vt)}function c(e){if(_t){var t;for(m=new v.Buf32(512),g=new v.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(b(E,e.lens,0,288,m,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;b(M,e.lens,0,32,g,0,e.work,{bits:5}),_t=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function d(e,t,r,i){var n,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),i>=o.wsize?(v.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(n=o.wsize-o.wnext,n>i&&(n=i),v.arraySet(o.window,t,r-i,n,o.wnext),i-=n,i?(v.arraySet(o.window,t,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=n,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=n))),0}function h(e,t){var r,n,o,a,s,l,u,h,f,p,m,g,pt,mt,gt,vt,_t,xt,yt,bt,wt,Et,Mt,Tt,Rt=0,At=new v.Buf8(4),St=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return D;r=e.state,r.mode===G&&(r.mode=Z),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,h=r.hold,f=r.bits,p=l,m=u,Et=S;e:for(;;)switch(r.mode){case B:if(0===r.wrap){r.mode=Z;break}for(;16>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if(2&r.wrap&&35615===h){r.check=0,At[0]=255&h,At[1]=h>>>8&255,r.check=x(r.check,At,2,0),h=0,f=0,r.mode=U;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",r.mode=dt;break}if((15&h)!==O){e.msg="unknown compression method",r.mode=dt;break}if(h>>>=4,f-=4,wt=(15&h)+8,0===r.wbits)r.wbits=wt;else if(wt>r.wbits){e.msg="invalid window size",r.mode=dt;break}r.dmax=1<<wt,e.adler=r.check=1,r.mode=512&h?W:G,h=0,f=0;break;case U:for(;16>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if(r.flags=h,(255&r.flags)!==O){e.msg="unknown compression method",r.mode=dt;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=dt;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(At[0]=255&h,At[1]=h>>>8&255,r.check=x(r.check,At,2,0)),h=0,f=0,r.mode=L;case L:for(;32>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}r.head&&(r.head.time=h),512&r.flags&&(At[0]=255&h,At[1]=h>>>8&255,At[2]=h>>>16&255,At[3]=h>>>24&255,r.check=x(r.check,At,4,0)),h=0,f=0,r.mode=F;case F:for(;16>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(At[0]=255&h,At[1]=h>>>8&255,r.check=x(r.check,At,2,0)),h=0,f=0,r.mode=V;case V:if(1024&r.flags){for(;16>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(At[0]=255&h,At[1]=h>>>8&255,r.check=x(r.check,At,2,0)),h=0,f=0}else r.head&&(r.head.extra=null);r.mode=j;case j:if(1024&r.flags&&(g=r.length,g>l&&(g=l),g&&(r.head&&(wt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),v.arraySet(r.head.extra,n,a,g,wt)),512&r.flags&&(r.check=x(r.check,n,g,a)),l-=g,a+=g,r.length-=g),r.length))break e;r.length=0,r.mode=N;case N:if(2048&r.flags){if(0===l)break e;g=0;do wt=n[a+g++],r.head&&wt&&r.length<65536&&(r.head.name+=String.fromCharCode(wt));while(wt&&l>g);if(512&r.flags&&(r.check=x(r.check,n,g,a)),l-=g,a+=g,wt)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=X;case X:if(4096&r.flags){if(0===l)break e;g=0;do wt=n[a+g++],r.head&&wt&&r.length<65536&&(r.head.comment+=String.fromCharCode(wt));while(wt&&l>g);if(512&r.flags&&(r.check=x(r.check,n,g,a)),l-=g,a+=g,wt)break e}else r.head&&(r.head.comment=null);r.mode=H;case H:if(512&r.flags){for(;16>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if(h!==(65535&r.check)){e.msg="header crc mismatch",r.mode=dt;break}h=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=G;break;case W:for(;32>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}e.adler=r.check=i(h),h=0,f=0,r.mode=q;case q:if(0===r.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,r.hold=h,r.bits=f,z;e.adler=r.check=1,r.mode=G;case G:if(t===R||t===A)break e;case Z:if(r.last){h>>>=7&f,f-=7&f,r.mode=lt;break}for(;3>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}switch(r.last=1&h,h>>>=1,f-=1,3&h){case 0:r.mode=Y;break;case 1:if(c(r),r.mode=tt,t===A){h>>>=2,f-=2;break e}break;case 2:r.mode=Q;break;case 3:e.msg="invalid block type",r.mode=dt}h>>>=2,f-=2;break;case Y:for(h>>>=7&f,f-=7&f;32>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if((65535&h)!==(h>>>16^65535)){e.msg="invalid stored block lengths",r.mode=dt;break}if(r.length=65535&h,h=0,f=0,r.mode=K,t===A)break e;case K:r.mode=J;case J:if(g=r.length){if(g>l&&(g=l),g>u&&(g=u),0===g)break e;v.arraySet(o,n,a,g,s),l-=g,a+=g,u-=g,s+=g,r.length-=g;break}r.mode=G;break;case Q:for(;14>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if(r.nlen=(31&h)+257,h>>>=5,f-=5,r.ndist=(31&h)+1,h>>>=5,f-=5,r.ncode=(15&h)+4,h>>>=4,f-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=dt;break}r.have=0,r.mode=$;case $:for(;r.have<r.ncode;){for(;3>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}r.lens[St[r.have++]]=7&h,h>>>=3,f-=3}for(;r.have<19;)r.lens[St[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Mt={bits:r.lenbits},Et=b(w,r.lens,0,19,r.lencode,0,r.work,Mt),r.lenbits=Mt.bits,Et){e.msg="invalid code lengths set",r.mode=dt;break}r.have=0,r.mode=et;case et:for(;r.have<r.nlen+r.ndist;){for(;Rt=r.lencode[h&(1<<r.lenbits)-1],gt=Rt>>>24,vt=Rt>>>16&255,_t=65535&Rt,!(f>=gt);){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if(16>_t)h>>>=gt,f-=gt,r.lens[r.have++]=_t;else{if(16===_t){for(Tt=gt+2;Tt>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if(h>>>=gt,f-=gt,0===r.have){e.msg="invalid bit length repeat",r.mode=dt;break}wt=r.lens[r.have-1],g=3+(3&h),h>>>=2,f-=2}else if(17===_t){for(Tt=gt+3;Tt>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}h>>>=gt,f-=gt,wt=0,g=3+(7&h),h>>>=3,f-=3}else{for(Tt=gt+7;Tt>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}h>>>=gt,f-=gt,wt=0,g=11+(127&h),h>>>=7,f-=7}if(r.have+g>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=dt;break}for(;g--;)r.lens[r.have++]=wt}}if(r.mode===dt)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=dt;break}if(r.lenbits=9,Mt={bits:r.lenbits},Et=b(E,r.lens,0,r.nlen,r.lencode,0,r.work,Mt),r.lenbits=Mt.bits,Et){e.msg="invalid literal/lengths set",r.mode=dt;break}if(r.distbits=6,r.distcode=r.distdyn,Mt={bits:r.distbits},Et=b(M,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Mt),r.distbits=Mt.bits,Et){e.msg="invalid distances set",r.mode=dt;break}if(r.mode=tt,t===A)break e;case tt:r.mode=rt;case rt:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,r.hold=h,r.bits=f,y(e,m),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,h=r.hold,f=r.bits,r.mode===G&&(r.back=-1);break}for(r.back=0;Rt=r.lencode[h&(1<<r.lenbits)-1],gt=Rt>>>24,vt=Rt>>>16&255,_t=65535&Rt,!(f>=gt);){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if(vt&&0===(240&vt)){for(xt=gt,yt=vt,bt=_t;Rt=r.lencode[bt+((h&(1<<xt+yt)-1)>>xt)],gt=Rt>>>24,vt=Rt>>>16&255,_t=65535&Rt,!(f>=xt+gt);){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}h>>>=xt,f-=xt,r.back+=xt}if(h>>>=gt,f-=gt,r.back+=gt,r.length=_t,0===vt){r.mode=st;break}if(32&vt){r.back=-1,r.mode=G;break}if(64&vt){e.msg="invalid literal/length code",r.mode=dt;break}r.extra=15&vt,r.mode=it;case it:if(r.extra){for(Tt=r.extra;Tt>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=nt;case nt:for(;Rt=r.distcode[h&(1<<r.distbits)-1],gt=Rt>>>24,vt=Rt>>>16&255,_t=65535&Rt,!(f>=gt);){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if(0===(240&vt)){for(xt=gt,yt=vt,bt=_t;Rt=r.distcode[bt+((h&(1<<xt+yt)-1)>>xt)],gt=Rt>>>24,vt=Rt>>>16&255,_t=65535&Rt,!(f>=xt+gt);){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}h>>>=xt,f-=xt,r.back+=xt}if(h>>>=gt,f-=gt,r.back+=gt,64&vt){e.msg="invalid distance code",r.mode=dt;break}r.offset=_t,r.extra=15&vt,r.mode=ot;case ot:if(r.extra){for(Tt=r.extra;Tt>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=dt;break}r.mode=at;case at:if(0===u)break e;if(g=m-u,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=dt;break}g>r.wnext?(g-=r.wnext,pt=r.wsize-g):pt=r.wnext-g,g>r.length&&(g=r.length),mt=r.window}else mt=o,pt=s-r.offset,g=r.length;g>u&&(g=u),u-=g,r.length-=g;do o[s++]=mt[pt++];while(--g);0===r.length&&(r.mode=rt);break;case st:if(0===u)break e;o[s++]=r.length,u--,r.mode=rt;break;case lt:if(r.wrap){for(;32>f;){if(0===l)break e;l--,h|=n[a++]<<f,f+=8}if(m-=u,e.total_out+=m,r.total+=m,m&&(e.adler=r.check=r.flags?x(r.check,o,m,s-m):_(r.check,o,m,s-m)),m=u,(r.flags?h:i(h))!==r.check){e.msg="incorrect data check",r.mode=dt;break}h=0,f=0}r.mode=ut;case ut:if(r.wrap&&r.flags){for(;32>f;){if(0===l)break e;l--,h+=n[a++]<<f,f+=8}if(h!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=dt;break}h=0,f=0}r.mode=ct;case ct:Et=P;break e;case dt:Et=C;break e;case ht:return I;case ft:default:return D}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,r.hold=h,r.bits=f,(r.wsize||m!==e.avail_out&&r.mode<dt&&(r.mode<lt||t!==T))&&d(e,e.output,e.next_out,m-e.avail_out)?(r.mode=ht,I):(p-=e.avail_in,m-=e.avail_out,e.total_in+=p,e.total_out+=m,r.total+=m,r.wrap&&m&&(e.adler=r.check=r.flags?x(r.check,o,m,e.next_out-m):_(r.check,o,m,e.next_out-m)),e.data_type=r.bits+(r.last?64:0)+(r.mode===G?128:0)+(r.mode===tt||r.mode===K?256:0),(0===p&&0===m||t===T)&&Et===S&&(Et=k),Et)}function f(e){if(!e||!e.state)return D;var t=e.state;return t.window&&(t.window=null),e.state=null,S}function p(e,t){var r;return e&&e.state?(r=e.state,0===(2&r.wrap)?D:(r.head=t,t.done=!1,S)):D}var m,g,v=e("../utils/common"),_=e("./adler32"),x=e("./crc32"),y=e("./inffast"),b=e("./inftrees"),w=0,E=1,M=2,T=4,R=5,A=6,S=0,P=1,z=2,D=-2,C=-3,I=-4,k=-5,O=8,B=1,U=2,L=3,F=4,V=5,j=6,N=7,X=8,H=9,W=10,q=11,G=12,Z=13,Y=14,K=15,J=16,Q=17,$=18,et=19,tt=20,rt=21,it=22,nt=23,ot=24,at=25,st=26,lt=27,ut=28,ct=29,dt=30,ht=31,ft=32,pt=852,mt=592,gt=15,vt=gt,_t=!0;r.inflateReset=a,r.inflateReset2=s,r.inflateResetKeep=o,r.inflateInit=u,r.inflateInit2=l,r.inflate=h,r.inflateEnd=f,r.inflateGetHeader=p,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(e,t){"use strict";var r=e("../utils/common"),i=15,n=852,o=592,a=0,s=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,f,p,m,g,v,_){var x,y,b,w,E,M,T,R,A,S=_.bits,P=0,z=0,D=0,C=0,I=0,k=0,O=0,B=0,U=0,L=0,F=null,V=0,j=new r.Buf16(i+1),N=new r.Buf16(i+1),X=null,H=0;for(P=0;i>=P;P++)j[P]=0;for(z=0;p>z;z++)j[t[f+z]]++;for(I=S,C=i;C>=1&&0===j[C];C--);if(I>C&&(I=C),0===C)return m[g++]=20971520,m[g++]=20971520,_.bits=1,0;for(D=1;C>D&&0===j[D];D++);for(D>I&&(I=D),B=1,P=1;i>=P;P++)if(B<<=1,B-=j[P],0>B)return-1;if(B>0&&(e===a||1!==C))return-1;for(N[1]=0,P=1;i>P;P++)N[P+1]=N[P]+j[P];for(z=0;p>z;z++)0!==t[f+z]&&(v[N[t[f+z]]++]=z);if(e===a?(F=X=v,M=19):e===s?(F=u,V-=257,X=c,H-=257,M=256):(F=d,X=h,M=-1),L=0,z=0,P=D,E=g,k=I,O=0,b=-1,U=1<<I,w=U-1,e===s&&U>n||e===l&&U>o)return 1;for(var W=0;;){W++,T=P-O,v[z]<M?(R=0,A=v[z]):v[z]>M?(R=X[H+v[z]],A=F[V+v[z]]):(R=96,A=0),x=1<<P-O,y=1<<k,D=y;do y-=x,m[E+(L>>O)+y]=T<<24|R<<16|A|0;while(0!==y);for(x=1<<P-1;L&x;)x>>=1;if(0!==x?(L&=x-1,L+=x):L=0,z++,0===--j[P]){if(P===C)break;P=t[f+v[z]]}if(P>I&&(L&w)!==b){for(0===O&&(O=I),E+=D,k=P-O,B=1<<k;C>k+O&&(B-=j[k+O],!(0>=B));)k++,B<<=1;if(U+=1<<k,e===s&&U>n||e===l&&U>o)return 1;b=L&w,m[b]=I<<24|k<<16|E-g|0}}return 0!==L&&(m[E+L]=P-O<<24|64<<16|0),_.bits=I,0}},{"../utils/common":27}],37:[function(e,t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(e,t,r){"use strict";function i(e){for(var t=e.length;--t>=0;)e[t]=0}function n(e){return 256>e?at[e]:at[256+(e>>>7)]}function o(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function a(e,t,r){e.bi_valid>G-r?(e.bi_buf|=t<<e.bi_valid&65535,o(e,e.bi_buf),e.bi_buf=t>>G-e.bi_valid,e.bi_valid+=r-G):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function s(e,t,r){a(e,r[2*t],r[2*t+1])}function l(e,t){var r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1}function u(e){16===e.bi_valid?(o(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var r,i,n,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;q>=o;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;W>r;r++)i=e.heap[r],o=l[2*l[2*i+1]+1]+1,o>p&&(o=p,m++),l[2*i+1]=o,i>u||(e.bl_count[o]++,a=0,i>=f&&(a=h[i-f]),s=l[2*i],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(c[2*i+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(i=e.bl_count[o];0!==i;)n=e.heap[--r],n>u||(l[2*n+1]!==o&&(e.opt_len+=(o-l[2*n+1])*l[2*n],l[2*n+1]=o),i--)}}function d(e,t,r){var i,n,o=new Array(q+1),a=0;for(i=1;q>=i;i++)o[i]=a=a+r[i-1]<<1;for(n=0;t>=n;n++){var s=e[2*n+1];0!==s&&(e[2*n]=l(o[s]++,s))}}function h(){var e,t,r,i,n,o=new Array(q+1);for(r=0,i=0;V-1>i;i++)for(lt[i]=r,e=0;e<1<<$[i];e++)st[r++]=i;for(st[r-1]=i,n=0,i=0;16>i;i++)for(ut[i]=n,e=0;e<1<<et[i];e++)at[n++]=i;for(n>>=7;X>i;i++)for(ut[i]=n<<7,e=0;e<1<<et[i]-7;e++)at[256+n++]=i;for(t=0;q>=t;t++)o[t]=0;for(e=0;143>=e;)nt[2*e+1]=8,e++,o[8]++;for(;255>=e;)nt[2*e+1]=9,e++,o[9]++;for(;279>=e;)nt[2*e+1]=7,e++,o[7]++;for(;287>=e;)nt[2*e+1]=8,e++,o[8]++;for(d(nt,N+1,o),e=0;X>e;e++)ot[2*e+1]=5,ot[2*e]=l(e,5);ct=new ft(nt,$,j+1,N,q),dt=new ft(ot,et,0,X,q),ht=new ft(new Array(0),tt,0,H,Z)}function f(e){var t;for(t=0;N>t;t++)e.dyn_ltree[2*t]=0;for(t=0;X>t;t++)e.dyn_dtree[2*t]=0;for(t=0;H>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?o(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(e,t,r,i){p(e),i&&(o(e,r),o(e,~r)),z.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function g(e,t,r,i){var n=2*t,o=2*r;return e[n]<e[o]||e[n]===e[o]&&i[t]<=i[r]}function v(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&g(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!g(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function _(e,t,r){var i,o,l,u,c=0;if(0!==e.last_lit)do i=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],o=e.pending_buf[e.l_buf+c],c++,0===i?s(e,o,t):(l=st[o],s(e,l+j+1,t),u=$[l],0!==u&&(o-=lt[l],a(e,o,u)),i--,l=n(i),s(e,l,r),u=et[l],0!==u&&(i-=ut[l],a(e,i,u)));while(c<e.last_lit);s(e,Y,t)}function x(e,t){var r,i,n,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=W,r=0;l>r;r++)0!==o[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)n=e.heap[++e.heap_len]=2>u?++u:0,o[2*n]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=a[2*n+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)v(e,o,r);n=l;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],v(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,o[2*n]=o[2*r]+o[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,o[2*r+1]=o[2*i+1]=n,e.heap[1]=n++,v(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],c(e,t),d(o,u,e.bl_count)}function y(e,t,r){var i,n,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(r+1)+1]=65535,i=0;r>=i;i++)n=a,a=t[2*(i+1)+1],++s<l&&n===a||(u>s?e.bl_tree[2*n]+=s:0!==n?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[2*K]++):10>=s?e.bl_tree[2*J]++:e.bl_tree[2*Q]++,s=0,o=n,0===a?(l=138,u=3):n===a?(l=6,u=3):(l=7,u=4))}function b(e,t,r){var i,n,o=-1,l=t[1],u=0,c=7,d=4;for(0===l&&(c=138,d=3),i=0;r>=i;i++)if(n=l,l=t[2*(i+1)+1],!(++u<c&&n===l)){if(d>u)do s(e,n,e.bl_tree);while(0!==--u);else 0!==n?(n!==o&&(s(e,n,e.bl_tree),u--),s(e,K,e.bl_tree),a(e,u-3,2)):10>=u?(s(e,J,e.bl_tree),a(e,u-3,3)):(s(e,Q,e.bl_tree),a(e,u-11,7));u=0,o=n,0===l?(c=138,d=3):n===l?(c=6,d=3):(c=7,d=4)}}function w(e){var t;for(y(e,e.dyn_ltree,e.l_desc.max_code),y(e,e.dyn_dtree,e.d_desc.max_code),x(e,e.bl_desc),t=H-1;t>=3&&0===e.bl_tree[2*rt[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function E(e,t,r,i){var n;for(a(e,t-257,5),a(e,r-1,5),a(e,i-4,4),n=0;i>n;n++)a(e,e.bl_tree[2*rt[n]+1],3);b(e,e.dyn_ltree,t-1),b(e,e.dyn_dtree,r-1)}function M(e){var t,r=4093624447;for(t=0;31>=t;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return C;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return I;for(t=32;j>t;t++)if(0!==e.dyn_ltree[2*t])return I;return C}function T(e){mt||(h(),mt=!0),e.l_desc=new pt(e.dyn_ltree,ct),e.d_desc=new pt(e.dyn_dtree,dt),e.bl_desc=new pt(e.bl_tree,ht),e.bi_buf=0,e.bi_valid=0,f(e)}function R(e,t,r,i){a(e,(O<<1)+(i?1:0),3),m(e,t,r,!0)}function A(e){a(e,B<<1,3),s(e,Y,nt),u(e)}function S(e,t,r,i){var n,o,s=0;e.level>0?(e.strm.data_type===k&&(e.strm.data_type=M(e)),x(e,e.l_desc),x(e,e.d_desc),s=w(e),n=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,n>=o&&(n=o)):n=o=r+5,n>=r+4&&-1!==t?R(e,t,r,i):e.strategy===D||o===n?(a(e,(B<<1)+(i?1:0),3),_(e,nt,ot)):(a(e,(U<<1)+(i?1:0),3),E(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),_(e,e.dyn_ltree,e.dyn_dtree)),f(e),i&&p(e)}function P(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(st[r]+j+1)]++,e.dyn_dtree[2*n(t)]++),e.last_lit===e.lit_bufsize-1}var z=e("../utils/common"),D=4,C=0,I=1,k=2,O=0,B=1,U=2,L=3,F=258,V=29,j=256,N=j+1+V,X=30,H=19,W=2*N+1,q=15,G=16,Z=7,Y=256,K=16,J=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],et=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],it=512,nt=new Array(2*(N+2));i(nt);var ot=new Array(2*X);i(ot);var at=new Array(it);i(at);var st=new Array(F-L+1);i(st);var lt=new Array(V);i(lt);var ut=new Array(X);i(ut);var ct,dt,ht,ft=function(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length},pt=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},mt=!1;r._tr_init=T,r._tr_stored_block=R,r._tr_flush_block=S,r._tr_tally=P,r._tr_align=A},{"../utils/common":27}],39:[function(e,t){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}]},{},[9])(9)}),!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.JSZipUtils=e():"undefined"!=typeof global?global.JSZipUtils=e():"undefined"!=typeof self&&(self.JSZipUtils=e())}(function(){return function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return n(r?r:e)},u,u.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t){"use strict";function r(){try{return new window.XMLHttpRequest}catch(e){}}function i(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}var n={};n._getBinaryFromXHR=function(e){return e.response||e.responseText};var o=window.ActiveXObject?function(){return r()||i()}:r;n.getBinaryContent=function(e,t){try{var r=o();r.open("GET",e,!0),"responseType"in r&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(){var i,o;if(4===r.readyState)if(200===r.status||0===r.status){i=null,o=null;try{i=n._getBinaryFromXHR(r)}catch(e){o=new Error(e)}t(o,i)}else t(new Error("Ajax error for "+e+" : "+this.status+" "+this.statusText),null)},r.send()}catch(e){t(new Error(e),null)}},t.exports=n},{}]},{},[1])(1)}),/**@preserve
 * @license
 * @fileoverview gl-matrix - High performance matrix and vector operations
 * @author Brandon Jones
 * @author Colin MacKenzie IV
 * @version 2.2.2
 */
function(e){"use strict";var t={};"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.exports={},define(function(){return t.exports})):t.exports="undefined"!=typeof window?window:e:t.exports=exports,function(e){if(!t)var t=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;if(!i)var i=Math.random;var n={};n.setMatrixArrayType=function(e){r=e},"undefined"!=typeof e&&(e.glMatrix=n);var o=Math.PI/180;n.toRadian=function(e){return e*o};var a={};a.create=function(){var e=new r(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var t=new r(2);return t[0]=e[0],t[1]=e[1],t},a.fromValues=function(e,t){var i=new r(2);return i[0]=e,i[1]=t,i},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},a.set=function(e,t,r){return e[0]=t,e[1]=r,e},a.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},a.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e},a.sub=a.subtract,a.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},a.mul=a.multiply,a.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},a.div=a.divide,a.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},a.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},a.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},a.scaleAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e},a.distance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)},a.dist=a.distance,a.squaredDistance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},a.len=a.length,a.squaredLength=function(e){var t=e[0],r=e[1];return t*t+r*r},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},a.normalize=function(e,t){var r=t[0],i=t[1],n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.cross=function(e,t,r){var i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e},a.lerp=function(e,t,r,i){var n=t[0],o=t[1];return e[0]=n+i*(r[0]-n),e[1]=o+i*(r[1]-o),e},a.random=function(e,t){t=t||1;var r=2*i()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},a.transformMat2=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e},a.transformMat2d=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e},a.transformMat3=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e},a.transformMat4=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e},a.forEach=function(){var e=a.create();return function(t,r,i,n,o,a){var s,l;for(r||(r=2),i||(i=0),l=n?Math.min(n*r+i,t.length):t.length,s=i;l>s;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},"undefined"!=typeof e&&(e.vec2=a);var s={};s.create=function(){var e=new r(3);return e[0]=0,e[1]=0,e[2]=0,e},s.clone=function(e){var t=new r(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},s.fromValues=function(e,t,i){var n=new r(3);return n[0]=e,n[1]=t,n[2]=i,n},s.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},s.set=function(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e},s.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},s.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},s.sub=s.subtract,s.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},s.mul=s.multiply,s.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},s.div=s.divide,s.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},s.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},s.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},s.scaleAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e},s.distance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)},s.dist=s.distance,s.squaredDistance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n},s.sqrDist=s.squaredDistance,s.length=function(e){var t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)},s.len=s.length,s.squaredLength=function(e){var t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i},s.sqrLen=s.squaredLength,s.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},s.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},s.normalize=function(e,t){var r=t[0],i=t[1],n=t[2],o=r*r+i*i+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},s.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},s.cross=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=n*l-o*s,e[1]=o*a-i*l,e[2]=i*s-n*a,e},s.lerp=function(e,t,r,i){var n=t[0],o=t[1],a=t[2];return e[0]=n+i*(r[0]-n),e[1]=o+i*(r[1]-o),e[2]=a+i*(r[2]-a),e},s.random=function(e,t){t=t||1;var r=2*i()*Math.PI,n=2*i()-1,o=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=n*t,e},s.transformMat4=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[3]*i+r[7]*n+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*i+r[4]*n+r[8]*o+r[12])/a,e[1]=(r[1]*i+r[5]*n+r[9]*o+r[13])/a,e[2]=(r[2]*i+r[6]*n+r[10]*o+r[14])/a,e},s.transformMat3=function(e,t,r){var i=t[0],n=t[1],o=t[2];return e[0]=i*r[0]+n*r[3]+o*r[6],e[1]=i*r[1]+n*r[4]+o*r[7],e[2]=i*r[2]+n*r[5]+o*r[8],e},s.transformQuat=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*i+s*o-l*n,d=u*n+l*i-a*o,h=u*o+a*n-s*i,f=-a*i-s*n-l*o;return e[0]=c*u+f*-a+d*-l-h*-s,e[1]=d*u+f*-s+h*-a-c*-l,e[2]=h*u+f*-l+c*-s-d*-a,e},s.rotateX=function(e,t,r,i){var n=[],o=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],o[0]=n[0],o[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),o[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},s.rotateY=function(e,t,r,i){var n=[],o=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],o[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),o[1]=n[1],o[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},s.rotateZ=function(e,t,r,i){var n=[],o=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],o[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),o[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),o[2]=n[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},s.forEach=function(){var e=s.create();return function(t,r,i,n,o,a){var s,l;for(r||(r=3),i||(i=0),l=n?Math.min(n*r+i,t.length):t.length,s=i;l>s;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),s.angle=function(e,t){var r=s.fromValues(e[0],e[1],e[2]),i=s.fromValues(t[0],t[1],t[2]);s.normalize(r,r),s.normalize(i,i);var n=s.dot(r,i);return n>1?0:Math.acos(n)},s.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},"undefined"!=typeof e&&(e.vec3=s);var l={};l.create=function(){var e=new r(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},l.clone=function(e){var t=new r(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},l.fromValues=function(e,t,i,n){var o=new r(4);return o[0]=e,o[1]=t,o[2]=i,o[3]=n,o},l.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},l.set=function(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e},l.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},l.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e},l.sub=l.subtract,l.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},l.mul=l.multiply,l.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e},l.div=l.divide,l.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},l.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},l.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},l.scaleAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e},l.distance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+o*o)},l.dist=l.distance,l.squaredDistance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return r*r+i*i+n*n+o*o},l.sqrDist=l.squaredDistance,l.length=function(e){var t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)},l.len=l.length,l.squaredLength=function(e){var t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n},l.sqrLen=l.squaredLength,l.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},l.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},l.normalize=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=r*r+i*i+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a),e},l.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},l.lerp=function(e,t,r,i){var n=t[0],o=t[1],a=t[2],s=t[3];return e[0]=n+i*(r[0]-n),e[1]=o+i*(r[1]-o),e[2]=a+i*(r[2]-a),e[3]=s+i*(r[3]-s),e},l.random=function(e,t){return t=t||1,e[0]=i(),e[1]=i(),e[2]=i(),e[3]=i(),l.normalize(e,e),l.scale(e,e,t),e},l.transformMat4=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*o+r[12]*a,e[1]=r[1]*i+r[5]*n+r[9]*o+r[13]*a,e[2]=r[2]*i+r[6]*n+r[10]*o+r[14]*a,e[3]=r[3]*i+r[7]*n+r[11]*o+r[15]*a,e},l.transformQuat=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*i+s*o-l*n,d=u*n+l*i-a*o,h=u*o+a*n-s*i,f=-a*i-s*n-l*o;return e[0]=c*u+f*-a+d*-l-h*-s,e[1]=d*u+f*-s+h*-a-c*-l,e[2]=h*u+f*-l+c*-s-d*-a,e},l.forEach=function(){var e=l.create();return function(t,r,i,n,o,a){var s,l;for(r||(r=4),i||(i=0),l=n?Math.min(n*r+i,t.length):t.length,s=i;l>s;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),l.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.vec4=l);var u={};u.create=function(){var e=new r(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},u.clone=function(e){var t=new r(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},u.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},u.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},u.transpose=function(e,t){if(e===t){var r=t[1],i=t[2],n=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=n,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},u.invert=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15],_=r*s-i*a,x=r*l-n*a,y=r*u-o*a,b=i*l-n*s,w=i*u-o*s,E=n*u-o*l,M=c*m-d*p,T=c*g-h*p,R=c*v-f*p,A=d*g-h*m,S=d*v-f*m,P=h*v-f*g,z=_*P-x*S+y*A+b*R-w*T+E*M;return z?(z=1/z,e[0]=(s*P-l*S+u*A)*z,e[1]=(n*S-i*P-o*A)*z,e[2]=(m*E-g*w+v*b)*z,e[3]=(h*w-d*E-f*b)*z,e[4]=(l*R-a*P-u*T)*z,e[5]=(r*P-n*R+o*T)*z,e[6]=(g*y-p*E-v*x)*z,e[7]=(c*E-h*y+f*x)*z,e[8]=(a*S-s*R+u*M)*z,e[9]=(i*R-r*S-o*M)*z,e[10]=(p*w-m*y+v*_)*z,e[11]=(d*y-c*w-f*_)*z,e[12]=(s*T-a*A-l*M)*z,e[13]=(r*A-i*T+n*M)*z,e[14]=(m*x-p*b-g*_)*z,e[15]=(c*b-d*x+h*_)*z,e):null},u.adjoint=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(h*v-f*g)-d*(l*v-u*g)+m*(l*f-u*h),e[1]=-(i*(h*v-f*g)-d*(n*v-o*g)+m*(n*f-o*h)),e[2]=i*(l*v-u*g)-s*(n*v-o*g)+m*(n*u-o*l),e[3]=-(i*(l*f-u*h)-s*(n*f-o*h)+d*(n*u-o*l)),e[4]=-(a*(h*v-f*g)-c*(l*v-u*g)+p*(l*f-u*h)),e[5]=r*(h*v-f*g)-c*(n*v-o*g)+p*(n*f-o*h),e[6]=-(r*(l*v-u*g)-a*(n*v-o*g)+p*(n*u-o*l)),e[7]=r*(l*f-u*h)-a*(n*f-o*h)+c*(n*u-o*l),e[8]=a*(d*v-f*m)-c*(s*v-u*m)+p*(s*f-u*d),e[9]=-(r*(d*v-f*m)-c*(i*v-o*m)+p*(i*f-o*d)),e[10]=r*(s*v-u*m)-a*(i*v-o*m)+p*(i*u-o*s),e[11]=-(r*(s*f-u*d)-a*(i*f-o*d)+c*(i*u-o*s)),e[12]=-(a*(d*g-h*m)-c*(s*g-l*m)+p*(s*h-l*d)),e[13]=r*(d*g-h*m)-c*(i*g-n*m)+p*(i*h-n*d),e[14]=-(r*(s*g-l*m)-a*(i*g-n*m)+p*(i*l-n*s)),e[15]=r*(s*h-l*d)-a*(i*h-n*d)+c*(i*l-n*s),e},u.determinant=function(e){var t=e[0],r=e[1],i=e[2],n=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=t*a-r*o,_=t*s-i*o,x=t*l-n*o,y=r*s-i*a,b=r*l-n*a,w=i*l-n*s,E=u*p-c*f,M=u*m-d*f,T=u*g-h*f,R=c*m-d*p,A=c*g-h*p,S=d*g-h*m;return v*S-_*A+x*R+y*T-b*M+w*E},u.multiply=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],g=t[13],v=t[14],_=t[15],x=r[0],y=r[1],b=r[2],w=r[3];return e[0]=x*i+y*s+b*d+w*m,e[1]=x*n+y*l+b*h+w*g,e[2]=x*o+y*u+b*f+w*v,e[3]=x*a+y*c+b*p+w*_,x=r[4],y=r[5],b=r[6],w=r[7],e[4]=x*i+y*s+b*d+w*m,e[5]=x*n+y*l+b*h+w*g,e[6]=x*o+y*u+b*f+w*v,e[7]=x*a+y*c+b*p+w*_,x=r[8],y=r[9],b=r[10],w=r[11],e[8]=x*i+y*s+b*d+w*m,e[9]=x*n+y*l+b*h+w*g,e[10]=x*o+y*u+b*f+w*v,e[11]=x*a+y*c+b*p+w*_,x=r[12],y=r[13],b=r[14],w=r[15],e[12]=x*i+y*s+b*d+w*m,e[13]=x*n+y*l+b*h+w*g,e[14]=x*o+y*u+b*f+w*v,e[15]=x*a+y*c+b*p+w*_,e},u.mul=u.multiply,u.translate=function(e,t,r){var i,n,o,a,s,l,u,c,d,h,f,p,m=r[0],g=r[1],v=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],e[0]=i,e[1]=n,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=h,e[10]=f,e[11]=p,e[12]=i*m+s*g+d*v+t[12],e[13]=n*m+l*g+h*v+t[13],e[14]=o*m+u*g+f*v+t[14],e[15]=a*m+c*g+p*v+t[15]),e},u.scale=function(e,t,r){var i=r[0],n=r[1],o=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},u.rotate=function(e,r,i,n){var o,a,s,l,u,c,d,h,f,p,m,g,v,_,x,y,b,w,E,M,T,R,A,S,P=n[0],z=n[1],D=n[2],C=Math.sqrt(P*P+z*z+D*D);return Math.abs(C)<t?null:(C=1/C,P*=C,z*=C,D*=C,o=Math.sin(i),a=Math.cos(i),s=1-a,l=r[0],u=r[1],c=r[2],d=r[3],h=r[4],f=r[5],p=r[6],m=r[7],g=r[8],v=r[9],_=r[10],x=r[11],y=P*P*s+a,b=z*P*s+D*o,w=D*P*s-z*o,E=P*z*s-D*o,M=z*z*s+a,T=D*z*s+P*o,R=P*D*s+z*o,A=z*D*s-P*o,S=D*D*s+a,e[0]=l*y+h*b+g*w,e[1]=u*y+f*b+v*w,e[2]=c*y+p*b+_*w,e[3]=d*y+m*b+x*w,e[4]=l*E+h*M+g*T,e[5]=u*E+f*M+v*T,e[6]=c*E+p*M+_*T,e[7]=d*E+m*M+x*T,e[8]=l*R+h*A+g*S,e[9]=u*R+f*A+v*S,e[10]=c*R+p*A+_*S,e[11]=d*R+m*A+x*S,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)},u.rotateX=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+u*i,e[5]=a*n+c*i,e[6]=s*n+d*i,e[7]=l*n+h*i,e[8]=u*n-o*i,e[9]=c*n-a*i,e[10]=d*n-s*i,e[11]=h*n-l*i,e},u.rotateY=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-u*i,e[1]=a*n-c*i,e[2]=s*n-d*i,e[3]=l*n-h*i,e[8]=o*i+u*n,e[9]=a*i+c*n,e[10]=s*i+d*n,e[11]=l*i+h*n,e},u.rotateZ=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+u*i,e[1]=a*n+c*i,e[2]=s*n+d*i,e[3]=l*n+h*i,e[4]=u*n-o*i,e[5]=c*n-a*i,e[6]=d*n-s*i,e[7]=h*n-l*i,e},u.fromRotationTranslation=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=i+i,l=n+n,u=o+o,c=i*s,d=i*l,h=i*u,f=n*l,p=n*u,m=o*u,g=a*s,v=a*l,_=a*u;return e[0]=1-(f+m),e[1]=d+_,e[2]=h-v,e[3]=0,e[4]=d-_,e[5]=1-(c+m),e[6]=p+g,e[7]=0,e[8]=h+v,e[9]=p-g,e[10]=1-(c+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},u.fromQuat=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=r+r,s=i+i,l=n+n,u=r*a,c=i*a,d=i*s,h=n*a,f=n*s,p=n*l,m=o*a,g=o*s,v=o*l;return e[0]=1-d-p,e[1]=c+v,e[2]=h-g,e[3]=0,e[4]=c-v,e[5]=1-u-p,e[6]=f+m,e[7]=0,e[8]=h+g,e[9]=f-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},u.frustum=function(e,t,r,i,n,o,a){var s=1/(r-t),l=1/(n-i),u=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+i)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e},u.perspective=function(e,t,r,i,n){var o=1/Math.tan(t/2),a=1/(i-n);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+i)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*i*a,e[15]=0,e},u.ortho=function(e,t,r,i,n,o,a){var s=1/(t-r),l=1/(i-n),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*l,e[14]=(a+o)*u,e[15]=1,e},u.lookAt=function(e,r,i,n){var o,a,s,l,c,d,h,f,p,m,g=r[0],v=r[1],_=r[2],x=n[0],y=n[1],b=n[2],w=i[0],E=i[1],M=i[2];return Math.abs(g-w)<t&&Math.abs(v-E)<t&&Math.abs(_-M)<t?u.identity(e):(h=g-w,f=v-E,p=_-M,m=1/Math.sqrt(h*h+f*f+p*p),h*=m,f*=m,p*=m,o=y*p-b*f,a=b*h-x*p,s=x*f-y*h,m=Math.sqrt(o*o+a*a+s*s),m?(m=1/m,o*=m,a*=m,s*=m):(o=0,a=0,s=0),l=f*s-p*a,c=p*o-h*s,d=h*a-f*o,m=Math.sqrt(l*l+c*c+d*d),m?(m=1/m,l*=m,c*=m,d*=m):(l=0,c=0,d=0),e[0]=o,e[1]=l,e[2]=h,e[3]=0,e[4]=a,e[5]=c,e[6]=f,e[7]=0,e[8]=s,e[9]=d,e[10]=p,e[11]=0,e[12]=-(o*g+a*v+s*_),e[13]=-(l*g+c*v+d*_),e[14]=-(h*g+f*v+p*_),e[15]=1,e)},u.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},u.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},"undefined"!=typeof e&&(e.mat4=u)}(t.exports)}(this),/**
 @preserve
 https://github.com/frenchtoast747/webgl-obj-loader
 Copyright (c) 2013 Aaron Boman and aaronboman.com
*/
function(e,t){"use strict";var r={};"undefined"!=typeof module?module.exports=r:e.OBJ=r,r.Mesh=function(e){var t=[],r=[],i=[],n={};n.verts=[],n.norms=[],n.textures=[],n.hashindices={},n.indices=[],n.index=0;for(var o=e.split("\n"),a=/^v\s/,s=/^vn\s/,l=/^vt\s/,u=/^f\s/,c=/\s+/,d=0;d<o.length;d++){var h=o[d].trim(),f=h.split(c);if(f.shift(),a.test(h))t.push.apply(t,f);else if(s.test(h))r.push.apply(r,f);else if(l.test(h))i.push.apply(i,f);else if(u.test(h))for(var p=!1,m=0,g=f.length;g>m;m++){if(3!==m||p||(m=2,p=!0),f[m]in n.hashindices)n.indices.push(n.hashindices[f[m]]);else{var v=f[m].split("/");n.verts.push(+t[3*(v[0]-1)+0]),n.verts.push(+t[3*(v[0]-1)+1]),n.verts.push(+t[3*(v[0]-1)+2]),i.length&&(n.textures.push(+i[2*(v[1]-1)+0]),n.textures.push(+i[2*(v[1]-1)+1])),n.norms.push(+r[3*(v[2]-1)+0]),n.norms.push(+r[3*(v[2]-1)+1]),n.norms.push(+r[3*(v[2]-1)+2]),n.hashindices[f[m]]=n.index,n.indices.push(n.index),n.index+=1}3===m&&p&&n.indices.push(n.hashindices[f[0]])}}this.vertices=n.verts,this.vertexNormals=n.norms,this.textures=n.textures,this.indices=n.indices};var i=function(){var e=this;this.xmlhttp=new XMLHttpRequest,this.get=function(t,r){e.xmlhttp.onreadystatechange=function(){4===e.xmlhttp.readyState&&r(e.xmlhttp.responseText,e.xmlhttp.status)},e.xmlhttp.open("GET",t,!0),e.xmlhttp.send()}};r.downloadMeshes=function(e,n,o){var a=Object.keys(e).length,s=!1;o===t&&(o={});for(var l in e)e.hasOwnProperty(l)&&(new i).get(e[l],function(e){return function(t,i){if(200===i?o[e]=new r.Mesh(t):(s=!0,console.error('An error has occurred and the mesh "'+e+'" could not be downloaded.')),a--,0===a){if(s)throw console.error("An error has occurred and one or meshes has not been downloaded. The execution of the script has terminated."),"";n(o)}}}(l))};var n=function(e,t,r,i){var n=e.createBuffer(),o=t===e.ARRAY_BUFFER?Float32Array:Uint16Array;return e.bindBuffer(t,n),e.bufferData(t,new o(r),e.STATIC_DRAW),n.itemSize=i,n.numItems=r.length/i,n};r.initMeshBuffers=function(e,t){t.normalBuffer=n(e,e.ARRAY_BUFFER,t.vertexNormals,3),t.textureBuffer=n(e,e.ARRAY_BUFFER,t.textures,2),t.vertexBuffer=n(e,e.ARRAY_BUFFER,t.vertices,3),t.indexBuffer=n(e,e.ELEMENT_ARRAY_BUFFER,t.indices,1)},r.deleteMeshBuffers=function(e,t){e.deleteBuffer(t.normalBuffer),e.deleteBuffer(t.textureBuffer),e.deleteBuffer(t.vertexBuffer),e.deleteBuffer(t.indexBuffer)}}(this),/**
@preserve

Curlify - A javascript webgl framework
<http://curlify.io>

(c) 2013-2015 Curlify LLC
*/
function(){var curScript=document.currentScript||document._currentScript;console.log("initialize curlify",curScript),curScript.curlify={modules:{},localVars:{},extract:function(obj,objId){var code=[];for(var i in obj)if(obj.hasOwnProperty(i))try{eval("var "+i),code.push("var "+i+"="+objId+'["'+i+'"]')}catch(e){}return code.join(";")},module:function(e,t){null!=this.modules[e]&&console.log("WARNING: overwriting module",e),null==t&&console.log("ERROR: setting null code as module '"+e+"'"),this.modules[e]=t},getModule:function(e){return this.modules[e]},clearModuleBuffersAndPrograms:function(){console.log("clearModuleBuffersAndPrograms()");for(var e in this.modules){var t=this.modules[e];console.log("checking",t.id),null!=t.default_program&&(console.log("clearing module program",t.id),t.default_program.glProgram=null),null!=t.buffer&&(console.log("clearing module buffer",t.id),t.buffer=null)}}},curScript.curlify.localVars.sensors={acceleration:null,rotationRate:null,orientation:{alpha:0,beta:0,gamma:0},damped_orientation:{alpha:0,beta:0,gamma:0,inertia:10}},curScript.curlify.localVars.zipfile=null,curScript.curlify.localVars.layoutWidth=null,curScript.curlify.localVars.layoutHeight=null,curScript.curlify.localVars.layoutOffset={x:0,y:0},curScript.curlify.localVars.layoutScale={x:1,y:1},curScript.curlify.localVars.gl=null,curScript.curlify.localVars.camera=null,curScript.curlify.localVars.viewWidth=null,curScript.curlify.localVars.viewHeight=null,curScript.curlify.localVars.screenWidth=null,curScript.curlify.localVars.screenHeight=null}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize glutils module");var e=function(e){window.console&&(window.console.error?window.console.error(e):window.console.log&&window.console.log(e))},t=function(t,r,i,n){var o=n||e,a=t.createShader(i);t.shaderSource(a,r),t.compileShader(a);var s=t.getShaderParameter(a,t.COMPILE_STATUS);return s?a:(lastError=t.getShaderInfoLog(a),o("*** Error compiling shader '"+a+"':"+lastError),t.deleteShader(a),null)};return{loadProgram:function(t,r,i,n){for(var o={},a=t.createProgram(),s=0;s<r.length;++s)t.attachShader(a,r[s]);t.linkProgram(a);var l=t.getProgramParameter(a,t.LINK_STATUS);if(!l)return lastError=t.getProgramInfoLog(a),e("Error in program linking:"+lastError),t.deleteProgram(a),null;if(i)for(var s=0;s<i.length;++s){var u=i[s]+"_handle";o[u]=t.getAttribLocation(a,i[s])}if(n)for(var s=0;s<n.length;++s){var u=n[s]+"_handle";o[u]=t.getUniformLocation(a,n[s])}return o.program=a,o},createShader:function(e,r,i,n){var o,a=r.text;if(!i)if("x-shader/x-vertex"==r.type)o=e.VERTEX_SHADER;else if("x-shader/x-fragment"==r.type)o=e.FRAGMENT_SHADER;else if(o!=e.VERTEX_SHADER&&o!=e.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return t(e,a,i?i:o,n)}}}();t.module("glutils",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){return console.log("initialize sys module"),{timestamp:function(){return Date.now()},ismobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},FireFox:function(){return navigator.userAgent.match(/Firefox/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.ismobile.Android()||r.ismobile.BlackBerry()||r.ismobile.iOS()||r.ismobile.Opera()||r.ismobile.Windows()}}}}();t.module("sys",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize fps module");var e=t.getModule("sys"),r=0,i=0;return{updateFps:function(){if(100==r){r=0;var t=e.timestamp(),n=1e5/(t-i);console.log("FPS : "+n),i=t}r+=1}}}();t.module("fps",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize animator module");var e=t.getModule("sys"),i={time:!0,ease:!0,start:!0,onComplete:!0};return{new:function(){var n={animations:[],animate:function(n,o){null==o.ease&&(o.ease=r.linear),null==o.start&&(o.start=0);var a=[],s=[],l=[];for(var u in o){var c=o[u];null==i[u]&&(null==n[u]?console.log("ERROR: Animated property cannot be initially nil : "+u):(a.push(u),s.push(n[u]),l.push(c)))}this.animations.push({keys:a,target:n,start:e.timestamp()+o.start,deadline:e.timestamp()+o.start+o.time,config:o,init:s,final:l}),t.requestRender()},step:function(){for(var e=[],t=Date.now(),r=null,i=0;i<this.animations.length;i++){r=i;var n=this.animations[r],o=(n.deadline,0);1==n.paused&&(t=n.pausetimestamp),t<n.deadline?o=1-(n.deadline-t)/n.config.time:t<n.start?o=0:(o=1,e.push(r)),o=Math.max(o,1e-5);for(var a=0;a<n.keys.length;a++){var s=n.keys[a],l=n.init[a],u=n.final[a];n.target[s]=n.config.ease(l,u,o)}}for(a=e.length-1;a>=0;a--){var c=this.animations[e[a]].config.onComplete;this.animations.splice(e[a],1),null!=c&&c()}},pause:function(){for(var t in this.animations)this.animations[t].paused=!0,this.animations[t].pausetimestamp=e.timestamp()},resume:function(){for(var r in this.animations)this.animations[r].paused=!1,this.animations[r].deadline=this.animations[r].deadline+(e.timestamp()-this.animations[r].pausetimestamp);t.requestRender()},stop:function(){for(var e in this.animations)this.animations[e].keys=[],this.animations[e].init=[],this.animations[e].final=[],this.animations[e].config.onComplete=null;this.animations=[]}};return n}}}();r.linear=function(e,t,r){return e+(t-e)*r},r.inQuad=function(e,t,r){return e+(t-e)*r*r},r.outQuad=function(e,t,r){return e+-(t-e)*r*(r-2)},r.inOutQuad=function(e,t,r){return.5>r?(r=2*r,e+(t-e)/2*r*r):(r=2*(r-.5),e-(t-e)/2*(r*(r-2)-1))},r.inCubic=function(e,t,r){return e+(t-e)*r*r*r},r.outCubic=function(e,t,r){return r-=1,e+(t-e)*(r*r*r+1)},r.inOutCubic=function(e,t,r){return.5>r?(r=2*r,e+(t-e)/2*r*r*r):(r=2*(r-.5)-1,e+(t-e)/2*(r*r*r+2))},r.inQuart=function(e,t,r){return e+(t-e)*r*r*r*r},r.outQuart=function(e,t,r){return r-=1,e-(t-e)*(r*r*r*r-1)},r.inOutQuart=function(e,t,r){return.5>r?(r=2*r,e+(t-e)/2*r*r*r*r):(r=2*(r-.5)-1,e-(t-e)/2*(r*r*r*r-2))},r.inSine=function(e,t,r){return e+(t-e)*(1-Math.cos(r*Math.PI/2))},r.outSine=function(e,t,r){return e+(t-e)*Math.sin(r*Math.PI/2)},r.inOutSine=function(e,t,r){return e-(t-e)/2*(Math.cos(Math.PI*r)-1)},r.inExpo=function(e,t,r){return r-=1,e+(t-e)*Math.pow(2,10*r)},r.outExpo=function(e,t,r){return e+(t-e)*(1-Math.pow(2,-10*r))},r.inOutExpo=function(e,t,r){return.5>r?(r=2*r-1,e+(t-e)/2*Math.pow(2,10*r)):(r=2*(r-.5),e+(t-e)/2*(2-Math.pow(2,-10*r)))},r.inCirc=function(e,t,r){return e+(t-e)*(1-Math.sqrt(1-r*r))},r.outCirc=function(e,t,r){return r-=1,e+(t-e)*Math.sqrt(1-r*r)},r.inOutCirc=function(e,t,r){return.5>r?(r=2*r,e+(t-e)/2*(1-Math.sqrt(1-r*r))):(r=2*(r-.5)-1,e+(t-e)/2*(1+Math.sqrt(1-r*r)))},r.inElastic=function(e,t,r){return r-=1,e-(t-e)*Math.pow(2,10*r)*Math.sin(6*(r-.0777777)*Math.PI)},r.outElastic=function(e,t,r){return e+(t-e)*(Math.pow(2,-10*r)*Math.sin(6*(r-.0777777)*Math.PI)+1)},t.module("animator",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize scene module");var e=t.getModule("animator"),r=t.getModule("sys"),i=[],n=[],o=e.new(),a=null,s=0,l=function(e,t,r,i){i>100&&(i=100);var n=1;e>t&&(n=-1);var o=-n*i/(16.66*r)*Math.abs(e-t);return Math.abs(o)<1e-4?e=t:e-=o,1==n&&e>t&&(e=t),-1==n&&t>e&&(e=t),e},u=function(e,t,r,i,n){var o=t[r]-e[r];if(Math.abs(o)>i){var a=o/Math.abs(o);t[r]=l(t[r],e[r]+360*a,t.inertia,n),-1==a&&t[r]<-180&&(t[r]=t[r]+360),1==a&&t[r]>180&&(t[r]=t[r]-360)}else t[r]=l(t[r],e[r],t.inertia,n)};return{render:function(){var e=(t.localVars.gl,r.timestamp()-s);if(s=r.timestamp(),u(t.localVars.sensors.orientation,t.localVars.sensors.damped_orientation,"alpha",180,e),u(t.localVars.sensors.orientation,t.localVars.sensors.damped_orientation,"beta",180,e),u(t.localVars.sensors.orientation,t.localVars.sensors.damped_orientation,"gamma",180,e),o.step(),o.animations.length>0){var a=i[i.length-2];a.stepTree(),a.drawTree()}var l=i[i.length-1];if(null!=l){l.stepTree(),l.drawTree();for(var c=0;c<n.length;c++)!new function(){var e=n[c];e.renderFbo()};n=[]}},openScene:function(e,t,r){var n=i[i.length-1];i.push(e),null!=t&&o.animate(e,t),null!=n&&null!=r&&o.animate(n,r)},closeScene:function(e,t){var r=i[i.length-1],n=i[i.length-2];if(null!=e){var a=e.onComplete,s=function(){null!=a&&a(),i.splice(i.length-1,1),console.log("remove scene from stack",r.identifier,i.length)};e.onComplete=s,o.animate(r,e)}else i.splice(i.length-1,1);null!=n&&null!=t&&o.animate(n,t)},replaceScene:function(e,t,r){var n=i[i.length-1];if(i.push(e),null!=t){var a=t.onComplete,s=function(){null!=a&&a(),i.splice(i.length-2,1),console.log("remove scene from stack",n.identifier,i.length)};t.onComplete=s,o.animate(e,t)}else i.splice(i.length-2,1);null!=n&&null!=r&&o.animate(n,r)},removeAllScenes:function(){i=[],n=[],o.stop(),a=null},isAnimating:function(){return o.animations.length>0?!0:!1},getPointerUser:function(){return a?a:i[i.length-1]},getpointerStealer:function(){return a},stealPointers:function(e){console.log("stealPointers",e);var t=a?a:i[i.length-1];a=e,t.resetpress()},resetPointerStealer:function(){a=null},addFboUpdate:function(e){n.push(e)},layoutChanged:function(){for(var e=0;e<i.length;e++)i[e].layoutChangedTree()}}}();t.module("scene",r)}(),function(){var curScript=document.currentScript||document._currentScript,curlify=curScript.curlify,object=function(){function array_move(e,t,r){if(r>=e.length)for(var i=r-e.length;i--+1;)e.push(void 0);return e.splice(r,0,e.splice(t,1)[0]),e}console.log("initialize object module");var scene=curlify.getModule("scene"),animator=curlify.getModule("animator"),sys=curlify.getModule("sys");return{new:function(ident,width,height){return eval(curlify.extract(curlify.localVars,"curlify.localVars")),{identifier:null==ident?"object identifier":ident,position:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},origo:{x:0,y:0,z:0},size:{width:null==width?screenWidth:width,height:null==height?screenHeight:height},children:[],active:!0,visible:!0,alpha:1,blend:!0,drawbackside:!1,depthtest:!1,disableGlStateUpdates:!1,projectionMatrix:camera.projectionMatrix,viewMatrix:camera.viewMatrix,modelMatrix:mat4.create(),modelViewMatrix:mat4.create(),origoMatrix:mat4.create(),translateScale:camera.translateScale,anim:animator.new(),timervalue:0,laststep:0,add:function(e){return e.parent=this,this.children.push(e),e},updateModelMatrix:function(){if(mat4.identity(this.modelMatrix),0!=this.position.x||0!=this.position.y||0!=this.position.z){var e=screenWidth/(2*this.translateScale);mat4.translate(this.modelMatrix,this.modelMatrix,vec3.clone([this.position.x/e,-this.position.y/e,this.position.z/e]))}if(0!=this.rotate.z&&mat4.rotateZ(this.modelMatrix,this.modelMatrix,-this.rotate.z),0!=this.rotate.y&&mat4.rotateY(this.modelMatrix,this.modelMatrix,-this.rotate.y),0!=this.rotate.x&&mat4.rotateX(this.modelMatrix,this.modelMatrix,-this.rotate.x),(1!=this.scale.x||1!=this.scale.y||1!=this.scale.z)&&mat4.scale(this.modelMatrix,this.modelMatrix,vec3.clone([this.scale.x,this.scale.y,this.scale.z])),0!=this.origo.x||0!=this.origo.y||0!=this.origo.z){var e=screenWidth/(2*this.translateScale);mat4.translate(this.modelMatrix,this.modelMatrix,vec3.clone([-this.origo.x/e,this.origo.y/e,-this.origo.z/e]))}},update:function(){if(null!=this.parent&&null!=this.parent.modelViewMatrix&&(this.viewMatrix=this.parent.modelViewMatrix),0!=this.origo.x||0!=this.origo.y||0!=this.origo.z){var e=screenWidth/(2*this.translateScale);mat4.identity(this.origoMatrix),mat4.translate(this.origoMatrix,this.origoMatrix,vec3.clone([this.origo.x/e,-this.origo.y/e,this.origo.z/e])),mat4.multiply(this.viewMatrix,this.viewMatrix,this.origoMatrix)}this.updateModelMatrix(),this.children.length>0&&(mat4.copy(this.modelViewMatrix,this.viewMatrix),mat4.multiply(this.modelViewMatrix,this.modelViewMatrix,this.modelMatrix))},updateGlStates:function(){this.depthtest?(gl.enable(gl.DEPTH_TEST),gl.depthFunc(gl.LEQUAL)):gl.disable(gl.DEPTH_TEST),0==this.blend?gl.disable(gl.BLEND):(gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)),1==this.drawbackside?gl.disable(gl.CULL_FACE):(gl.enable(gl.CULL_FACE),gl.cullFace(gl.FRONT))},stepTree:function(){if(this.anim.step(),null!=this.preStep&&this.preStep(),null!=this.step){var e=Math.max(1,Math.min(sys.timestamp()-this.laststep,60));this.laststep=sys.timestamp(),this.step(e)}for(var t=0;t<this.children.length;t++)this.children[t].stepTree();null!=this.postStep&&this.postStep()},drawTree:function(){if(0!=this.visible){if(this.update(),1!=this.disableGlStateUpdates&&this.updateGlStates(),null!=this.preDraw&&this.preDraw(),null!=this.draw&&this.draw(),this.reverseDrawOrder)for(var e=this.children.length-1;e>=0;e--)this.children[e].drawTree();else for(var e=0;e<this.children.length;e++)this.children[e].drawTree();null!=this.postDraw&&this.postDraw()}},layoutChangedTree:function(){for(var e=0;e<this.children.length;e++)this.children[e].layoutChangedTree();null!=this.layoutChanged&&this.layoutChanged()},press:function(e,t){var r=!1;if(null!=this.relativePress){var i=e-screenWidth/2-this.absolutex(),n=t-screenHeight/2-this.absolutey();r=this.relativePress(i,n)}null!=this.absolutePress&&(r=this.absolutePress(e,t));for(var o=this.children.length-1;o>=0;o--)this.children[o].active&&(r=this.children[o].press(e,t));return r},drag:function(e,t){var r=!1;if(null!=this.relativeDrag){var i=e-screenWidth/2-this.absolutex(),n=t-screenHeight/2-this.absolutey();r=this.relativeDrag(i,n)}null!=this.absoluteDrag&&(r=this.absoluteDrag(e,t));for(var o=this.children.length-1;o>=0;o--)this.children[o].active&&(r=this.children[o].drag(e,t));return r},release:function(e,t){var r=!1;if(null!=this.relativeRelease){var i=e-screenWidth/2-this.absolutex(),n=t-screenHeight/2-this.absolutey();r=this.relativeRelease(i,n)}null!=this.absoluteRelease&&(r=this.absoluteRelease(e,t));for(var o=this.children.length-1;o>=0;o--)this.children[o].active&&(r=this.children[o].release(e,t));return r},swipe:function(e){for(var t=!1,r=this.children.length-1;r>=0;r--)this.children[r].active&&(t=this.children[r].swipe(e));var i=Math.abs(e.x),n=Math.abs(e.y);return i>n?e.x>0?this.swipeLeft?this.swipeLeft(i):!1:this.swipeRight?this.swipeRight(i):!1:e.y>0?this.swipeUp?this.swipeUp(n):!1:this.swipeDown?this.swipeDown(n):!1},resetpress:function(){if(1==this.active){for(var e=this.children.length-1;e>=0;e--)this.children[e].resetpress();this!=scene.getpointerStealer()&&null!=this.pointerReset&&this.pointerReset()}},x:function(){return this.position.x},y:function(){return this.position.y},width:function(){return this.size.width*this.scale.x},height:function(){return this.size.height*this.scale.y},top:function(){return this.position.y-this.height()/2},bottom:function(){return this.position.y+this.height()/2},left:function(){return this.position.x-this.width()/2},right:function(){return this.position.x+this.width()/2},absolutex:function(){var e=0;return null!=this.parent&&(e=this.parent.absolutex()),e+this.x()},absolutey:function(){var e=0;return null!=this.parent&&(e=this.parent.absolutey()),e+this.y()},absolutescalex:function(){var e=1;return null!=this.parent&&(e=this.parent.absolutescalex()),e*this.scale.x},absolutescaley:function(){var e=1;return null!=this.parent&&(e=this.parent.absolutescaley()),e*this.scale.y},absolutealpha:function(){var e=1;return null!=this.parent&&(e=this.parent.absolutealpha()),e*this.alpha},activate:function(){this.active=!0,null!=this.postActivate&&this.postActivate()},deactivate:function(){this.active=!1,null!=this.postDeactivate&&this.postDeactivate()},removeSelf:function(){if(null!=this.parent)for(var e=0;e<this.parent.children.length;e++)if(this.parent.children[e]==this){console.log("removing: "+this.identifier+" from "+this.parent.identifier),this.parent.children.splice(e,1);break}},bringToFront:function(){if(null!=this.parent)for(var e=0;e<this.parent.children.length;e++)if(this==this.parent.children[e]){array_move(this.parent.children,e,this.parent.children.length-1);break}}}}}}();curlify.module("object",object)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize quad module");var e=t.getModule("glutils"),i=t.getModule("object");return{buffer:null,default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"              attribute vec2 a_position;              attribute vec2 a_tex_coordinate;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            varying vec2 v_tex_coord;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);                v_tex_coord = a_tex_coordinate;              }            ",type:"x-shader/x-vertex"},i={text:"              precision mediump float;                            varying vec2      v_tex_coord;                            uniform sampler2D u_texture;              uniform float     u_alpha;                            void main() {                vec4 color = texture2D(u_texture, v_tex_coord);                gl_FragColor = vec4(color.rgb, color.a * u_alpha);              }            ",type:"x-shader/x-fragment"},n=t.localVars.gl,o=e.createShader(n,r),a=e.createShader(n,i);this.glProgram=e.loadProgram(n,[o,a],["a_position","a_tex_coordinate"],["u_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,n,o){var a=t.localVars.gl,s=t.localVars.screenWidth;if(null==this.buffer){this.buffer=a.createBuffer(),this.buffer.itemSize=2,this.buffer.numItems=4,a.bindBuffer(a.ARRAY_BUFFER,this.buffer);var l=[-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1];a.bufferData(a.ARRAY_BUFFER,new Float32Array(l),a.STATIC_DRAW)}var u=i.new(e,n,o);return u.glProgram=this.default_program.getProgram(),u.quadModelMatrix=mat4.create(),u.updateModelMatrix=function(){if(mat4.identity(this.modelMatrix),0!=this.position.x||0!=this.position.y||0!=this.position.z){var e=s/(2*this.translateScale);mat4.translate(this.modelMatrix,this.modelMatrix,[this.position.x/e,-this.position.y/e,this.position.z/e])}if(0!=this.rotate.z&&mat4.rotateZ(this.modelMatrix,this.modelMatrix,-this.rotate.z),0!=this.rotate.y&&mat4.rotateY(this.modelMatrix,this.modelMatrix,-this.rotate.y),0!=this.rotate.x&&mat4.rotateX(this.modelMatrix,this.modelMatrix,-this.rotate.x),(1!=this.scale.x||1!=this.scale.y||1!=this.scale.z)&&mat4.scale(this.modelMatrix,this.modelMatrix,[this.scale.x,this.scale.y,this.scale.z]),0!=this.origo.x||0!=this.origo.y||0!=this.origo.z){var e=s/(2*this.translateScale);mat4.translate(this.modelMatrix,this.modelMatrix,vec3.clone([-this.origo.x/e,this.origo.y/e,-this.origo.z/e]))}mat4.copy(this.quadModelMatrix,this.modelMatrix);var t=s/this.translateScale;mat4.scale(this.quadModelMatrix,this.quadModelMatrix,[this.size.width/t,-this.size.height/t,1])},u.draw=function(){if(null!=this.texture){a.useProgram(this.glProgram.program),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.texture),a.uniform1i(this.glProgram.u_texture_handle,0),a.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),a.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),a.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),a.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var e=this.buffer?this.buffer:r.buffer;a.bindBuffer(a.ARRAY_BUFFER,e),a.enableVertexAttribArray(this.glProgram.a_position_handle),a.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),a.vertexAttribPointer(this.glProgram.a_position_handle,e.itemSize,a.FLOAT,!1,16,0),a.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,e.itemSize,a.FLOAT,!1,16,8),a.drawArrays(a.TRIANGLE_STRIP,0,e.numItems)}},u}}}();t.module("quad",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=t.getModule("object"),i=t.getModule("quad"),n=function(){return console.log("initialize plane module"),{new:function(e,n,o,a,s){for(var l=t.localVars.gl,u=t.localVars.screenWidth,c=(t.localVars.screenHeight,r.new(e,a,s)),d=n+1,h=o+1,f=c.size.height/c.size.width,p=[],m=0;h>m;m++)for(var g=(-1+2*m/o)*f,v=m/o,_=0;d>_;_++){var x=-1+2*_/n,y=_/n;p.push(x,g,y,v)}c.buffer=l.createBuffer(),c.buffer.itemSize=2,c.buffer.numItems=4,l.bindBuffer(l.ARRAY_BUFFER,c.buffer),l.bufferData(l.ARRAY_BUFFER,new Float32Array(p),l.STATIC_DRAW);for(var b=[],w=0,E=0;o>E;E++)for(var M=0;n>M;M++)b.push(E*d+M),b.push(E*d+M+1),b.push((E+1)*d+M),b.push(E*d+M+1),b.push((E+1)*d+M+1),b.push((E+1)*d+M),w+=6;return c.indices=l.createBuffer(),c.indices.indexCount=b.length,l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,c.indices),l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(b),l.STATIC_DRAW),c.glProgram=i.default_program.getProgram(),c.quadModelMatrix=mat4.create(),c.updateModelMatrix=function(){if(mat4.identity(this.modelMatrix),0!=this.position.x||0!=this.position.y||0!=this.position.z){var e=u/(2*this.translateScale);mat4.translate(this.modelMatrix,this.modelMatrix,[this.position.x/e,-this.position.y/e,this.position.z/e])}if(0!=this.rotate.z&&mat4.rotateZ(this.modelMatrix,this.modelMatrix,-this.rotate.z),0!=this.rotate.y&&mat4.rotateY(this.modelMatrix,this.modelMatrix,-this.rotate.y),0!=this.rotate.x&&mat4.rotateX(this.modelMatrix,this.modelMatrix,-this.rotate.x),(1!=this.scale.x||1!=this.scale.y||1!=this.scale.z)&&mat4.scale(this.modelMatrix,this.modelMatrix,[this.scale.x,this.scale.y,this.scale.z]),0!=this.origo.x||0!=this.origo.y||0!=this.origo.z){var e=u/(2*this.translateScale);mat4.translate(this.modelMatrix,this.modelMatrix,vec3.clone([-this.origo.x/e,this.origo.y/e,-this.origo.z/e]))}mat4.copy(this.quadModelMatrix,this.modelMatrix);var t=u/this.translateScale;mat4.scale(this.quadModelMatrix,this.quadModelMatrix,[this.size.width/t,-this.size.height/t*1/f,1])},c.draw=function(){null!=c.texture&&(l.useProgram(this.glProgram.program),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.texture),l.uniform1i(this.glProgram.u_texture_handle,0),l.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),l.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),l.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),l.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix),l.bindBuffer(l.ARRAY_BUFFER,this.buffer),l.enableVertexAttribArray(this.glProgram.a_position_handle),l.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),l.vertexAttribPointer(this.glProgram.a_position_handle,this.buffer.itemSize,l.FLOAT,!1,16,0),l.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,this.buffer.itemSize,l.FLOAT,!1,16,8),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.indices),l.drawElements(l.TRIANGLES,this.indices.indexCount,l.UNSIGNED_SHORT,0))},c}}}();t.module("plane",n)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){var e=t.getModule("quad");return{new:function(t,r,i){var n=e.new(t,r,i);return n.focused=!1,n.hit=function(e,t){return e<-this.width()/2||e>this.width()/2||t<-this.height()/2||t>this.height()/2?!1:!0},n.relativePress=function(e,t){return this.hit(e,t)?(null!=this.focus&&this.focus(e,t),this.focused=!0,!0):!1},n.relativeDrag=function(e,t){return 1!=this.focused?!1:(1!=this.hit(e,t)?(null!=this.defocus&&this.defocus(e,t),this.focused=!1):null!=this.focusdrag&&this.focusdrag(e,t),!0)},n.relativeRelease=function(e,t){return 1!=this.focused?!1:(null!=this.click&&this.click(e,t),null!=this.defocus&&this.defocus(e,t),this.focused=!1,!0)},n.pointerReset=function(){null!=this.defocus&&this.defocus(0,0),this.focused=!1},n}}}();t.module("focusable",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize rectangle module");var e=t.getModule("glutils"),r=t.getModule("quad");return{default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"              attribute vec2 a_position;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);              }",type:"x-shader/x-vertex"},i={text:"              precision mediump float;                            uniform float     u_red;              uniform float     u_green;              uniform float     u_blue;              uniform float     u_alpha;                            void main() {                gl_FragColor = vec4( u_red, u_green, u_blue, 1.0 ) * u_alpha;              }",type:"x-shader/x-fragment"},n=t.localVars.gl,o=e.createShader(n,r),a=e.createShader(n,i);this.glProgram=e.loadProgram(n,[o,a],["a_position"],["u_red","u_green","u_blue","u_alpha","u_model","u_view","u_projection"])}},new:function(e,i,n){var o=t.localVars.gl,a=r.new("rectangle",e,i);return a.glProgram=this.default_program.getProgram(),a.color=null==n?{red:0,green:0,blue:0}:n,a.draw=function(){o.useProgram(this.glProgram.program),o.uniform1f(this.glProgram.u_red_handle,this.color.red),o.uniform1f(this.glProgram.u_green_handle,this.color.green),o.uniform1f(this.glProgram.u_blue_handle,this.color.blue),o.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),o.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),o.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),o.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var e=this.buffer?this.buffer:r.buffer;o.bindBuffer(o.ARRAY_BUFFER,e),o.enableVertexAttribArray(this.glProgram.a_position_handle),o.vertexAttribPointer(this.glProgram.a_position_handle,e.itemSize,o.FLOAT,!1,16,0),o.drawArrays(o.TRIANGLE_STRIP,0,e.numItems)},a}}}();t.module("rectangle",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize image module");var e=t.getModule("quad");return{loadImage:function(e){var r=t.localVars.zipfile,i=null;if("string"!=typeof e)return console.log("ERROR: image.loadImage source is not of type string",e),null;if(i=new Image,null!=r){var n=r.file(e);i.src="data:image/jpg;base64,"+JSZip.base64.encode(n.asBinary())}else i.crossOrigin="anonymous",i.src=e;return i},new:function(i,n){var o=t.localVars.gl,a=n?n:e.new("image : "+i);return a.promise=new Promise(function(e,t){a.resolve=e,a.reject=t}),a.size.width=null,a.size.height=null,i instanceof HTMLElement?(a.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,a.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,i),null==a.size.width&&(a.size.width=i.width),null==a.size.height&&(a.size.height=i.height),a.loaded=!0,null!=a.onload&&a.onload(),a.resolve(a)):i instanceof Object?null!=i.texture||null!=i.size?(a.texture=i.texture,a.image=i.image,null==a.size.width&&(a.size.width=i.size.width),null==a.size.height&&(a.size.height=i.size.height),a.loaded=!0,null!=a.onload&&a.onload(),a.resolve(a)):(console.log("ERROR: image.new from unknown Object",i),a.reject(Error("image.new from unknown Object "+i))):"string"==typeof i?(a.image=r.loadImage(i),a.image.onload=function(){return null==r?(console.log("image == null!"),void a.reject(Error("image == null!"))):(a.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,a.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,a.image),null==a.size.width&&(a.size.width=a.image.width),null==a.size.height&&(a.size.height=a.image.height),a.loaded=!0,null!=a.onload&&a.onload(),void a.resolve(a))},a.image.onerror=function(){console.log("texture load failed",i),a.reject(Error("image.onerror "+i))}):(console.log("ERROR: image.new from unknown object",i),a.reject(Error("image.new from unknown object "+i))),a}}}();t.module("image",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=t.getModule("glutils"),i=t.getModule("image"),n=t.getModule("quad"),o=function(){return console.log("initialize masked_image module"),{default_program:{program:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var e={text:"            attribute vec2 a_position;             attribute vec2 a_tex_coordinate;                         uniform mat4 u_projection;             uniform mat4 u_view;             uniform mat4 u_model;                         varying vec2 v_tex_coord;                         void main() {               gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);               v_tex_coord = a_tex_coordinate;             }             ",type:"x-shader/x-vertex"},i={text:"            precision mediump float;                         varying vec2      v_tex_coord;                         uniform sampler2D u_texture;             uniform sampler2D u_mask_texture;             uniform float     u_alpha;                         void main() {                             vec4 color = texture2D(u_texture, v_tex_coord);               vec4 mask_color = texture2D(u_mask_texture, v_tex_coord);                             gl_FragColor = color * mask_color.a * u_alpha;             }             ",type:"x-shader/x-fragment"},n=t.localVars.gl,o=r.createShader(n,e),a=r.createShader(n,i);this.glProgram=r.loadProgram(n,[o,a],["a_position","a_tex_coordinate"],["u_texture","u_mask_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,r){var o=t.localVars.gl,a=i.new(e);return a.identifier="masked_image : "+e+" : "+r,console.log(a.identifier),a.mask=r,a.glProgram=this.default_program.getProgram(),a.draw=function(){if(1==a.loaded){o.useProgram(this.glProgram.program),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,a.texture),o.uniform1i(this.glProgram.u_texture_handle,0),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,a.mask.texture),o.uniform1i(this.glProgram.u_mask_texture_handle,1),o.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),o.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),o.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),o.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var e=this.buffer?this.buffer:n.buffer;o.bindBuffer(o.ARRAY_BUFFER,e),o.enableVertexAttribArray(this.glProgram.a_position_handle),o.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),o.vertexAttribPointer(this.glProgram.a_position_handle,e.itemSize,o.FLOAT,!1,16,0),o.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,e.itemSize,o.FLOAT,!1,16,8),o.drawArrays(o.TRIANGLE_STRIP,0,e.numItems)}},a}}}();t.module("masked_image",o)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize fbo_object module");var e=t.getModule("glutils"),r=t.getModule("scene"),i=t.getModule("quad"),n=t.getModule("sys"),o=t.getModule("object");return{default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"              attribute vec2 a_position;              attribute vec2 a_tex_coordinate;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            varying vec2 v_tex_coord;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);                v_tex_coord = vec2(a_tex_coordinate.x,1.0-a_tex_coordinate.y);              }              ",type:"x-shader/x-vertex"},i={text:"              precision mediump float;                            varying vec2      v_tex_coord;                            uniform sampler2D u_texture;              uniform float     u_alpha;                            void main() {                vec4 color = texture2D(u_texture, v_tex_coord);                gl_FragColor = vec4(color.rgb, color.a * u_alpha);              }            ",type:"x-shader/x-fragment"},n=t.localVars.gl,o=e.createShader(n,r),a=e.createShader(n,i);
this.glProgram=e.loadProgram(n,[o,a],["a_position","a_tex_coordinate"],["u_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,a,s,l){var u=t.localVars.gl,c=i.new("fbo_object : "+e,a,s);c.glProgram=this.default_program.getProgram(),console.log("fbo_object.new(",c.identifier,c.size.width,c.size.height,c.glProgram,")"),c.parentobject=o.new(),c.parentobject.add(o.new()),c.parentobject.scale.x=t.localVars.screenWidth/c.size.width,c.parentobject.scale.y=t.localVars.screenHeight/c.size.height,c.parentobject.update(),c.dobypassFbo=!1,c.lastUpdated=-99999,c.updateInterval=0,c.framebuffer=u.createFramebuffer(),c.framebuffer.width=c.size.width,c.framebuffer.height=c.size.height,u.bindFramebuffer(u.FRAMEBUFFER,c.framebuffer),c.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,c.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR);var d=l?u.RGB:u.RGBA;return u.texImage2D(u.TEXTURE_2D,0,d,c.framebuffer.width,c.framebuffer.height,0,d,u.UNSIGNED_BYTE,null),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,c.texture,0),u.bindTexture(u.TEXTURE_2D,null),u.bindFramebuffer(u.FRAMEBUFFER,null),c.preStep=function(){var e=n.timestamp()-this.lastUpdated;this.fboUpdatesDisabled||this.dobypassFbo||e>=this.updateInterval&&c.updateFbo()},c.updateFbo=function(){r.addFboUpdate(c)},c.renderFbo=function(){u.bindTexture(u.TEXTURE_2D,null);var e=u.getParameter(u.FRAMEBUFFER_BINDING),r=t.localVars.screenWidth,i=t.localVars.screenHeight,o=t.localVars.layoutWidth,a=t.localVars.layoutHeight,s={x:t.localVars.layoutOffset.x,y:t.localVars.layoutOffset.y};u.viewport(0,0,c.size.width,c.size.height),u.bindFramebuffer(u.FRAMEBUFFER,c.framebuffer),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),t.localVars.screenWidth=c.size.width,t.localVars.screenHeight=c.size.height,t.localVars.layoutWidth=c.size.width,t.localVars.layoutHeight=c.size.height,t.localVars.layoutOffset={x:0,y:0},screenWidth=t.localVars.screenWidth,screenHeight=t.localVars.screenHeight,layoutWidth=t.localVars.layoutWidth,layoutHeight=t.localVars.layoutHeight,layoutOffset=t.localVars.layoutOffset;for(var l=0;l<c.children.length;l++)c.children[l].parent=c.parentobject,c.children[l].viewMatrix=c.parentobject.modelViewMatrix,c.children[l].drawTree();t.localVars.screenWidth=r,t.localVars.screenHeight=i,t.localVars.layoutWidth=o,t.localVars.layoutHeight=a,t.localVars.layoutOffset=s,screenWidth=t.localVars.screenWidth,screenHeight=t.localVars.screenHeight,layoutWidth=t.localVars.layoutWidth,layoutHeight=t.localVars.layoutHeight,layoutOffset=t.localVars.layoutOffset,u.viewport(t.localVars.layoutOffset.x,t.localVars.layoutOffset.y,t.localVars.layoutWidth,t.localVars.layoutHeight),u.bindFramebuffer(u.FRAMEBUFFER,e),c.lastUpdated=n.timestamp()},c.drawTree=function(){if(0!=this.visible){if(this.update(),null!=this.preDraw&&this.preDraw(),this.dobypassFbo)for(var e=0;e<this.children.length;e++)this.children[e].parent=this,this.children[e].viewMatrix=this.modelViewMatrix,this.children[e].drawTree();else null!=this.draw&&this.draw();null!=this.postDraw&&this.postDraw()}},c}}}();t.module("fbo_object",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=t.getModule("glutils"),i=(t.getModule("image"),t.getModule("quad")),n=t.getModule("fbo_object"),o=function(){return console.log("initialize masked_fbo_object module"),{default_program:{program:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var e={text:"            attribute vec2 a_position;             attribute vec2 a_tex_coordinate;                         uniform mat4 u_projection;             uniform mat4 u_view;             uniform mat4 u_model;                         varying vec2 v_tex_coord;                         void main() {               gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);               v_tex_coord = vec2(a_tex_coordinate.x,1.0-a_tex_coordinate.y);            }             ",type:"x-shader/x-vertex"},i={text:"            precision mediump float;                         varying vec2      v_tex_coord;                         uniform sampler2D u_texture;             uniform sampler2D u_mask_texture;             uniform float     u_alpha;                         void main() {                             vec4 color = texture2D(u_texture, v_tex_coord);               vec4 mask_color = texture2D(u_mask_texture, v_tex_coord);                             gl_FragColor = vec4(color.rgb, color.a * mask_color.a * u_alpha);             }             ",type:"x-shader/x-fragment"},n=t.localVars.gl,o=r.createShader(n,e),a=r.createShader(n,i);this.glProgram=r.loadProgram(n,[o,a],["a_position","a_tex_coordinate"],["u_texture","u_mask_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,r,o,a,s){var l=t.localVars.gl,u=n.new(e,o,a,s);return u.identifier="masked_fbo_object : "+e+" : "+r,console.log(u.identifier),u.mask=r,u.glProgram=this.default_program.getProgram(),u.draw=function(){if(null!=r.texture){l.useProgram(this.glProgram.program),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.texture),l.uniform1i(this.glProgram.u_texture_handle,0),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,u.mask.texture),l.uniform1i(this.glProgram.u_mask_texture_handle,1),l.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),l.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),l.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),l.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var e=this.buffer?this.buffer:i.buffer;l.bindBuffer(l.ARRAY_BUFFER,e),l.enableVertexAttribArray(this.glProgram.a_position_handle),l.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),l.vertexAttribPointer(this.glProgram.a_position_handle,e.itemSize,l.FLOAT,!1,16,0),l.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,e.itemSize,l.FLOAT,!1,16,8),l.drawArrays(l.TRIANGLE_STRIP,0,e.numItems)}},u}}}();t.module("masked_fbo_object",o)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize button module");{var e=t.getModule("image");t.getModule("focusable")}return{new:function(t){var r=e.new(t);return r.focused=!1,r.identifier="button : "+t,r.hit=function(e,t){return e<-this.width()/2||e>this.width()/2||t<-this.height()/2||t>this.height()/2?!1:!0},r.relativePress=function(e,t){return this.hit(e,t)?(null!=this.focus&&this.focus(e,t),this.focused=!0,!0):!1},r.relativeDrag=function(e,t){return 1!=this.focused?!1:(1!=this.hit(e,t)?(null!=this.defocus&&this.defocus(e,t),this.focused=!1):null!=this.focusdrag&&this.focusdrag(e,t),!0)},r.relativeRelease=function(e,t){return 1!=this.focused?!1:(null!=this.click&&this.click(e,t),null!=this.defocus&&this.defocus(e,t),this.focused=!1,!0)},r.pointerReset=function(){null!=this.defocus&&this.defocus(0,0),this.focused=!1},r}}}();t.module("button",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=t.getModule("object"),i=t.getModule("focusable"),n=t.getModule("image"),o=function(e,t,r,o,a){r=r?r:e.frames.length,o=o?o:0;for(var s=a?a:i.new("spritesheet "+e.name),l=o;o+r>l;l++){var u=s.add(n.new(e.frames[l]));u.visible=!1,u.active=!1}return s.size.width=e.spritewidth,s.size.height=e.spriteheight,s.frame=s.children[0],s.frametimervalue=0,s.frametime=35,s.restart=function(e){s.frametimervalue=0;var r=s.restart;0==t&&(r=null);var i=s.loopdelay&&!e?s.loopdelay:0;s.anim.animate(s,{frametimervalue:s.children.length,start:i,time:s.frametime*s.children.length,onComplete:r})},s.preStep=function(){s.frame.visible=!1;var e=Math.floor(s.frametimervalue);e>s.children.length-1||(s.frame=s.children[e],s.frame.visible=!0)},s.start=function(){return s.anim.animations.length>0&&s.anim.animations[0].paused?void s.anim.resume():void s.restart()},s.stop=function(){s.anim.pause()},s.unload=function(){s.anim.stop()},0!=t&&s.restart(!0),s},a=function(){return{newSheet:function(e,t,r){var i={spritewidth:0,spriteheight:0,frames:[]};if(e instanceof Array){var o=t,a=r,s=document.createElement("canvas");s.width=o,s.height=a;for(var l=s.getContext("2d"),u=0,c=0;c<e.length;c++)!new function(){var t=n.loadImage(e[c]);t.onload=function(){l.drawImage(t,0,0),i.frames.push(n.new(s)),l.clearRect(0,0,s.width,s.height),u+=1,u==e.length&&null!=i.onload&&i.onload()}};i.spritewidth=o,i.spriteheight=a,i.name="array "+e.length}else{var d=n.loadImage(e);d.onload=function(){var o=d.width/t,a=d.height/r,s=document.createElement("canvas");s.width=o,s.height=a;for(var l=s.getContext("2d"),u=0;r>u;u++)for(var c=0;t>c;c++)l.drawImage(d,-c*o,-u*a),i.frames.push(n.new(s)),l.clearRect(0,0,s.width,s.height);i.spritewidth=o,i.spriteheight=a,i.name=e,null!=i.onload&&i.onload()}}return i},newFromSheet:function(e,t,r,i,n){return o(e,t,r,i,n)},new:function(e,t,i,n,a,s){var l=this.newSheet(e,t,i),u=r.new("sprite loader");return u.sheet=l,u.promise=new Promise(function(e,t){u.resolve=e,u.reject=t}),l.onload=function(){o(l,n,a,s,u),null!=u.onload&&u.onload(),u.resolve(u)},u}}}();t.module("sprite",a)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize carousel module");{var e=t.getModule("object"),r=t.getModule("focusable"),i=t.getModule("animator"),n=t.getModule("scene");t.getModule("sys")}return{new:function(o,a,s){var l=t.localVars.screenWidth,u=t.localVars.screenHeight,c=r.new(o,a,s),d={name:"coverflow",show:[],hide:[],order_draw:!0};d.show.push({target:"position.x",startposition:1*l,endposition:0,func:i.linear}),d.show.push({target:"rotate.y",startposition:.8*Math.PI,endposition:0,func:i.linear}),d.show.push({target:"scale.x",startposition:.6,endposition:1,func:i.linear}),d.show.push({target:"scale.y",startposition:.6,endposition:1,func:i.linear}),d.hide.push({target:"position.x",startposition:0,endposition:1*-l,func:i.linear}),d.hide.push({target:"rotate.y",startposition:0,endposition:.8*-Math.PI,func:i.linear}),d.hide.push({target:"scale.x",startposition:1,endposition:.6,func:i.linear}),d.hide.push({target:"scale.y",startposition:1,endposition:.6,func:i.linear}),c.contentsize={width:c.size.width,height:c.size.height},c.inertia=5,c.swipespeed=1,c.swipefunc=i.outQuad,c.movespeed=1,c.movethreshold=60,c.itemsize=l,c.transition=d,c.unload_distance=1,c.wrap=!1,c.bounceOnWrap=!1,c.alwaysmove=!1,c.nevermove=!1,c.selecteditem=0,c.moveToSelectedItem=!0;var h=c.add(e.new("carousel"));h.targetposition={x:0,y:0,z:0},h.pressOffset={x:0,y:0};var f=c.add(e.new("item container"));f.targetposition={x:0,y:0,z:0},c.instance=h,c.itemcontainer=f;var p=function(e,t,r){r>100&&(r=100);var i=1;e>t&&(i=-1);var n=-i*r/(16.66*c.inertia)*Math.abs(e-t);return Math.abs(n)<1e-4?e=t:e-=n,1==i&&e>t&&(e=t),-1==i&&t>e&&(e=t),e};h.setMoving=function(e,t){null==n.getpointerStealer()&&1!=c.nevermove&&(n.stealPointers(c),null!=c.stolePointers&&c.stolePointers(e,t),h.moving=!0)},c.focus=function(e,t){h.moving&&(h.moving=!1,h.targetposition.x=h.position.x,h.targetposition.y=h.position.y),h.pressOffset={x:h.targetposition.x-e*c.movespeed/l*2,y:h.targetposition.y-t*c.movespeed},c.pressStarted={x:e,y:t}},c.focusdrag=function(e,t){var r=h.pressOffset.x+e*c.movespeed/l*2,i=h.pressOffset.y+t*c.movespeed/u*2,n=c.pressStarted.x-e,o=c.pressStarted.y-t;(c.alwaysmove||c.contentsize.width!=c.size.width)&&Math.abs(n)>c.movethreshold&&h.setMoving(n,o),h.moving&&(h.targetposition.x=r,h.targetposition.y=i)},c.defocus=function(){var e=Math.floor(-h.targetposition.x+.5);c.moveToSelectedItem&&(h.targetposition.x=-e),c.selecteditem=e,c.selecteditem<0&&(c.selecteditem=c.wrap?f.children.length+e:0),c.selecteditem>f.children.length-1&&(c.selecteditem=c.wrap?e-f.children.length:f.children.length-1),c.selecteditem=c.selecteditem+1,null!=c.carouselmoved&&c.carouselmoved(c.selecteditem)};var m=function(e,t){var r=e.active,i=e.visible,n=e.itemposition;e.itemposition=n+t,e.stepTree(),e.drawTree(),e.itemposition=n,e.step(0),e.visible=i,e.active=r};return c.preDraw=function(){if(c.wrap)if(c.transition.reverse_draw)for(var e=f.children.length-1;e>=0;e--)m(f.children[e],f.children.length);else for(var e=0;e<f.children.length;e++)m(f.children[e],f.children.length)},c.postDraw=function(){if(c.wrap)if(c.transition.reverse_draw)for(var e=f.children.length-1;e>=0;e--)m(f.children[e],-f.children.length);else for(var e=0;e<f.children.length;e++)m(f.children[e],-f.children.length)},c.selected=function(){return c.selecteditem},c.getItem=function(e){return f.children[e-1]},c.moveto=function(e,t){h.targetposition.x=-e,t&&(h.position.x=h.targetposition.x),c.selecteditem=e,c.selecteditem<0&&(c.selecteditem=c.wrap?f.children.length+e:0),c.selecteditem>f.children.length-1&&(c.selecteditem=c.wrap?e-f.children.length:f.children.length-1),null!=c.carouselmoved&&c.carouselmoved(e+1)},c.swipeRight=function(e){c.focused&&(h.targetposition.x=h.targetposition.x-c.swipefunc(0,c.swipespeed,e))},c.swipeLeft=function(e){c.focused&&(h.targetposition.x=h.targetposition.x+c.swipefunc(0,c.swipespeed,e))},c.step=function(e){var t=-f.children.length+1,r=-f.children.length+1,i=.75,n=.75;0==c.wrap||c.bounceOnWrap&&h.position.x>t-i&&h.position.x<i?(c.bounceOnWrap&&(i=2*i,n=2*n),h.targetposition.x>i&&(h.targetposition.x=i),h.targetposition.y>n&&(h.targetposition.y=n),h.targetposition.x<t-i&&(h.targetposition.x=t-i),h.targetposition.y<r-n&&(h.targetposition.y=r-n),0==c.focused&&(h.targetposition.x>0&&(h.targetposition.x=p(h.targetposition.x,0,e/2)),h.targetposition.y>0&&(h.targetposition.y=p(h.targetposition.y,0,e/2)),h.targetposition.x<t&&(h.targetposition.x=p(h.targetposition.x,t,e/2)),h.targetposition.y<r&&(h.targetposition.y=p(h.targetposition.y,r,e/2)))):(h.targetposition.x>=1?(h.targetposition.x=h.targetposition.x-f.children.length,h.position.x=h.position.x-f.children.length,h.pressOffset.x=h.pressOffset.x-f.children.length):h.targetposition.x<=-f.children.length&&(h.targetposition.x=h.targetposition.x+f.children.length,h.position.x=h.position.x+f.children.length,h.pressOffset.x=h.pressOffset.x+f.children.length),h.targetposition.y>=1?(h.targetposition.y=h.targetposition.y-f.children.length,h.position.y=h.position.y-f.children.length,h.pressOffset.y=h.pressOffset.y-f.children.length):h.targetposition.y<=-f.children.length&&(h.targetposition.y=h.targetposition.y+f.children.length,h.position.y=h.position.y+f.children.length,h.pressOffset.y=h.pressOffset.y+f.children.length));var o=e;o>100&&(o=1),0==c.focused&&(o=e/2),(c.alwaysmove||c.contentsize.width!=c.size.width)&&(h.position.x=p(h.position.x,h.targetposition.x,o)),(c.alwaysmove||c.contentsize.height!=c.size.height)&&(h.position.y=p(h.position.y,h.targetposition.y,o)),0==c.focused&&h.position.x==h.targetposition.x&&h.position.y==h.targetposition.y&&(h.moving=!1),h.moving},c.getDistance=function(){var e=(h.position.x*c.itemsize+this.itemposition*c.itemsize)/l;return e},c.setContentSize=function(){c.contentsize.width=c.itemsize*f.children.length},c.add=function(e,t){var t=f.children.length,i=r.new("carousel item container");return i.add(e),i.parent=f,f.children.push(i),f.drawTree=function(){function e(e,t){return Math.abs(e.dist)>Math.abs(t.dist)?-1:1}if(0!=this.visible){if(this.update(),null!=this.preDraw&&this.preDraw(),null!=this.draw&&this.draw(),c.transition.order_draw){for(var t=[],r=0;r<this.children.length;r++)t.push(this.children[r]);t.sort(e);for(var r=0;r<t.length;r++)t[r].drawTree()}else if(this.reverseDrawOrder)for(var r=this.children.length-1;r>=0;r--)this.children[r].drawTree();else for(var r=0;r<this.children.length;r++)this.children[r].drawTree();null!=this.postDraw&&this.postDraw()}},e.carouselobject=i,i.index=t,i.child=e,i.itemposition=t,i.getDistance=c.getDistance,i.step=function(){var e=this.getDistance();if(this.dist=e,e<=-c.unload_distance||e>=c.unload_distance?null!=this.unload_content&&null!=this.content&&this.unload_content():null!=this.load_content&&null==this.content&&this.load_content(),this.active=!0,Math.abs(e)>.2&&(this.active=!1),this.visible=!0,Math.abs(e)>1&&(this.visible=!1),!(this.distance==e||Math.abs(e)>2)){this.distance=e;var t=c.transition;if(f.reverseDrawOrder=t.reverse_draw?!0:!1,e>=0)for(var r=0;r<t.show.length;r++){var i=t.show[r];"position.x"==i.target?this.position.x=i.func(i.startposition,i.endposition,Math.abs(1-e)):"position.y"==i.target?this.position.y=i.func(i.startposition,i.endposition,Math.abs(1-e)):"position.z"==i.target?this.position.z=i.func(i.startposition,i.endposition,Math.abs(1-e)):"scale.x"==i.target?this.scale.x=i.func(i.startposition,i.endposition,Math.abs(1-e)):"scale.y"==i.target?this.scale.y=i.func(i.startposition,i.endposition,Math.abs(1-e)):"rotate.x"==i.target?this.rotate.x=i.func(i.startposition,i.endposition,Math.abs(1-e)):"rotate.y"==i.target?this.rotate.y=i.func(i.startposition,i.endposition,Math.abs(1-e)):"rotate.z"==i.target?this.rotate.z=i.func(i.startposition,i.endposition,Math.abs(1-e)):"alpha"==i.target?this.alpha=i.func(i.startposition,i.endposition,Math.abs(1-e)):"transition_value"==i.target&&(this.transition_value=i.func(i.startposition,i.endposition,Math.abs(1-e)))}else for(var r=0;r<t.hide.length;r++){var n=t.hide[r];"position.x"==n.target?this.position.x=n.func(n.startposition,n.endposition,Math.abs(e)):"position.y"==n.target?this.position.y=n.func(n.startposition,n.endposition,Math.abs(e)):"position.z"==n.target?this.position.z=n.func(n.startposition,n.endposition,Math.abs(e)):"scale.x"==n.target?this.scale.x=n.func(n.startposition,n.endposition,Math.abs(e)):"scale.y"==n.target?this.scale.y=n.func(n.startposition,n.endposition,Math.abs(e)):"rotate.x"==n.target?this.rotate.x=n.func(n.startposition,n.endposition,Math.abs(e)):"rotate.y"==n.target?this.rotate.y=n.func(n.startposition,n.endposition,Math.abs(e)):"rotate.z"==n.target?this.rotate.z=n.func(n.startposition,n.endposition,Math.abs(e)):"alpha"==n.target?this.alpha=n.func(n.startposition,n.endposition,Math.abs(e)):"transition_value"==n.target&&(this.transition_value=n.func(n.startposition,n.endposition,Math.abs(e)))}}},f.itemaddposition=f.itemaddposition+1,c.setContentSize(),i},c}}}();t.module("carousel",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=t.getModule("animator"),i=t.getModule("carousel"),n=function(){return{new:function(e,n,o){var a=t.localVars.screenWidth,s=t.localVars.screenHeight,l={name:"move in",show:[],hide:[]};l.show.push({target:"position.y",startposition:s,endposition:0,func:r.outQuad}),l.show.push({target:"alpha",startposition:0,endposition:1,func:r.outExpo}),l.hide.push({target:"position.y",startposition:0,endposition:0,func:r.linear}),l.hide.push({target:"alpha",startposition:1,endposition:0,func:r.inExpo});var u=i.new(e,n,o);return u.itemsize=s,u.transition=l,u.getDistance=function(){var e=(u.instance.position.y*u.itemsize+this.itemposition*u.itemsize)/s;return e},u.setContentSize=function(){u.contentsize.height=u.itemsize*u.itemcontainer.children.length},u.focus=function(e,t){u.instance.moving&&(u.instance.moving=!1,u.instance.targetposition.x=u.instance.position.x,u.instance.targetposition.y=u.instance.position.y),u.instance.pressOffset={x:u.instance.targetposition.x-e*u.movespeed/a*2,y:u.instance.targetposition.y-t*u.movespeed/s*2},u.pressStarted={x:e,y:t}},u.focusdrag=function(e,t){var r=u.instance.pressOffset.x+e*u.movespeed/a*2,i=u.instance.pressOffset.y+t*u.movespeed/s*2,n=u.pressStarted.x-e,o=u.pressStarted.y-t;(u.alwaysmove||u.contentsize.height!=u.size.height)&&Math.abs(o)>u.movethreshold&&u.instance.setMoving(n,o),u.instance.moving&&(u.instance.targetposition.x=r,u.instance.targetposition.y=i)},u.defocus=function(){var e=Math.floor(-u.instance.targetposition.y+.5);u.moveToSelectedItem&&(u.instance.targetposition.y=-e),u.selecteditem=e,u.selecteditem<0&&(u.selecteditem=u.wrap?u.itemcontainer.children.length+e:0),u.selecteditem>u.itemcontainer.children.length-1&&(u.selecteditem=u.wrap?e-u.itemcontainer.children.length:u.itemcontainer.children.length-1),u.selecteditem=u.selecteditem+1,null!=u.carouselmoved&&u.carouselmoved(u.selecteditem)},u.swipeLeft=null,u.swipeDown=null,u.swipeDown=function(e){u.focused&&(u.instance.targetposition.x=u.instance.targetposition.x-u.swipefunc(0,u.swipespeed,e))},u.swipeUp=function(e){u.focused&&(u.instance.targetposition.x=u.instance.targetposition.x+u.swipefunc(0,u.swipespeed,e))},u.moveto=function(e,t){u.instance.targetposition.y=-e,t&&(u.instance.position.y=u.instance.targetposition.y),u.selecteditem=e,null!=u.carouselmoved&&u.carouselmoved(e)},u}}}();t.module("carousel_vertical",n)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=t.getModule("scene"),i=t.getModule("animator"),n=t.getModule("object"),o=t.getModule("focusable"),a=function(){return{new:function(e,a,s){var l=t.localVars.screenWidth,u=t.localVars.screenHeight,c=o.new(e,a,s);c.contentsize={width:c.size.width,height:c.size.height},c.movespeed=1,c.movethreshold=40,c.swipespeed=(l+u)/2*5,c.maxspeed=200,c.inertia=7,c.zeroposition=0,c.loaddistance=u,c.visibledistance=c.loaddistance,c.itempad=0,c.centerslots=!1,c.swipefunc=i.inQuad;var d=c.add(n.new("scrollable"));c.instance=d,d.targetposition={x:0,y:0,z:0};var h=function(e,t,r){r>100&&(r=100);var i=1;e>t&&(i=-1);var n=-i*(r/(16.66*c.inertia))*Math.abs(e-t),o=r/16.66*c.maxspeed;return n>o&&(n=o),-o>n&&(n=-o),Math.abs(n)<1e-5?e=t:e-=n,1==i&&e>t&&(e=t),-1==i&&t>e&&(e=t),e};c.focus=function(e,t){d.pressOffset={x:d.position.x-e*c.movespeed,y:d.position.y-t*c.movespeed},d.moving&&(d.resetpress(),d.moving=!1)},c.defocus=function(){r.getpointerStealer()==c&&c.centeronslots(),console.log("DEFOCUS",c.identifier,d.position.y,d.targetposition.y)},c.centeronslots=function(){if(c.centerslots){var e=Math.floor(c.selected()/(l+c.itempad));c.movetox(e*(l+c.itempad)+l/2)}},d.setMoving=function(){0==d.moving&&null==r.getpointerStealer()&&(r.stealPointers(c),d.moving=!0)},c.focusdrag=function(e,t){var r=d.pressOffset.x+e*c.movespeed,i=d.pressOffset.y+t*c.movespeed,n=r-d.targetposition.x,o=i-d.targetposition.y;c.contentsize.width!=c.size.width&&Math.abs(n)>c.movethreshold&&d.setMoving(),c.contentsize.height!=c.size.height&&Math.abs(o)>c.movethreshold&&d.setMoving(),d.moving&&(d.targetposition.x=r,d.targetposition.y=i)},c.step=function(e){var t=-(c.contentsize.width-c.size.width)+c.zeroposition,r=-(c.contentsize.height-c.size.height);c.contentsize.width<c.size.width&&(t=0),c.contentsize.height<c.size.height&&(r=0);var i=e;i>66&&(i=66),0!=c.enforcelimits&&(d.targetposition.x>c.size.width/4+c.zeroposition&&(d.targetposition.x=c.size.width/4+c.zeroposition),d.targetposition.y>c.size.height/4&&(d.targetposition.y=c.size.height/4),d.targetposition.x<t-c.size.width/4&&(d.targetposition.x=t-c.size.width/4),d.targetposition.y<r-c.size.height/4&&(d.targetposition.y=r-c.size.height/4),0==c.focused&&(d.targetposition.x>c.zeroposition&&(d.targetposition.x=h(d.targetposition.x,c.zeroposition,e/2)),d.targetposition.y>0&&(d.targetposition.y=h(d.targetposition.y,0,e/2)),d.targetposition.x<t&&(d.targetposition.x=h(d.targetposition.x,t,e/2)),d.targetposition.y<r&&(d.targetposition.y=h(d.targetposition.y,r,e/2)))),0==c.focused&&(i/=2),c.contentsize.width!=c.size.width&&(d.position.x=h(d.position.x,d.targetposition.x,i)),c.contentsize.height!=c.size.height&&(d.position.y=h(d.position.y,d.targetposition.y,i)),0==c.focused&&d.position.x==d.targetposition.x&&d.position.y==d.targetposition.y&&(d.moving=!1)},c.selected=function(){return Math.floor(d.targetposition.x)},c.movetox=function(e,t){t&&(d.position.x=e),d.targetposition.x=e},c.movetoy=function(e,t){t&&(d.position.y=e),d.targetposition.y=e},c.prepare=function(){c.step(0);for(var e=0;e<d.children.length;e++)d.children[e].step(0)};var f=4*l,p=4*u,m=-f,g=f,v=-p,_=p;return c.intersectsScreen=function(e){var t=e.absolutex(),r=e.absolutey(),i=t-e.width()/2,n=t+e.width()/2,o=r-e.height()/2,a=r+e.height()/2;return!(m>n||i>g||v>a||o>_)},c.add=function(e,t){t?t:d.children.length;return e.parent=d,d.children.push(e),e.step=function(){this.xdistance=this.absolutex();var e=Math.sqrt(Math.pow(this.xdistance,2)+Math.pow(this.absolutey(),2));if(e<c.loaddistance)null!=this.load_content&&0==this.loaded&&this.load_content();else{var t=c.unloaddistance;null==t&&(t=c.loaddistance),e>t&&null!=this.load_content&&null!=this.unload_content&&this.loaded&&this.unload_content()}this.visible=e<c.visibledistance?!0:!1,this.distance=e},e},c}}}();t.module("scrollable",a)}(),function(){function e(t,r,i,n){r=r.replace("\n"," ");var o,a,s,l=r,u=0,c=0,d=r.split(" ");for(a=s=d.length;t.measureText(l).width>i&&a>1;){a--;l=o="";for(var h=0;s>h;h++)a>h?(l+=d[h],a>h+1&&(l+=" ")):(o+=d[h],s>h+1&&(o+=" "))}return n.push(l),c=t.measureText(l),o&&(u=e(t,o,i,n),u>c&&(c=u)),c}var t=document.currentScript||document._currentScript,r=t.curlify,i=function(){console.log("initialize text module");var t=r.getModule("quad");return{new:function(i,n,o,a,s,l,u,c,d){var h=r.localVars.gl,f=r.localVars.screenWidth,s=s?s:f,p=t.new("text : "+i+" : "+s+","+l);p.canvas=document.createElement("canvas"),p.canvas.width=s,p.canvas.height=n;var m=function(){p.context=p.canvas.getContext("2d"),p.context.fillStyle="rgba("+255*a.red+","+255*a.green+","+255*a.blue+",255)",p.context.textAlign=u?u:"center",p.context.textBaseline=c?c:"bottom",p.context.font=n+"px "+o};m();for(var g,v,_=[],x=1.2*n,y=s,b=i.split("\n"),w=0;w<b.length;w++)e(p.context,b[w],s,_);d&&(_=_.slice(0,d));var E=y,M=x*(_.length+1);g="center"==p.context.textAlign?E/2:0;var T=.5*(M-x*(_.length+1)),R=_.length*x+T;p.canvas.height=R,m();for(var w=0;w<_.length;w++)v=(w+1)*x+T,p.context.fillText(_[w],g,v);return p.size.width=p.canvas.width,p.size.height=p.canvas.height,p.textlines=_,p.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,p.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,p.canvas),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.bindTexture(h.TEXTURE_2D,null),p}}}();r.module("text",i)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){return{json:null,open:function(e){var r=t.localVars.zipfile,i={};if(null!=r){var n=r.file(e);null!=n&&(i=JSON.parse(n.asText()))}return this.json=i,this}}}();t.module("jsonfile",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize video module");var e=t.getModule("quad"),r=t.getModule("focusable"),i=t.getModule("sys");return{new:function(n){function o(){console.log("videoDone")}function a(){console.log("progress")}function s(){console.log("playing")}function l(){console.log("stalling")}function u(){console.log("suspend")}var c=t.localVars.gl,d=t.localVars.zipfile,h=r.new("video : "+n);h.glProgram=e.default_program.getProgram(),h.player=document.createElement("video");var f=!1;if(h.player.autoplay=!0,h.player.loop=!0,h.player.oncanplay=function(){f=!0},h.player.onerror=function(){var e="unknown error";switch(h.player.error.code){case 1:e="video loading aborted";break;case 2:e="network loading error";break;case 3:e="video decoding failed / corrupted data or unsupported codec";break;case 4:e="video not supported"}console.log("Error: "+e+" (errorcode="+h.player.error.code+")")},null!=d&&"http"!=n.slice(0,4)){var p=d.file(n);console.log("video.source zip",p,n,d),h.player.type="video/mp4",h.player.src="data:video/mp4;base64,"+JSZip.base64.encode(p.asBinary())}else console.log("video.source ",n),h.player.src=n,h.player.crossOrigin="anonymous";return i.ismobile.any()&&(h.click=function(e,t){console.log("video click",e,t),h.player.play()},h.focus=function(e,t){console.log("video focus",e,t)}),h.preload="auto",h.player.addEventListener("ended",o,!0),h.player.addEventListener("progress",a,!0),h.player.addEventListener("playing",s,!0),h.player.addEventListener("stalling",l,!0),h.player.addEventListener("suspend",u,!0),h.player.setAttribute("playsinline",""),h.player.setAttribute("webkit-playsinline",""),h.player.load(),h.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,h.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),h.draw=function(){if(1!=h.loaded)return void(f&&(console.log("video texture loaded : "+h.size.width+"x"+h.size.height+" : "+h.visible+","+h.alpha),null!=h.onload&&h.onload(),h.loaded=!0));c.useProgram(this.glProgram.program),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,h.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h.player),c.uniform1i(this.glProgram.u_texture_handle,0),c.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),c.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),c.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),c.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:e.buffer;c.bindBuffer(c.ARRAY_BUFFER,t),c.enableVertexAttribArray(this.glProgram.a_position_handle),c.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),c.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,c.FLOAT,!1,16,0),c.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,t.itemSize,c.FLOAT,!1,16,8),c.drawArrays(c.TRIANGLE_STRIP,0,t.numItems)},h.checkstatus=function(){console.log("video status : "+h.player.paused+" : "+h.player.buffered+" : "+h.player.error),console.log("readyState  :"+h.player.readyState),console.log("startDate  :"+h.player.startDate),console.log("duration  :"+h.player.duration),console.log("currentSrc  :"+h.player.currentSrc)},h}}}();t.module("video",r)}(),function(){var e=document.currentScript||document._currentScript,t=e.curlify,r=function(){console.log("initialize mesh module");var e=t.getModule("glutils"),r=t.getModule("object"),i=t.getModule("image");return{default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"              attribute vec3 a_position;              attribute vec3 a_normal;              attribute vec2 a_tex_coordinate;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            varying vec3 v_normal;              varying vec2 v_tex_coord;                            void main() {                mat4 modelViewProj = u_projection*u_view*u_model;                gl_Position = modelViewProj * vec4(a_position, 1.0);                v_normal = vec3(modelViewProj * vec4(a_normal, 0.0));                v_tex_coord = a_tex_coordinate;              }            ",type:"x-shader/x-vertex"},i={text:"              precision mediump float;                            varying vec3      v_normal;              varying vec2      v_tex_coord;                            uniform sampler2D u_texture;              uniform float     u_alpha;                            void main() {                vec4 color = texture2D(u_texture, v_tex_coord);                float diffuse = max(dot(normalize(v_normal), vec3(0.0, 0.0, 1.0)), 0.0) + 0.3;                gl_FragColor = color * u_alpha;              }            ",type:"x-shader/x-fragment"},n=t.localVars.gl,o=e.createShader(n,r),a=e.createShader(n,i);
this.glProgram=e.loadProgram(n,[o,a],["a_position","a_normal","a_tex_coordinate"],["u_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,n){var o=t.localVars.gl,a=t.localVars.zipfile,s=r.new("mesh : "+e);if(s.depthtest=!0,s.drawbackside=!0,s.loaded=!1,null!=n)if(n instanceof Object)null!=n.texture?(s.texture=n.texture,s.loaded=!0):console.log("ERROR: texture failed to load from object "+n);else{var l=i.loadImage(n);l.onload=function(){s.texture=o.createTexture(),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!0),o.bindTexture(o.TEXTURE_2D,s.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,l),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!1),s.loaded=!0},l.onerror=function(){console.log("ERROR: texture load failed for mesh "+e+" : "+n),s.loaded=!0}}else console.log("WARNING: no texture defined for mesh "+e),s.loaded=!0;if(e instanceof Object)s.mesh=e.mesh;else if(null!=a){console.log("zipfile load",e);var u=a.file(e);s.mesh=new OBJ.Mesh(u.asBinary()),OBJ.initMeshBuffers(o,s.mesh)}else console.log("download load",n),OBJ.downloadMeshes({model:e},function(e){s.mesh=e.model,OBJ.initMeshBuffers(o,s.mesh)});return s.draw=function(){0!=this.loaded&&null!=this.mesh&&(o.useProgram(this.glProgram.program),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,s.texture),o.uniform1i(this.glProgram.u_texture_handle,0),o.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),o.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),o.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),o.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.modelMatrix),o.enableVertexAttribArray(this.glProgram.a_position_handle),o.enableVertexAttribArray(this.glProgram.a_normal_handle),o.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),o.bindBuffer(o.ARRAY_BUFFER,this.mesh.vertexBuffer),o.vertexAttribPointer(this.glProgram.a_position_handle,this.mesh.vertexBuffer.itemSize,o.FLOAT,!1,0,0),this.mesh.textures.length?(o.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),o.bindBuffer(o.ARRAY_BUFFER,this.mesh.textureBuffer),o.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,this.mesh.textureBuffer.itemSize,o.FLOAT,!1,0,0)):o.disableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),o.bindBuffer(o.ARRAY_BUFFER,this.mesh.normalBuffer),o.vertexAttribPointer(this.glProgram.a_normal_handle,this.mesh.normalBuffer.itemSize,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.mesh.indexBuffer),o.drawElements(o.TRIANGLES,this.mesh.indexBuffer.numItems,o.UNSIGNED_SHORT,0))},s.glProgram=this.default_program.getProgram(),s}}}();t.module("mesh",r)}(),function(){function createProjection(e,t,r,i){var n=mat4.clone([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);return n[0]=r/e,n[5]=r/t,n[10]=-(i+r)/(i-r),n[11]=-1,n[14]=-2*i*r/(i-r),n}function createProjectionAndView(e,t,r,i){var n=createProjection(1,t/e,r,i),o=mat4.create();mat4.translate(o,o,vec3.clone([0,0,-(i-r)/2]));var a=(i-r)/2/r,s={near:r,far:i,width:e,height:t,projectionMatrix:n,viewMatrix:o,translateScale:a};return s}function initWebGL(e,t){gl=null;try{gl=e.getContext("webgl",t)||e.getContext("experimental-webgl")}catch(e){console.log(e)}return void 0===gl&&(console.log("ERROR: Unable to initialize WebGL in target node"),gl=null),gl}function swipestart(e){pointerTimestamp=sys.timestamp(),lastPointerPosition.x=e.x,lastPointerPosition.y=e.y,pointerDirection.x=0,pointerDirection.y=0,pointerTargetDirection.x=0,pointerTargetDirection.y=0}function swipedrag(e){var t=sys.timestamp()-pointerTimestamp,r=e.x-lastPointerPosition.x,i=e.y-lastPointerPosition.y,n=Math.max(t,16.66);pointerTargetDirection.x=r/(n/16.66),pointerTargetDirection.y=i/(n/16.66),pointerDirection.y<0&&(pointerDirection.y=Math.min(pointerDirection.y,pointerTargetDirection.y)),pointerDirection.y>0&&(pointerDirection.y=Math.max(pointerDirection.y,pointerTargetDirection.y)),pointerDirection.x<0&&(pointerDirection.x=Math.min(pointerDirection.x,pointerTargetDirection.x)),pointerDirection.x>0&&(pointerDirection.x=Math.max(pointerDirection.x,pointerTargetDirection.x));var o=pointerTargetDirection.y/Math.abs(pointerTargetDirection.y),a=pointerDirection.y/Math.abs(pointerDirection.y);o!=a&&(pointerDirection.y=pointerTargetDirection.y);var o=pointerTargetDirection.x/Math.abs(pointerTargetDirection.x),a=pointerDirection.x/Math.abs(pointerDirection.x);o!=a&&(pointerDirection.x=pointerTargetDirection.x),lastPointerPosition.x=e.x,lastPointerPosition.y=e.y}function swipeend(){var e=.08*viewWidth,t=.07*viewHeight,r=pointerDirection.x;r>0&&(r=Math.min(1,r/e)),0>r&&(r=Math.max(-1,r/e));var i=pointerDirection.y;i>0&&(i=Math.min(1,i/t)),0>i&&(i=Math.max(-1,i/t));var n={x:r,y:i};return n}function mousedown(e){if(!scene.isAnimating()&&1!=touch){var t=e.currentTarget.getBoundingClientRect();touch=!0;var r=scene.getPointerUser();if(null!=r){var i={x:(e.clientX*scaleMulti-t.left-layoutOffset.x)*layoutScale.x,y:(e.clientY*scaleMulti-t.top-layoutOffset.y)*layoutScale.y};swipestart(i),r.press(i.x,i.y),r.drag(i.x,i.y)}}}function mouseup(e){if(scene.isAnimating()||0==touch)return void scene.resetPointerStealer();console.log("mouseup : "+e.clientX+","+e.clientY);var t=e.currentTarget.getBoundingClientRect();touch=!1;var r=scene.getPointerUser();if(null!=r){var i={x:(e.clientX*scaleMulti-t.left-layoutOffset.x)*layoutScale.x,y:(e.clientY*scaleMulti-t.top-layoutOffset.y)*layoutScale.y},n=swipeend(i);r.swipe(n)?resetpress():r.release(i.x,i.y),scene.resetPointerStealer()}}function mouseout(e){touch&&mouseup(e)}function mousemove(e){if(!scene.isAnimating()&&0!=touch){var t=e.currentTarget.getBoundingClientRect(),r=scene.getPointerUser();if(null!=r&&touch){var i={x:(e.clientX*scaleMulti-t.left-layoutOffset.x)*layoutScale.x,y:(e.clientY*scaleMulti-t.top-layoutOffset.y)*layoutScale.y};swipedrag(i),r.drag(i.x,i.y)}}}function touchstart(e){if(allowDefaultPointerEvent=!1,!scene.isAnimating()&&1!=touch){var t=e.currentTarget.getBoundingClientRect();touch=!0;var r=scene.getPointerUser();if(null!=r){var i={x:(e.touches[0].pageX*scaleMulti-t.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,y:(e.touches[0].pageY*scaleMulti-t.top-window.pageYOffset-layoutOffset.y)*layoutScale.y};console.log("rel: "+i.x,i.y),swipestart(i),r.press(i.x,i.y),r.drag(i.x,i.y),lasttouch=e,0==allowDefaultPointerEvent&&e.preventDefault()}}}function touchend(e){if(allowDefaultPointerEvent=!1,scene.isAnimating()||0==touch)return void scene.resetPointerStealer();var t=e.currentTarget.getBoundingClientRect();touch=!1;var r=scene.getPointerUser();if(null!=r){var i={x:(lasttouch.touches[0].pageX*scaleMulti-t.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,y:(lasttouch.touches[0].pageY*scaleMulti-t.top-window.pageYOffset-layoutOffset.y)*layoutScale.y},n=swipeend(i);r.swipe(n)?resetpress():r.release(i.x,i.y),scene.resetPointerStealer()}}function touchmove(e){if(!scene.isAnimating()&&0!=touch){var t=e.currentTarget.getBoundingClientRect(),r=scene.getPointerUser();if(null!=r){if(touch){var i={x:(e.touches[0].pageX*scaleMulti-t.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,y:(e.touches[0].pageY*scaleMulti-t.top-window.pageYOffset-layoutOffset.y)*layoutScale.y};swipedrag(i),r.drag(i.x,i.y)}lasttouch=e,0==allowDefaultPointerEvent&&e.preventDefault()}}}function deviceMotionHandler(e){sensors.acceleration=e.acceleration,!isany_mobile||null!==sensors.acceleration&&null!==sensors.acceleration.x||(sensors.acceleration=e.accelerationIncludingGravity),!hasRotation||null!==e.rotationRate&&null!==e.rotationRate.alpha?hasRotation&&(sensors.rotationRate=e.rotationRate):hasRotation=!1}function deviceOrientationHandler(e){null!=e&&(isany_mobile&&!hasRotation&&null!==sensors.orientation&&null!==sensors.orientation.alpha&&(sensors.rotationRate={beta:sensors.orientation.alpha-(e.alpha+orientation_hack),alpha:sensors.orientation.beta-e.beta,gamma:sensors.orientation.gamma-e.gamma}),sensors.orientation={alpha:e.alpha+orientation_hack,beta:e.beta,gamma:e.gamma})}function orientationChanged(){window.requestAnimationFrame(curlify.resizeCanvas)}function resizeCanvas(){var e=Math.floor(glcanvas.clientWidth),t=Math.floor(glcanvas.clientHeight);layoutWidth=e,layoutHeight=t,layoutScale={x:screenWidth/layoutWidth,y:screenHeight/layoutHeight},viewWidth=screenWidth,viewHeight=screenHeight;var r=Math.max(layoutScale.x,layoutScale.y);aspectratioZoom&&(r=Math.min(layoutScale.x,layoutScale.y),viewWidth=e*r,viewHeight=t*r),layoutScale.x=r,layoutScale.y=r,layoutWidth=Math.floor(screenWidth*(1/r)),layoutHeight=Math.floor(screenHeight*(1/r)),layoutOffset.x=(e-layoutWidth)/2,layoutOffset.y=(t-layoutHeight)/2,glcanvas.width=glcanvas.clientWidth,glcanvas.height=glcanvas.clientHeight,curlify.localVars.layoutWidth=layoutWidth,curlify.localVars.layoutHeight=layoutHeight,curlify.localVars.layoutScale=layoutScale,curlify.localVars.layoutOffset=layoutOffset,curlify.localVars.viewWidth=viewWidth,curlify.localVars.viewHeight=viewHeight,curlify.localVars.screenWidth=screenWidth,curlify.localVars.screenHeight=screenHeight,console.log("resizeCanvas "+glcanvas.clientWidth+"x"+glcanvas.clientHeight+" "+screenWidth+"x"+screenHeight+" "+layoutWidth+"x"+layoutHeight+" "+glcanvas.width+","+glcanvas.height),scene.layoutChanged()}function mergeRecursive(e,t){for(var r in t)try{e[r]=t[r].constructor==Object?mergeRecursive(e[r],t[r]):t[r]}catch(i){e[r]=t[r]}return e}function getRandom(e,t){return Math.floor(Math.random()*(t-e)+e)}function spawn(e){return function(){function t(e,t){var o;try{o=r[e](t)}catch(e){return Promise.reject(e)}return o.done?o.value:Promise.resolve(o.value).then(i,n)}var r=e.apply(this,arguments),i=t.bind(t,"next"),n=t.bind(t,"throw");return i()}}function createCORSRequest(e,t,r){return new Promise(function(i,n){var o=new XMLHttpRequest;if("withCredentials"in o)o.open(e,t,!0);else{if("undefined"==typeof XDomainRequest)return o=null,void n(Error("createCORSRequest failed with 'XMLHttpRequest not supported'"));o=new XDomainRequest,o.open(e,t)}o.onload=function(){200==o.status?i(o.response):n(Error("cors request failed with '"+o.statusText+"'"))},o.onerror=function(){n(Error("cors request failed with 'Network Error'"))},null!=r&&r instanceof FormData==0&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(r)})}function require(script){var module=curlify.getModule(script);return null!=module?(console.log("return module '"+script+"'",module),module):new Promise(function(resolve,reject){var scriptid=script,element=document.getElementById(scriptid);null==element?".zip"==script.slice(-4)?JSZipUtils.getBinaryContent(script,function(err,data){if(err)return void reject(Error("require zip load failed for '"+script+"' with '"+err+"'"));zipfile=new JSZip(data),curlify.localVars.zipfile=zipfile;var adscriptfile=zipfile.file("main.js");if(null==adscriptfile)return zipfile=null,curlify.localVars.zipfile=null,void reject(Error("require failed for '"+script+"' with 'main.js not found inside zip'"));var scriptobject=null;try{scriptobject=eval(adscriptfile.asText())}catch(e){return zipfile=null,curlify.localVars.zipfile=null,void reject(Error("require eval failed for zip '"+script+"' with '"+e+"'"))}resolve(scriptobject)}):(element=document.createElement("script"),element.setAttribute("id",scriptid),element.setAttribute("type","text/javascript"),document.head.appendChild(element),appendedElements.push(scriptid),".js"==script.slice(-3)?createCORSRequest("GET",script).then(function(response){try{element.scriptobject=eval(response)}catch(e){return void reject(Error("require eval failed for '"+script+"' with '"+e+"'",response))}resolve(element.scriptobject)},function(e){reject(Error("require load failed for '"+script+"' with '"+e+"'"))}):(element.setAttribute("src",script),element.onload=function(){resolve()},element.onerror=function(){reject(Error("require failed for '"+script+"'"))})):resolve(element.scriptobject)})}function isElementInViewport(e){var t=e.getBoundingClientRect();return t.bottom>=0&&t.right>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)}var revision="7.1";console.log("initialize main",revision);var scaleMulti=1,curScript=document.currentScript||document._currentScript,currentScript=curScript,curlify=curScript.curlify;eval(curlify.extract(curlify.modules,"curlify.modules")),eval(curlify.extract(curlify.localVars,"curlify.localVars"));var glcanvas,glclearcolor=0,aspectratioZoom=!0,touch=!1,lasttouch=null,lastPointerPosition={x:0,y:0},pointerTargetDirection={x:0,y:0},pointerDirection={x:0,y:0},pointerTimestamp=0,renderRequested=!0,imageid=0,running=!1,appendedElements=[],allowDefaultPointerEvent=!1,hasRotation=!0,isany_mobile=sys.ismobile.any();sys.ismobile.FireFox()&&(hasRotation=!1);var orientation_hack=isany_mobile?-180:0;curlify.resizeCanvas=resizeCanvas,curlify.addImageElement=function(){var e="curlify_image_"+imageid,t=document.createElement("img");return t.setAttribute("id",e),document.body.appendChild(t),appendedElements.push(e),imageid+=1,t},curlify.requestRender=function(){renderRequested=!0},curlify.render=function(){0!=running&&(document.hidden||0==isElementInViewport(glcanvas)||(renderRequested=!1,gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.disable(gl.DEPTH_TEST),gl.enable(gl.CULL_FACE),gl.cullFace(gl.FRONT),gl.viewport(layoutOffset.x,layoutOffset.y,layoutWidth,layoutHeight),scene.render()))},curlify.stop=function(){if(console.log("Cleaning up..."),null==glcanvas)return void console.log("ERROR: canvas not set");"ontouchstart"in window?(glcanvas.removeEventListener("touchstart",touchstart,!1),glcanvas.removeEventListener("touchmove",touchmove,!1),glcanvas.removeEventListener("touchend",touchend,!1)):(glcanvas.removeEventListener("mousedown",mousedown,!1),glcanvas.removeEventListener("mousemove",mousemove,!1),glcanvas.removeEventListener("mouseup",mouseup,!1),glcanvas.removeEventListener("mouseout",mouseout,!1)),window.DeviceMotionEvent&&window.removeEventListener("devicemotion",deviceMotionHandler,!1),window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",deviceOrientationHandler,!1),window.removeEventListener("orientationchange",orientationChanged),window.removeEventListener("resize",orientationChanged),scene.removeAllScenes();for(var e=0;e<appendedElements.length;e++){var t=appendedElements[e],r=document.getElementById(t);r.parentNode.removeChild(r)}appendedElements=[],null!=curlify.intervalId&&window.clearInterval(curlify.intervalId),curlify.clearModuleBuffersAndPrograms(),running=!1},curlify.start=function(e){if(console.log("curlify.start",e,revision),running&&curlify.stop(),running=!0,null==e.script)return void console.log("ERROR: no script source set");if(screenWidth=e.width?e.width:480,screenHeight=e.height?e.height:852,curlify.localVars.screenWidth=screenWidth,curlify.localVars.screenHeight=screenHeight,glcanvas=e.canvas?document.getElementById(e.canvas):currentScript.parentNode,curlify.localVars.glcanvas=glcanvas,curlify.localVars.autosize=e.autosize,e.autosize===!0){var t=window.devicePixelRatio||1;scaleMulti=t;var r=1/window.devicePixelRatio;if(sys.ismobile.Android()&&!sys.ismobile.FireFox()||sys.ismobile.iOS())glcanvas.parentNode.style.zoom=r;else{glcanvas.style.width=window.devicePixelRatio+"00%",glcanvas.style.height=window.devicePixelRatio+"00%";var i=glcanvas.parentNode.getAttribute("style");glcanvas.parentNode.setAttribute("style",i+"-moz-transform: scale("+r+");-moz-transform-origin: 0 0;-o-transform: scale("+r+");-o-transform-origin: 0 0;zoom:"+r+";transform: scale("+r+");transform-origin: 0 0;")}}if(null===glcanvas)return void(e.canvas?console.log("ERROR: cannot find canvas to draw on:",e.canvas):console.log("ERROR: no canvas to draw to as parentNode:",glcanvas));if(resizeCanvas(),gl=initWebGL(glcanvas,e.glparameters),curlify.localVars.gl=gl,void 0===gl)return void console.log("ERROR: could not initialize webgl");"ontouchstart"in window?(glcanvas.addEventListener("touchstart",touchstart,!1),glcanvas.addEventListener("touchmove",touchmove,!1),glcanvas.addEventListener("touchend",touchend,!1)):(glcanvas.addEventListener("mousedown",mousedown,!1),glcanvas.addEventListener("mousemove",mousemove,!1),glcanvas.addEventListener("mouseup",mouseup,!1),glcanvas.addEventListener("mouseout",mouseout,!1)),camera=createProjectionAndView(screenWidth,screenHeight,3,100),curlify.localVars.camera=camera,window.DeviceMotionEvent?window.addEventListener("devicemotion",deviceMotionHandler,!1):console.log("DeviceMotionEvent not supported"),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",deviceOrientationHandler,!1):console.log("DeviceOrientationEvent not supported");var n=("onorientationchange"in window,"resize");window.addEventListener(n,function(){orientationChanged()},!1),require(e.script).then(function(t){scene.openScene(t.new()),null!=e.onload&&e.onload(),zipfile=null,curlify.localVars.zipfile=null;var r=e.framerate?e.framerate:60;curlify.intervalId=window.setInterval(curlify.render,1e3/r)})}}();