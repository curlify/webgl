/**
@preserve

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.JSZip=t()}}(function(){return function t(e,r,i){function n(o,s){if(!r[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return n(r?r:t)},u,u.exports,t,e,r,i)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e,r){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,n,a,o,s,l,u="",c=0;c<t.length;)e=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c++),a=e>>2,o=(3&e)<<4|r>>4,s=(15&r)<<2|n>>6,l=63&n,isNaN(r)?s=l=64:isNaN(n)&&(l=64),u=u+i.charAt(a)+i.charAt(o)+i.charAt(s)+i.charAt(l);return u},r.decode=function(t){var e,r,n,a,o,s,l,u="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)a=i.indexOf(t.charAt(c++)),o=i.indexOf(t.charAt(c++)),s=i.indexOf(t.charAt(c++)),l=i.indexOf(t.charAt(c++)),e=a<<2|o>>4,r=(15&o)<<4|s>>2,n=(3&s)<<6|l,u+=String.fromCharCode(e),64!=s&&(u+=String.fromCharCode(r)),64!=l&&(u+=String.fromCharCode(n));return u}},{}],2:[function(t,e){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=r},{}],3:[function(t,e,r){"use strict";r.STORE={magic:"\x00\x00",compress:function(t){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},r.DEFLATE=t("./flate")},{"./flate":8}],4:[function(t,e){"use strict";var r=t("./utils"),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var n="string"!==r.getTypeOf(t);"undefined"==typeof e&&(e=0);var a=0,o=0,s=0;e=-1^e;for(var l=0,u=t.length;u>l;l++)s=n?t[l]:t.charCodeAt(l),o=255&(e^s),a=i[o],e=e>>>8^a;return-1^e}},{"./utils":21}],5:[function(t,e){"use strict";function r(){this.data=null,this.length=0,this.index=0}var i=t("./utils");r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=r},{"./utils":21}],6:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.comment=null},{}],7:[function(t,e,r){"use strict";var i=t("./utils");r.string2binary=function(t){return i.string2binary(t)},r.string2Uint8Array=function(t){return i.transformTo("uint8array",t)},r.uint8Array2String=function(t){return i.transformTo("string",t)},r.string2Blob=function(t){var e=i.transformTo("arraybuffer",t);return i.arrayBuffer2Blob(e)},r.arrayBuffer2Blob=function(t){return i.arrayBuffer2Blob(t)},r.transformTo=function(t,e){return i.transformTo(t,e)},r.getTypeOf=function(t){return i.getTypeOf(t)},r.checkSupport=function(t){return i.checkSupport(t)},r.MAX_VALUE_16BITS=i.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=i.MAX_VALUE_32BITS,r.pretty=function(t){return i.pretty(t)},r.findCompression=function(t){return i.findCompression(t)},r.isRegExp=function(t){return i.isRegExp(t)}},{"./utils":21}],8:[function(t,e,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=t("pako");r.uncompressInputType=i?"uint8array":"array",r.compressInputType=i?"uint8array":"array",r.magic="\b\x00",r.compress=function(t){return n.deflateRaw(t)},r.uncompress=function(t){return n.inflateRaw(t)}},{pako:24}],9:[function(t,e){"use strict";function r(t,e){return this instanceof r?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new r(t,e)}var i=t("./base64");r.prototype=t("./object"),r.prototype.load=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.utils=t("./deprecatedPublicUtils"),r.base64={encode:function(t){return i.encode(t)},decode:function(t){return i.decode(t)}},r.compressions=t("./compressions"),e.exports=r},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(t,e){"use strict";var r=t("./base64"),i=t("./zipEntries");e.exports=function(t,e){var n,a,o,s;for(e=e||{},e.base64&&(t=r.decode(t)),a=new i(t,e),n=a.files,o=0;o<n.length;o++)s=n[o],this.file(s.fileName,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileComment.length?s.fileComment:null,createFolders:e.createFolders});return a.zipComment.length&&(this.comment=a.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(t,e){(function(t){"use strict";e.exports=function(e,r){return new t(e,r)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(t,e){"use strict";function r(t){this.data=t,this.length=this.data.length,this.index=0}var i=t("./uint8ArrayReader");r.prototype=new i,r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./uint8ArrayReader":18}],13:[function(t,e){"use strict";var r=t("./support"),i=t("./utils"),n=t("./crc32"),a=t("./signature"),o=t("./defaults"),s=t("./base64"),l=t("./compressions"),u=t("./compressedObject"),c=t("./nodeBuffer"),d=t("./utf8"),h=t("./stringWriter"),f=t("./uint8ArrayWriter"),p=function(t){if(t._data instanceof u&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===i.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},m=function(t){var e=p(t),n=i.getTypeOf(e);return"string"===n?!t.options.binary&&r.nodebuffer?c(e,"utf-8"):t.asBinary():e},g=function(t){var e=p(this);return null===e||"undefined"==typeof e?"":(this.options.base64&&(e=s.decode(e)),e=t&&this.options.binary?R.utf8decode(e):i.transformTo("string",e),t||this.options.binary||(e=i.transformTo("string",R.utf8encode(e))),e)},_=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this._data=e,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};_.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var t=m(this);return i.transformTo("nodebuffer",t)},asUint8Array:function(){var t=m(this);return i.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var v=function(t,e){var r,i="";for(r=0;e>r;r++)i+=String.fromCharCode(255&t),t>>>=8;return i},w=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof r[e]&&(r[e]=arguments[t][e]);return r},x=function(t){return t=t||{},t.base64!==!0||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=w(t,o),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},y=function(t,e,r){var n,a=i.getTypeOf(e);if(r=x(r),r.createFolders&&(n=b(t))&&E.call(this,n,!0),r.dir||null===e||"undefined"==typeof e)r.base64=!1,r.binary=!1,e=null;else if("string"===a)r.binary&&!r.base64&&r.optimizedBinaryString!==!0&&(e=i.string2binary(e));else{if(r.base64=!1,r.binary=!0,!(a||e instanceof u))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===a&&(e=i.transformTo("uint8array",e))}var o=new _(t,e,r);return this.files[t]=o,o},b=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},E=function(t,e){return"/"!=t.slice(-1)&&(t+="/"),e="undefined"!=typeof e?e:!1,this.files[t]||y.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},M=function(t,e){var r,a=new u;return t._data instanceof u?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=l.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(r=t._data.getContent(),a.compressedContent=e.compress(i.transformTo(e.compressInputType,r)))):(r=m(t),(!r||0===r.length||t.dir)&&(e=l.STORE,r=""),a.uncompressedSize=r.length,a.crc32=n(r),a.compressedContent=e.compress(i.transformTo(e.compressInputType,r))),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},T=function(t,e,r,o){var s,l,u,c,h=(r.compressedContent,i.transformTo("string",d.utf8encode(e.name))),f=e.comment||"",p=i.transformTo("string",d.utf8encode(f)),m=h.length!==e.name.length,g=p.length!==f.length,_=e.options,w="",x="",y="";u=e._initialMetadata.dir!==e.dir?e.dir:_.dir,c=e._initialMetadata.date!==e.date?e.date:_.date,s=c.getHours(),s<<=6,s|=c.getMinutes(),s<<=5,s|=c.getSeconds()/2,l=c.getFullYear()-1980,l<<=4,l|=c.getMonth()+1,l<<=5,l|=c.getDate(),m&&(x=v(1,1)+v(n(h),4)+h,w+="up"+v(x.length,2)+x),g&&(y=v(1,1)+v(this.crc32(p),4)+p,w+="uc"+v(y.length,2)+y);var b="";b+="\n\x00",b+=m||g?"\x00\b":"\x00\x00",b+=r.compressionMethod,b+=v(s,2),b+=v(l,2),b+=v(r.crc32,4),b+=v(r.compressedSize,4),b+=v(r.uncompressedSize,4),b+=v(h.length,2),b+=v(w.length,2);var E=a.LOCAL_FILE_HEADER+b+h+w,M=a.CENTRAL_FILE_HEADER+"\x00"+b+v(p.length,2)+"\x00\x00\x00\x00"+(u===!0?"\x00\x00\x00":"\x00\x00\x00\x00")+v(o,4)+h+w+p;return{fileRecord:E,dirRecord:M,compressedObject:r}},R={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,r,i,n,a=[];for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],n=new _(i.name,i._data,w(i.options)),r=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(r,n)&&a.push(n));return a},file:function(t,e,r){if(1===arguments.length){if(i.isRegExp(t)){var n=t;return this.filter(function(t,e){return!e.dir&&n.test(t)})}return this.filter(function(e,r){return!r.dir&&e===t})[0]||null}return t=this.root+t,y.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(i.isRegExp(t))return this.filter(function(e,r){return r.dir&&t.test(e)});var e=this.root+t,r=E.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter(function(e,r){return r.name.slice(0,t.length)===t}),i=0;i<r.length;i++)delete this.files[r[i].name];return this},generate:function(t){t=w(t||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),i.checkSupport(t.type);var e,r,n=[],o=0,u=0,c=i.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var d in this.files)if(this.files.hasOwnProperty(d)){var p=this.files[d],m=p.options.compression||t.compression.toUpperCase(),g=l[m];if(!g)throw new Error(m+" is not a valid compression method !");var _=M.call(this,p,g),x=T.call(this,d,p,_,o);o+=x.fileRecord.length+_.compressedSize,u+=x.dirRecord.length,n.push(x)}var y="";y=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+v(n.length,2)+v(n.length,2)+v(u,4)+v(o,4)+v(c.length,2)+c;var b=t.type.toLowerCase();for(e="uint8array"===b||"arraybuffer"===b||"blob"===b||"nodebuffer"===b?new f(o+u+y.length):new h(o+u+y.length),r=0;r<n.length;r++)e.append(n[r].fileRecord),e.append(n[r].compressedObject.compressedContent);for(r=0;r<n.length;r++)e.append(n[r].dirRecord);e.append(y);var E=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(t.type.toLowerCase(),E);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",E));case"base64":return t.base64?s.encode(E):E;default:return E}},crc32:function(t,e){return n(t,e)},utf8encode:function(t){return i.transformTo("string",d.utf8encode(t))},utf8decode:function(t){return d.utf8decode(t)}};e.exports=R},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],15:[function(t,e){"use strict";function r(t,e){this.data=t,e||(this.data=n.string2binary(this.data)),this.length=this.data.length,this.index=0}var i=t("./dataReader"),n=t("./utils");r.prototype=new i,r.prototype.byteAt=function(t){return this.data.charCodeAt(t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":5,"./utils":21}],16:[function(t,e){"use strict";var r=t("./utils"),i=function(){this.data=[]};i.prototype={append:function(t){t=r.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=i},{"./utils":21}],17:[function(t,e,r){(function(t){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var e=new ArrayBuffer(0);try{r.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,n=new i;n.append(e),r.blob=0===n.getBlob("application/zip").size}catch(t){r.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(t,e){"use strict";function r(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var i=t("./dataReader");r.prototype=new i,r.prototype.byteAt=function(t){return this.data[t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===e&&this.data[a+1]===r&&this.data[a+2]===i&&this.data[a+3]===n)return a;return-1},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":5}],19:[function(t,e){"use strict";var r=t("./utils"),i=function(t){this.data=new Uint8Array(t),this.index=0};i.prototype={append:function(t){0!==t.length&&(t=r.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=i},{"./utils":21}],20:[function(t,e,r){"use strict";for(var i=t("./utils"),n=t("./support"),a=t("./nodeBuffer"),o=new Array(256),s=0;256>s;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;o[254]=o[254]=1;var l=function(t){var e,r,i,a,o,s=t.length,l=0;for(a=0;s>a;a++)r=t.charCodeAt(a),55296===(64512&r)&&s>a+1&&(i=t.charCodeAt(a+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),a++)),l+=128>r?1:2048>r?2:65536>r?3:4;for(e=n.uint8array?new Uint8Array(l):new Array(l),o=0,a=0;l>o;a++)r=t.charCodeAt(a),55296===(64512&r)&&s>a+1&&(i=t.charCodeAt(a+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),a++)),128>r?e[o++]=r:2048>r?(e[o++]=192|r>>>6,e[o++]=128|63&r):65536>r?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},u=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+o[t[r]]>e?r:e},c=function(t){var e,r,n,a,s=t.length,l=new Array(2*s);for(r=0,e=0;s>e;)if(n=t[e++],128>n)l[r++]=n;else if(a=o[n],a>4)l[r++]=65533,e+=a-1;else{for(n&=2===a?31:3===a?15:7;a>1&&s>e;)n=n<<6|63&t[e++],a--;a>1?l[r++]=65533:65536>n?l[r++]=n:(n-=65536,l[r++]=55296|n>>10&1023,l[r++]=56320|1023&n)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),i.applyFromCharCode(l)};r.utf8encode=function(t){return n.nodebuffer?a(t,"utf-8"):l(t)},r.utf8decode=function(t){if(n.nodebuffer)return i.transformTo("nodebuffer",t).toString("utf-8");t=i.transformTo(n.uint8array?"uint8array":"array",t);for(var e=[],r=0,a=t.length,o=65536;a>r;){var s=u(t,Math.min(r+o,a));e.push(c(n.uint8array?t.subarray(r,s):t.slice(r,s))),r=s}return e.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(t,e,r){"use strict";function i(t){return t}function n(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}function a(t){var e=65536,i=[],n=t.length,a=r.getTypeOf(t),o=0,s=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(t){s=!1}if(!s){for(var l="",c=0;c<t.length;c++)l+=String.fromCharCode(t[c]);return l}for(;n>o&&e>1;)try{i.push("array"===a||"nodebuffer"===a?String.fromCharCode.apply(null,t.slice(o,Math.min(o+e,n))):String.fromCharCode.apply(null,t.subarray(o,Math.min(o+e,n)))),o+=e}catch(t){e=Math.floor(e/2)}return i.join("")}function o(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}var s=t("./support"),l=t("./compressions"),u=t("./nodeBuffer");r.string2binary=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r));return e},r.arrayBuffer2Blob=function(t){r.checkSupport("blob");try{return new Blob([t],{type:"application/zip"})}catch(r){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=new e;return i.append(t),i.getBlob("application/zip")}catch(t){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=a;var c={};c.string={string:i,array:function(t){return n(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return n(t,new Uint8Array(t.length))},nodebuffer:function(t){return n(t,u(t.length))}},c.array={string:a,array:i,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(t)}},c.arraybuffer={string:function(t){return a(new Uint8Array(t))},array:function(t){return o(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:i,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(new Uint8Array(t))}},c.uint8array={string:a,array:function(t){return o(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:i,nodebuffer:function(t){return u(t)}},c.nodebuffer={string:a,array:function(t){return o(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return o(t,new Uint8Array(t.length))},nodebuffer:i},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var i=r.getTypeOf(e),n=c[i][t](e);return n},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":s.nodebuffer&&u.test(t)?"nodebuffer":s.uint8array&&t instanceof Uint8Array?"uint8array":s.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){var e=s[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,i="";for(r=0;r<(t||"").length;r++)e=t.charCodeAt(r),i+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return i},r.findCompression=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null},r.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(t,e){"use strict";function r(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var i=t("./stringReader"),n=t("./nodeBufferReader"),a=t("./uint8ArrayReader"),o=t("./utils"),s=t("./signature"),l=t("./zipEntry"),u=t("./support"),c=t("./object");r.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+o.pretty(e)+", expected "+o.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=c.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,i=this.zip64EndOfCentralSize-44,n=0;i>n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===s.CENTRAL_FILE_HEADER;)t=new l({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(-1===t)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(t),this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===t)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=o.getTypeOf(t);this.reader="string"!==e||u.uint8array?"nodebuffer"===e?new n(t):new a(o.transformTo("uint8array",t)):new i(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=r},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(t,e){"use strict";function r(t,e){this.options=t,this.loadOptions=e}var i=t("./stringReader"),n=t("./utils"),a=t("./compressedObject"),o=t("./object");r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(t,e,r){return function(){var i=t.index;t.setIndex(e);var n=t.readData(r);return t.setIndex(i),n}},prepareContent:function(t,e,r,i,a){return function(){var t=n.transformTo(i.uncompressInputType,this.getCompressedContent()),e=i.uncompress(t);if(e.length!==a)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(e=n.findCompression(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=n.transformTo("string",this.decompressed.getContent()),o.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readString(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength),this.dir=16&this.externalFileAttributes?!0:!1},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=new i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,r,i,n=t.index;for(this.extraFields=this.extraFields||{};t.index<n+this.extraFieldsLength;)e=t.readInt(2),r=t.readInt(2),i=t.readString(r),this.extraFields[e]={id:e,length:r,value:i}},handleUTF8:function(){if(this.useUTF8())this.fileName=o.utf8decode(this.fileName),this.fileComment=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new i(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new i(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null}},e.exports=r},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(t,e){"use strict";var r=t("./lib/utils/common").assign,i=t("./lib/deflate"),n=t("./lib/inflate"),a=t("./lib/zlib/constants"),o={};r(o,i,n,a),e.exports=o},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(t,e,r){"use strict";function i(t,e){var r=new v(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function n(t,e){return e=e||{},e.raw=!0,i(t,e)}function a(t,e){return e=e||{},e.gzip=!0,i(t,e)}var o=t("./zlib/deflate.js"),s=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),c=t("./zlib/zstream"),d=0,h=4,f=0,p=1,m=-1,g=0,_=8,v=function(t){this.options=s.assign({level:m,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==f)throw new Error(u[r]);e.header&&o.deflateSetHeader(this.strm,e.header)
};v.prototype.push=function(t,e){var r,i,n=this.strm,a=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?h:d,n.input="string"==typeof t?l.string2buf(t):t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new s.Buf8(a),n.next_out=0,n.avail_out=a),r=o.deflate(n,i),r!==p&&r!==f)return this.onEnd(r),this.ended=!0,!1;(0===n.avail_out||0===n.avail_in&&i===h)&&this.onData("string"===this.options.to?l.buf2binstring(s.shrinkBuf(n.output,n.next_out)):s.shrinkBuf(n.output,n.next_out))}while((n.avail_in>0||0===n.avail_out)&&r!==p);return i===h?(r=o.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===f):!0},v.prototype.onData=function(t){this.chunks.push(t)},v.prototype.onEnd=function(t){t===f&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=v,r.deflate=i,r.deflateRaw=n,r.gzip=a},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(t,e,r){"use strict";function i(t,e){var r=new h(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function n(t,e){return e=e||{},e.raw=!0,i(t,e)}var a=t("./zlib/inflate.js"),o=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),c=t("./zlib/zstream"),d=t("./zlib/gzheader"),h=function(t){this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,e.windowBits);if(r!==l.Z_OK)throw new Error(u[r]);this.header=new d,a.inflateGetHeader(this.strm,this.header)};h.prototype.push=function(t,e){var r,i,n,u,c,d=this.strm,h=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?l.Z_FINISH:l.Z_NO_FLUSH,d.input="string"==typeof t?s.binstring2buf(t):t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new o.Buf8(h),d.next_out=0,d.avail_out=h),r=a.inflate(d,l.Z_NO_FLUSH),r!==l.Z_STREAM_END&&r!==l.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0===d.avail_out||r===l.Z_STREAM_END||0===d.avail_in&&i===l.Z_FINISH)&&("string"===this.options.to?(n=s.utf8border(d.output,d.next_out),u=d.next_out-n,c=s.buf2string(d.output,n),d.next_out=u,d.avail_out=h-u,u&&o.arraySet(d.output,d.output,n,u,0),this.onData(c)):this.onData(o.shrinkBuf(d.output,d.next_out)))}while(d.avail_in>0&&r!==l.Z_STREAM_END);return r===l.Z_STREAM_END&&(i=l.Z_FINISH),i===l.Z_FINISH?(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l.Z_OK):!0},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===l.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=h,r.inflate=i,r.inflateRaw=n,r.ungzip=i},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(t,e,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+i),n);for(var a=0;i>a;a++)t[n+a]=e[r+a]},flattenChunks:function(t){var e,r,i,n,a,o;for(i=0,e=0,r=t.length;r>e;e++)i+=t[e].length;for(o=new Uint8Array(i),n=0,e=0,r=t.length;r>e;e++)a=t[e],o.set(a,n),n+=a.length;return o}},a={arraySet:function(t,e,r,i,n){for(var a=0;i>a;a++)t[n+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(i)},{}],28:[function(t,e,r){"use strict";function i(t,e){if(65537>e&&(t.subarray&&o||!t.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",i=0;e>i;i++)r+=String.fromCharCode(t[i]);return r}var n=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),l=0;256>l;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,r.string2buf=function(t){var e,r,i,a,o,s=t.length,l=0;for(a=0;s>a;a++)r=t.charCodeAt(a),55296===(64512&r)&&s>a+1&&(i=t.charCodeAt(a+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),a++)),l+=128>r?1:2048>r?2:65536>r?3:4;for(e=new n.Buf8(l),o=0,a=0;l>o;a++)r=t.charCodeAt(a),55296===(64512&r)&&s>a+1&&(i=t.charCodeAt(a+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),a++)),128>r?e[o++]=r:2048>r?(e[o++]=192|r>>>6,e[o++]=128|63&r):65536>r?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},r.buf2binstring=function(t){return i(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;i>r;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,a,o,l=e||t.length,u=new Array(2*l);for(n=0,r=0;l>r;)if(a=t[r++],128>a)u[n++]=a;else if(o=s[a],o>4)u[n++]=65533,r+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&l>r;)a=a<<6|63&t[r++],o--;o>1?u[n++]=65533:65536>a?u[n++]=a:(a-=65536,u[n++]=55296|a>>10&1023,u[n++]=56320|1023&a)}return i(u,n)},r.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+s[t[r]]>e?r:e}},{"./common":27}],29:[function(t,e){"use strict";function r(t,e,r,i){for(var n=65535&t|0,a=t>>>16&65535|0,o=0;0!==r;){o=r>2e3?2e3:r,r-=o;do n=n+e[i++]|0,a=a+n|0;while(--o);n%=65521,a%=65521}return n|a<<16|0}e.exports=r},{}],30:[function(t,e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(t,e){"use strict";function r(){for(var t,e=[],r=0;256>r;r++){t=r;for(var i=0;8>i;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function i(t,e,r,i){var a=n,o=i+r;t=-1^t;for(var s=i;o>s;s++)t=t>>>8^a[255&(t^e[s])];return-1^t}var n=r();e.exports=i},{}],32:[function(t,e,r){"use strict";function i(t,e){return t.msg=D[e],e}function n(t){return(t<<1)-(t>4?9:0)}function a(t){for(var e=t.length;--e>=0;)t[e]=0}function o(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(z.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function s(t,e){S._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,o(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function u(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function c(t,e,r,i){var n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,z.arraySet(e,t.input,t.next_in,n,r),1===t.state.wrap?t.adler=P(t.adler,e,n,r):2===t.state.wrap&&(t.adler=k(t.adler,e,n,r)),t.next_in+=n,t.total_in+=n,n)}function d(t,e){var r,i,n=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-ue?t.strstart-(t.w_size-ue):0,u=t.window,c=t.w_mask,d=t.prev,h=t.strstart+le,f=u[a+o-1],p=u[a+o];t.prev_length>=t.good_match&&(n>>=2),s>t.lookahead&&(s=t.lookahead);do if(r=e,u[r+o]===p&&u[r+o-1]===f&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do;while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&h>a);if(i=le-(h-a),a=h-le,i>o){if(t.match_start=e,o=i,i>=s)break;f=u[a+o-1],p=u[a+o]}}while((e=d[e&c])>l&&0!==--n);return o<=t.lookahead?o:t.lookahead}function h(t){var e,r,i,n,a,o=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-ue)){z.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,r=t.hash_size,e=r;do i=t.head[--e],t.head[e]=i>=o?i-o:0;while(--r);r=o,e=r;do i=t.prev[--e],t.prev[e]=i>=o?i-o:0;while(--r);n+=o}if(0===t.strm.avail_in)break;if(r=c(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=se)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+se-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<se)););}while(t.lookahead<ue&&0!==t.strm.avail_in)}function f(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(h(t),0===t.lookahead&&e===B)return ve;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,s(t,!1),0===t.strm.avail_out))return ve;if(t.strstart-t.block_start>=t.w_size-ue&&(s(t,!1),0===t.strm.avail_out))return ve}return t.insert=0,e===O?(s(t,!0),0===t.strm.avail_out?xe:ye):t.strstart>t.block_start&&(s(t,!1),0===t.strm.avail_out)?ve:ve}function p(t,e){for(var r,i;;){if(t.lookahead<ue){if(h(t),t.lookahead<ue&&e===B)return ve;if(0===t.lookahead)break}if(r=0,t.lookahead>=se&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+se-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-ue&&(t.match_length=d(t,r)),t.match_length>=se)if(i=S._tr_tally(t,t.strstart-t.match_start,t.match_length-se),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=se){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+se-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=S._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(s(t,!1),0===t.strm.avail_out))return ve}return t.insert=t.strstart<se-1?t.strstart:se-1,e===O?(s(t,!0),0===t.strm.avail_out?xe:ye):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?ve:we}function m(t,e){for(var r,i,n;;){if(t.lookahead<ue){if(h(t),t.lookahead<ue&&e===B)return ve;if(0===t.lookahead)break}if(r=0,t.lookahead>=se&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+se-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=se-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-ue&&(t.match_length=d(t,r),t.match_length<=5&&(t.strategy===q||t.match_length===se&&t.strstart-t.match_start>4096)&&(t.match_length=se-1)),t.prev_length>=se&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-se,i=S._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-se),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+se-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=se-1,t.strstart++,i&&(s(t,!1),0===t.strm.avail_out))return ve}else if(t.match_available){if(i=S._tr_tally(t,0,t.window[t.strstart-1]),i&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return ve}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=S._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<se-1?t.strstart:se-1,e===O?(s(t,!0),0===t.strm.avail_out?xe:ye):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?ve:we}function g(t,e){for(var r,i,n,a,o=t.window;;){if(t.lookahead<=le){if(h(t),t.lookahead<=le&&e===B)return ve;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=se&&t.strstart>0&&(n=t.strstart-1,i=o[n],i===o[++n]&&i===o[++n]&&i===o[++n])){a=t.strstart+le;do;while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&a>n);t.match_length=le-(a-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=se?(r=S._tr_tally(t,1,t.match_length-se),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=S._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(s(t,!1),0===t.strm.avail_out))return ve}return t.insert=0,e===O?(s(t,!0),0===t.strm.avail_out?xe:ye):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?ve:we}function _(t,e){for(var r;;){if(0===t.lookahead&&(h(t),0===t.lookahead)){if(e===B)return ve;break}if(t.match_length=0,r=S._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(s(t,!1),0===t.strm.avail_out))return ve}return t.insert=0,e===O?(s(t,!0),0===t.strm.avail_out?xe:ye):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?ve:we}function v(t){t.window_size=2*t.w_size,a(t.head),t.max_lazy_match=A[t.level].max_lazy,t.good_match=A[t.level].good_length,t.nice_match=A[t.level].nice_length,t.max_chain_length=A[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=se-1,t.match_available=0,t.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new z.Buf16(2*ae),this.dyn_dtree=new z.Buf16(2*(2*ie+1)),this.bl_tree=new z.Buf16(2*(2*ne+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new z.Buf16(oe+1),this.heap=new z.Buf16(2*re+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new z.Buf16(2*re+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Y,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?de:ge,t.adler=2===e.wrap?0:1,e.last_flush=B,S._tr_init(e),L):i(t,V)}function y(t){var e=x(t);return e===L&&v(t.state),e}function b(t,e){return t&&t.state?2!==t.state.wrap?V:(t.state.gzhead=e,L):V}function E(t,e,r,n,a,o){if(!t)return V;var s=1;if(e===X&&(e=6),0>n?(s=0,n=-n):n>15&&(s=2,n-=16),1>a||a>J||r!==K||8>n||n>15||0>e||e>9||0>o||o>G)return i(t,V);8===n&&(n=9);var l=new w;return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new z.Buf8(2*l.w_size),l.head=new z.Buf16(l.hash_size),l.prev=new z.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new z.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=o,l.method=r,y(t)}function M(t,e){return E(t,e,K,Q,$,Z)}function T(t,e){var r,s,c,d;if(!t||!t.state||e>U||0>e)return t?i(t,V):V;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===_e&&e!==O)return i(t,0===t.avail_out?N:V);if(s.strm=t,r=s.last_flush,s.last_flush=e,s.status===de)if(2===s.wrap)t.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=k(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=he):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),l(s,be),s.status=ge);else{var h=K+(s.w_bits-8<<4)<<8,f=-1;f=s.strategy>=H||s.level<2?0:s.level<6?1:6===s.level?2:3,h|=f<<6,0!==s.strstart&&(h|=ce),h+=31-h%31,s.status=ge,u(s,h),0!==s.strstart&&(u(s,t.adler>>>16),u(s,65535&t.adler)),t.adler=1}if(s.status===he)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(t.adler=k(t.adler,s.pending_buf,s.pending-c,c)),o(t),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(t.adler=k(t.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=fe)}else s.status=fe;if(s.status===fe)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(t.adler=k(t.adler,s.pending_buf,s.pending-c,c)),o(t),c=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>c&&(t.adler=k(t.adler,s.pending_buf,s.pending-c,c)),0===d&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(t.adler=k(t.adler,s.pending_buf,s.pending-c,c)),o(t),c=s.pending,s.pending===s.pending_buf_size)){d=1;break}d=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,d)}while(0!==d);s.gzhead.hcrc&&s.pending>c&&(t.adler=k(t.adler,s.pending_buf,s.pending-c,c)),0===d&&(s.status=me)}else s.status=me;if(s.status===me&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(t),s.pending+2<=s.pending_buf_size&&(l(s,255&t.adler),l(s,t.adler>>8&255),t.adler=0,s.status=ge)):s.status=ge),0!==s.pending){if(o(t),0===t.avail_out)return s.last_flush=-1,L}else if(0===t.avail_in&&n(e)<=n(r)&&e!==O)return i(t,N);if(s.status===_e&&0!==t.avail_in)return i(t,N);if(0!==t.avail_in||0!==s.lookahead||e!==B&&s.status!==_e){var p=s.strategy===H?_(s,e):s.strategy===W?g(s,e):A[s.level].func(s,e);if((p===xe||p===ye)&&(s.status=_e),p===ve||p===xe)return 0===t.avail_out&&(s.last_flush=-1),L;if(p===we&&(e===C?S._tr_align(s):e!==U&&(S._tr_stored_block(s,0,0,!1),e===I&&(a(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(t),0===t.avail_out))return s.last_flush=-1,L}return e!==O?L:s.wrap<=0?F:(2===s.wrap?(l(s,255&t.adler),l(s,t.adler>>8&255),l(s,t.adler>>16&255),l(s,t.adler>>24&255),l(s,255&t.total_in),l(s,t.total_in>>8&255),l(s,t.total_in>>16&255),l(s,t.total_in>>24&255)):(u(s,t.adler>>>16),u(s,65535&t.adler)),o(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?L:F)}function R(t){var e;return t&&t.state?(e=t.state.status,e!==de&&e!==he&&e!==fe&&e!==pe&&e!==me&&e!==ge&&e!==_e?i(t,V):(t.state=null,e===ge?i(t,j):L)):V}var A,z=t("../utils/common"),S=t("./trees"),P=t("./adler32"),k=t("./crc32"),D=t("./messages"),B=0,C=1,I=3,O=4,U=5,L=0,F=1,V=-2,j=-3,N=-5,X=-1,q=1,H=2,W=3,G=4,Z=0,Y=2,K=8,J=9,Q=15,$=8,te=29,ee=256,re=ee+1+te,ie=30,ne=19,ae=2*re+1,oe=15,se=3,le=258,ue=le+se+1,ce=32,de=42,he=69,fe=73,pe=91,me=103,ge=113,_e=666,ve=1,we=2,xe=3,ye=4,be=3,Ee=function(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n};A=[new Ee(0,0,0,0,f),new Ee(4,4,8,4,p),new Ee(4,5,16,8,p),new Ee(4,6,32,32,p),new Ee(4,4,16,16,m),new Ee(8,16,32,32,m),new Ee(8,16,128,128,m),new Ee(8,32,128,256,m),new Ee(32,128,258,1024,m),new Ee(32,258,258,4096,m)],r.deflateInit=M,r.deflateInit2=E,r.deflateReset=y,r.deflateResetKeep=x,r.deflateSetHeader=b,r.deflate=T,r.deflateEnd=R,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(t,e){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},{}],34:[function(t,e){"use strict";var r=30,i=12;e.exports=function(t,e){var n,a,o,s,l,u,c,d,h,f,p,m,g,_,v,w,x,y,b,E,M,T,R,A,z;n=t.state,a=t.next_in,A=t.input,o=a+(t.avail_in-5),s=t.next_out,z=t.output,l=s-(e-t.avail_out),u=s+(t.avail_out-257),c=n.dmax,d=n.wsize,h=n.whave,f=n.wnext,p=n.window,m=n.hold,g=n.bits,_=n.lencode,v=n.distcode,w=(1<<n.lenbits)-1,x=(1<<n.distbits)-1;t:do{15>g&&(m+=A[a++]<<g,g+=8,m+=A[a++]<<g,g+=8),y=_[m&w];e:for(;;){if(b=y>>>24,m>>>=b,g-=b,b=y>>>16&255,0===b)z[s++]=65535&y;else{if(!(16&b)){if(0===(64&b)){y=_[(65535&y)+(m&(1<<b)-1)];continue e}if(32&b){n.mode=i;break t}t.msg="invalid literal/length code",n.mode=r;break t}E=65535&y,b&=15,b&&(b>g&&(m+=A[a++]<<g,g+=8),E+=m&(1<<b)-1,m>>>=b,g-=b),15>g&&(m+=A[a++]<<g,g+=8,m+=A[a++]<<g,g+=8),y=v[m&x];r:for(;;){if(b=y>>>24,m>>>=b,g-=b,b=y>>>16&255,!(16&b)){if(0===(64&b)){y=v[(65535&y)+(m&(1<<b)-1)];continue r}t.msg="invalid distance code",n.mode=r;break t}if(M=65535&y,b&=15,b>g&&(m+=A[a++]<<g,g+=8,b>g&&(m+=A[a++]<<g,g+=8)),M+=m&(1<<b)-1,M>c){t.msg="invalid distance too far back",n.mode=r;break t}if(m>>>=b,g-=b,b=s-l,M>b){if(b=M-b,b>h&&n.sane){t.msg="invalid distance too far back",n.mode=r;break t}if(T=0,R=p,0===f){if(T+=d-b,E>b){E-=b;do z[s++]=p[T++];while(--b);T=s-M,R=z}}else if(b>f){if(T+=d+f-b,b-=f,E>b){E-=b;do z[s++]=p[T++];while(--b);if(T=0,E>f){b=f,E-=b;do z[s++]=p[T++];while(--b);T=s-M,R=z}}}else if(T+=f-b,E>b){E-=b;do z[s++]=p[T++];while(--b);T=s-M,R=z}for(;E>2;)z[s++]=R[T++],z[s++]=R[T++],z[s++]=R[T++],E-=3;E&&(z[s++]=R[T++],E>1&&(z[s++]=R[T++]))}else{T=s-M;do z[s++]=z[T++],z[s++]=z[T++],z[s++]=z[T++],E-=3;while(E>2);E&&(z[s++]=z[T++],E>1&&(z[s++]=z[T++]))}break}}break}}while(o>a&&u>s);E=g>>3,a-=E,g-=E<<3,m&=(1<<g)-1,t.next_in=a,t.next_out=s,t.avail_in=o>a?5+(o-a):5-(a-o),t.avail_out=u>s?257+(u-s):257-(s-u),n.hold=m,n.bits=g}},{}],35:[function(t,e,r){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=O,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new _.Buf32(pe),e.distcode=e.distdyn=new _.Buf32(me),e.sane=1,e.back=-1,z):k}function o(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,a(t)):k}function s(t,e){var r,i;return t&&t.state?(i=t.state,0>e?(r=0,e=-e):(r=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?k:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,o(t))):k}function l(t,e){var r,i;return t?(i=new n,t.state=i,i.window=null,r=s(t,e),r!==z&&(t.state=null),r):k}function u(t){return l(t,_e)}function c(t){if(ve){var e;for(m=new _.Buf32(512),g=new _.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(y(E,t.lens,0,288,m,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;y(M,t.lens,0,32,g,0,t.work,{bits:5}),ve=!1}t.lencode=m,t.lenbits=9,t.distcode=g,t.distbits=5}function d(t,e,r,i){var n,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new _.Buf8(a.wsize)),i>=a.wsize?(_.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),_.arraySet(a.window,e,r-i,n,a.wnext),i-=n,i?(_.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0}function h(t,e){var r,n,a,o,s,l,u,h,f,p,m,g,pe,me,ge,_e,ve,we,xe,ye,be,Ee,Me,Te,Re=0,Ae=new _.Buf8(4),ze=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return k;r=t.state,r.mode===G&&(r.mode=Z),s=t.next_out,a=t.output,u=t.avail_out,o=t.next_in,n=t.input,l=t.avail_in,h=r.hold,f=r.bits,p=l,m=u,Ee=z;t:for(;;)switch(r.mode){case O:if(0===r.wrap){r.mode=Z;break}for(;16>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if(2&r.wrap&&35615===h){r.check=0,Ae[0]=255&h,Ae[1]=h>>>8&255,r.check=w(r.check,Ae,2,0),h=0,f=0,r.mode=U;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",r.mode=de;break}if((15&h)!==I){t.msg="unknown compression method",r.mode=de;break}if(h>>>=4,f-=4,be=(15&h)+8,0===r.wbits)r.wbits=be;else if(be>r.wbits){t.msg="invalid window size",r.mode=de;break}r.dmax=1<<be,t.adler=r.check=1,r.mode=512&h?H:G,h=0,f=0;break;case U:for(;16>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if(r.flags=h,(255&r.flags)!==I){t.msg="unknown compression method",r.mode=de;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=de;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,r.check=w(r.check,Ae,2,0)),h=0,f=0,r.mode=L;case L:for(;32>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}r.head&&(r.head.time=h),512&r.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,Ae[2]=h>>>16&255,Ae[3]=h>>>24&255,r.check=w(r.check,Ae,4,0)),h=0,f=0,r.mode=F;case F:for(;16>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,r.check=w(r.check,Ae,2,0)),h=0,f=0,r.mode=V;case V:if(1024&r.flags){for(;16>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,r.check=w(r.check,Ae,2,0)),h=0,f=0}else r.head&&(r.head.extra=null);r.mode=j;case j:if(1024&r.flags&&(g=r.length,g>l&&(g=l),g&&(r.head&&(be=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),_.arraySet(r.head.extra,n,o,g,be)),512&r.flags&&(r.check=w(r.check,n,g,o)),l-=g,o+=g,r.length-=g),r.length))break t;r.length=0,r.mode=N;case N:if(2048&r.flags){if(0===l)break t;g=0;do be=n[o+g++],r.head&&be&&r.length<65536&&(r.head.name+=String.fromCharCode(be));while(be&&l>g);if(512&r.flags&&(r.check=w(r.check,n,g,o)),l-=g,o+=g,be)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=X;case X:if(4096&r.flags){if(0===l)break t;g=0;do be=n[o+g++],r.head&&be&&r.length<65536&&(r.head.comment+=String.fromCharCode(be));while(be&&l>g);if(512&r.flags&&(r.check=w(r.check,n,g,o)),l-=g,o+=g,be)break t}else r.head&&(r.head.comment=null);r.mode=q;case q:if(512&r.flags){for(;16>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if(h!==(65535&r.check)){t.msg="header crc mismatch",r.mode=de;break}h=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=G;break;case H:for(;32>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}t.adler=r.check=i(h),h=0,f=0,r.mode=W;case W:if(0===r.havedict)return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,r.hold=h,r.bits=f,P;t.adler=r.check=1,r.mode=G;case G:if(e===R||e===A)break t;case Z:if(r.last){h>>>=7&f,f-=7&f,r.mode=le;break}for(;3>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}switch(r.last=1&h,h>>>=1,f-=1,3&h){case 0:r.mode=Y;break;case 1:if(c(r),r.mode=ee,e===A){h>>>=2,f-=2;break t}break;case 2:r.mode=Q;break;case 3:t.msg="invalid block type",r.mode=de}h>>>=2,f-=2;break;case Y:for(h>>>=7&f,f-=7&f;32>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if((65535&h)!==(h>>>16^65535)){t.msg="invalid stored block lengths",r.mode=de;break}if(r.length=65535&h,h=0,f=0,r.mode=K,e===A)break t;case K:r.mode=J;case J:if(g=r.length){if(g>l&&(g=l),g>u&&(g=u),0===g)break t;_.arraySet(a,n,o,g,s),l-=g,o+=g,u-=g,s+=g,r.length-=g;break}r.mode=G;break;case Q:for(;14>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if(r.nlen=(31&h)+257,h>>>=5,f-=5,r.ndist=(31&h)+1,h>>>=5,f-=5,r.ncode=(15&h)+4,h>>>=4,f-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=de;break}r.have=0,r.mode=$;case $:for(;r.have<r.ncode;){for(;3>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}r.lens[ze[r.have++]]=7&h,h>>>=3,f-=3}for(;r.have<19;)r.lens[ze[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Me={bits:r.lenbits},Ee=y(b,r.lens,0,19,r.lencode,0,r.work,Me),r.lenbits=Me.bits,Ee){t.msg="invalid code lengths set",r.mode=de;break}r.have=0,r.mode=te;case te:for(;r.have<r.nlen+r.ndist;){for(;Re=r.lencode[h&(1<<r.lenbits)-1],ge=Re>>>24,_e=Re>>>16&255,ve=65535&Re,!(f>=ge);){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if(16>ve)h>>>=ge,f-=ge,r.lens[r.have++]=ve;else{if(16===ve){for(Te=ge+2;Te>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if(h>>>=ge,f-=ge,0===r.have){t.msg="invalid bit length repeat",r.mode=de;break}be=r.lens[r.have-1],g=3+(3&h),h>>>=2,f-=2}else if(17===ve){for(Te=ge+3;Te>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}h>>>=ge,f-=ge,be=0,g=3+(7&h),h>>>=3,f-=3}else{for(Te=ge+7;Te>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}h>>>=ge,f-=ge,be=0,g=11+(127&h),h>>>=7,f-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=de;break}for(;g--;)r.lens[r.have++]=be}}if(r.mode===de)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=de;break}if(r.lenbits=9,Me={bits:r.lenbits},Ee=y(E,r.lens,0,r.nlen,r.lencode,0,r.work,Me),r.lenbits=Me.bits,Ee){t.msg="invalid literal/lengths set",r.mode=de;break}if(r.distbits=6,r.distcode=r.distdyn,Me={bits:r.distbits},Ee=y(M,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Me),r.distbits=Me.bits,Ee){t.msg="invalid distances set",r.mode=de;break}if(r.mode=ee,e===A)break t;case ee:r.mode=re;case re:if(l>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,r.hold=h,r.bits=f,x(t,m),s=t.next_out,a=t.output,u=t.avail_out,o=t.next_in,n=t.input,l=t.avail_in,h=r.hold,f=r.bits,r.mode===G&&(r.back=-1);break}for(r.back=0;Re=r.lencode[h&(1<<r.lenbits)-1],ge=Re>>>24,_e=Re>>>16&255,ve=65535&Re,!(f>=ge);){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if(_e&&0===(240&_e)){for(we=ge,xe=_e,ye=ve;Re=r.lencode[ye+((h&(1<<we+xe)-1)>>we)],ge=Re>>>24,_e=Re>>>16&255,ve=65535&Re,!(f>=we+ge);){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}h>>>=we,f-=we,r.back+=we}if(h>>>=ge,f-=ge,r.back+=ge,r.length=ve,0===_e){r.mode=se;break}if(32&_e){r.back=-1,r.mode=G;break}if(64&_e){t.msg="invalid literal/length code",r.mode=de;break}r.extra=15&_e,r.mode=ie;case ie:if(r.extra){for(Te=r.extra;Te>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ne;case ne:for(;Re=r.distcode[h&(1<<r.distbits)-1],ge=Re>>>24,_e=Re>>>16&255,ve=65535&Re,!(f>=ge);){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if(0===(240&_e)){for(we=ge,xe=_e,ye=ve;Re=r.distcode[ye+((h&(1<<we+xe)-1)>>we)],ge=Re>>>24,_e=Re>>>16&255,ve=65535&Re,!(f>=we+ge);){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}h>>>=we,f-=we,r.back+=we}if(h>>>=ge,f-=ge,r.back+=ge,64&_e){t.msg="invalid distance code",r.mode=de;break}r.offset=ve,r.extra=15&_e,r.mode=ae;case ae:if(r.extra){for(Te=r.extra;Te>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=de;break}r.mode=oe;case oe:if(0===u)break t;
if(g=m-u,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=de;break}g>r.wnext?(g-=r.wnext,pe=r.wsize-g):pe=r.wnext-g,g>r.length&&(g=r.length),me=r.window}else me=a,pe=s-r.offset,g=r.length;g>u&&(g=u),u-=g,r.length-=g;do a[s++]=me[pe++];while(--g);0===r.length&&(r.mode=re);break;case se:if(0===u)break t;a[s++]=r.length,u--,r.mode=re;break;case le:if(r.wrap){for(;32>f;){if(0===l)break t;l--,h|=n[o++]<<f,f+=8}if(m-=u,t.total_out+=m,r.total+=m,m&&(t.adler=r.check=r.flags?w(r.check,a,m,s-m):v(r.check,a,m,s-m)),m=u,(r.flags?h:i(h))!==r.check){t.msg="incorrect data check",r.mode=de;break}h=0,f=0}r.mode=ue;case ue:if(r.wrap&&r.flags){for(;32>f;){if(0===l)break t;l--,h+=n[o++]<<f,f+=8}if(h!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=de;break}h=0,f=0}r.mode=ce;case ce:Ee=S;break t;case de:Ee=D;break t;case he:return B;case fe:default:return k}return t.next_out=s,t.avail_out=u,t.next_in=o,t.avail_in=l,r.hold=h,r.bits=f,(r.wsize||m!==t.avail_out&&r.mode<de&&(r.mode<le||e!==T))&&d(t,t.output,t.next_out,m-t.avail_out)?(r.mode=he,B):(p-=t.avail_in,m-=t.avail_out,t.total_in+=p,t.total_out+=m,r.total+=m,r.wrap&&m&&(t.adler=r.check=r.flags?w(r.check,a,m,t.next_out-m):v(r.check,a,m,t.next_out-m)),t.data_type=r.bits+(r.last?64:0)+(r.mode===G?128:0)+(r.mode===ee||r.mode===K?256:0),(0===p&&0===m||e===T)&&Ee===z&&(Ee=C),Ee)}function f(t){if(!t||!t.state)return k;var e=t.state;return e.window&&(e.window=null),t.state=null,z}function p(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?k:(r.head=e,e.done=!1,z)):k}var m,g,_=t("../utils/common"),v=t("./adler32"),w=t("./crc32"),x=t("./inffast"),y=t("./inftrees"),b=0,E=1,M=2,T=4,R=5,A=6,z=0,S=1,P=2,k=-2,D=-3,B=-4,C=-5,I=8,O=1,U=2,L=3,F=4,V=5,j=6,N=7,X=8,q=9,H=10,W=11,G=12,Z=13,Y=14,K=15,J=16,Q=17,$=18,te=19,ee=20,re=21,ie=22,ne=23,ae=24,oe=25,se=26,le=27,ue=28,ce=29,de=30,he=31,fe=32,pe=852,me=592,ge=15,_e=ge,ve=!0;r.inflateReset=o,r.inflateReset2=s,r.inflateResetKeep=a,r.inflateInit=u,r.inflateInit2=l,r.inflate=h,r.inflateEnd=f,r.inflateGetHeader=p,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(t,e){"use strict";var r=t("../utils/common"),i=15,n=852,a=592,o=0,s=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,f,p,m,g,_,v){var w,x,y,b,E,M,T,R,A,z=v.bits,S=0,P=0,k=0,D=0,B=0,C=0,I=0,O=0,U=0,L=0,F=null,V=0,j=new r.Buf16(i+1),N=new r.Buf16(i+1),X=null,q=0;for(S=0;i>=S;S++)j[S]=0;for(P=0;p>P;P++)j[e[f+P]]++;for(B=z,D=i;D>=1&&0===j[D];D--);if(B>D&&(B=D),0===D)return m[g++]=20971520,m[g++]=20971520,v.bits=1,0;for(k=1;D>k&&0===j[k];k++);for(k>B&&(B=k),O=1,S=1;i>=S;S++)if(O<<=1,O-=j[S],0>O)return-1;if(O>0&&(t===o||1!==D))return-1;for(N[1]=0,S=1;i>S;S++)N[S+1]=N[S]+j[S];for(P=0;p>P;P++)0!==e[f+P]&&(_[N[e[f+P]]++]=P);if(t===o?(F=X=_,M=19):t===s?(F=u,V-=257,X=c,q-=257,M=256):(F=d,X=h,M=-1),L=0,P=0,S=k,E=g,C=B,I=0,y=-1,U=1<<B,b=U-1,t===s&&U>n||t===l&&U>a)return 1;for(var H=0;;){H++,T=S-I,_[P]<M?(R=0,A=_[P]):_[P]>M?(R=X[q+_[P]],A=F[V+_[P]]):(R=96,A=0),w=1<<S-I,x=1<<C,k=x;do x-=w,m[E+(L>>I)+x]=T<<24|R<<16|A|0;while(0!==x);for(w=1<<S-1;L&w;)w>>=1;if(0!==w?(L&=w-1,L+=w):L=0,P++,0===--j[S]){if(S===D)break;S=e[f+_[P]]}if(S>B&&(L&b)!==y){for(0===I&&(I=B),E+=k,C=S-I,O=1<<C;D>C+I&&(O-=j[C+I],!(0>=O));)C++,O<<=1;if(U+=1<<C,t===s&&U>n||t===l&&U>a)return 1;y=L&b,m[y]=B<<24|C<<16|E-g|0}}return 0!==L&&(m[E+L]=S-I<<24|64<<16|0),v.bits=B,0}},{"../utils/common":27}],37:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(t,e,r){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function n(t){return 256>t?oe[t]:oe[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function o(t,e,r){t.bi_valid>G-r?(t.bi_buf|=e<<t.bi_valid&65535,a(t,t.bi_buf),t.bi_buf=e>>G-t.bi_valid,t.bi_valid+=r-G):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function s(t,e,r){o(t,r[2*e],r[2*e+1])}function l(t,e){var r=0;do r|=1&t,t>>>=1,r<<=1;while(--e>0);return r>>>1}function u(t){16===t.bi_valid?(a(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function c(t,e){var r,i,n,a,o,s,l=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,d=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(a=0;W>=a;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;H>r;r++)i=t.heap[r],a=l[2*l[2*i+1]+1]+1,a>p&&(a=p,m++),l[2*i+1]=a,i>u||(t.bl_count[a]++,o=0,i>=f&&(o=h[i-f]),s=l[2*i],t.opt_len+=s*(a+o),d&&(t.static_len+=s*(c[2*i+1]+o)));if(0!==m){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(i=t.bl_count[a];0!==i;)n=t.heap[--r],n>u||(l[2*n+1]!==a&&(t.opt_len+=(a-l[2*n+1])*l[2*n],l[2*n+1]=a),i--)}}function d(t,e,r){var i,n,a=new Array(W+1),o=0;for(i=1;W>=i;i++)a[i]=o=o+r[i-1]<<1;for(n=0;e>=n;n++){var s=t[2*n+1];0!==s&&(t[2*n]=l(a[s]++,s))}}function h(){var t,e,r,i,n,a=new Array(W+1);for(r=0,i=0;V-1>i;i++)for(le[i]=r,t=0;t<1<<$[i];t++)se[r++]=i;for(se[r-1]=i,n=0,i=0;16>i;i++)for(ue[i]=n,t=0;t<1<<te[i];t++)oe[n++]=i;for(n>>=7;X>i;i++)for(ue[i]=n<<7,t=0;t<1<<te[i]-7;t++)oe[256+n++]=i;for(e=0;W>=e;e++)a[e]=0;for(t=0;143>=t;)ne[2*t+1]=8,t++,a[8]++;for(;255>=t;)ne[2*t+1]=9,t++,a[9]++;for(;279>=t;)ne[2*t+1]=7,t++,a[7]++;for(;287>=t;)ne[2*t+1]=8,t++,a[8]++;for(d(ne,N+1,a),t=0;X>t;t++)ae[2*t+1]=5,ae[2*t]=l(t,5);ce=new fe(ne,$,j+1,N,W),de=new fe(ae,te,0,X,W),he=new fe(new Array(0),ee,0,q,Z)}function f(t){var e;for(e=0;N>e;e++)t.dyn_ltree[2*e]=0;for(e=0;X>e;e++)t.dyn_dtree[2*e]=0;for(e=0;q>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Y]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function m(t,e,r,i){p(t),i&&(a(t,r),a(t,~r)),P.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function g(t,e,r,i){var n=2*e,a=2*r;return t[n]<t[a]||t[n]===t[a]&&i[e]<=i[r]}function _(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&g(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!g(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function v(t,e,r){var i,a,l,u,c=0;if(0!==t.last_lit)do i=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],a=t.pending_buf[t.l_buf+c],c++,0===i?s(t,a,e):(l=se[a],s(t,l+j+1,e),u=$[l],0!==u&&(a-=le[l],o(t,a,u)),i--,l=n(i),s(t,l,r),u=te[l],0!==u&&(i-=ue[l],o(t,i,u)));while(c<t.last_lit);s(t,Y,e)}function w(t,e){var r,i,n,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=H,r=0;l>r;r++)0!==a[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)n=t.heap[++t.heap_len]=2>u?++u:0,a[2*n]=1,t.depth[n]=0,t.opt_len--,s&&(t.static_len-=o[2*n+1]);for(e.max_code=u,r=t.heap_len>>1;r>=1;r--)_(t,a,r);n=l;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],_(t,a,1),i=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=i,a[2*n]=a[2*r]+a[2*i],t.depth[n]=(t.depth[r]>=t.depth[i]?t.depth[r]:t.depth[i])+1,a[2*r+1]=a[2*i+1]=n,t.heap[1]=n++,_(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],c(t,e),d(a,u,t.bl_count)}function x(t,e,r){var i,n,a=-1,o=e[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),e[2*(r+1)+1]=65535,i=0;r>=i;i++)n=o,o=e[2*(i+1)+1],++s<l&&n===o||(u>s?t.bl_tree[2*n]+=s:0!==n?(n!==a&&t.bl_tree[2*n]++,t.bl_tree[2*K]++):10>=s?t.bl_tree[2*J]++:t.bl_tree[2*Q]++,s=0,a=n,0===o?(l=138,u=3):n===o?(l=6,u=3):(l=7,u=4))}function y(t,e,r){var i,n,a=-1,l=e[1],u=0,c=7,d=4;for(0===l&&(c=138,d=3),i=0;r>=i;i++)if(n=l,l=e[2*(i+1)+1],!(++u<c&&n===l)){if(d>u)do s(t,n,t.bl_tree);while(0!==--u);else 0!==n?(n!==a&&(s(t,n,t.bl_tree),u--),s(t,K,t.bl_tree),o(t,u-3,2)):10>=u?(s(t,J,t.bl_tree),o(t,u-3,3)):(s(t,Q,t.bl_tree),o(t,u-11,7));u=0,a=n,0===l?(c=138,d=3):n===l?(c=6,d=3):(c=7,d=4)}}function b(t){var e;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=q-1;e>=3&&0===t.bl_tree[2*re[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function E(t,e,r,i){var n;for(o(t,e-257,5),o(t,r-1,5),o(t,i-4,4),n=0;i>n;n++)o(t,t.bl_tree[2*re[n]+1],3);y(t,t.dyn_ltree,e-1),y(t,t.dyn_dtree,r-1)}function M(t){var e,r=4093624447;for(e=0;31>=e;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return D;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return B;for(e=32;j>e;e++)if(0!==t.dyn_ltree[2*e])return B;return D}function T(t){me||(h(),me=!0),t.l_desc=new pe(t.dyn_ltree,ce),t.d_desc=new pe(t.dyn_dtree,de),t.bl_desc=new pe(t.bl_tree,he),t.bi_buf=0,t.bi_valid=0,f(t)}function R(t,e,r,i){o(t,(I<<1)+(i?1:0),3),m(t,e,r,!0)}function A(t){o(t,O<<1,3),s(t,Y,ne),u(t)}function z(t,e,r,i){var n,a,s=0;t.level>0?(t.strm.data_type===C&&(t.strm.data_type=M(t)),w(t,t.l_desc),w(t,t.d_desc),s=b(t),n=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,n>=a&&(n=a)):n=a=r+5,n>=r+4&&-1!==e?R(t,e,r,i):t.strategy===k||a===n?(o(t,(O<<1)+(i?1:0),3),v(t,ne,ae)):(o(t,(U<<1)+(i?1:0),3),E(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),v(t,t.dyn_ltree,t.dyn_dtree)),f(t),i&&p(t)}function S(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(se[r]+j+1)]++,t.dyn_dtree[2*n(e)]++),t.last_lit===t.lit_bufsize-1}var P=t("../utils/common"),k=4,D=0,B=1,C=2,I=0,O=1,U=2,L=3,F=258,V=29,j=256,N=j+1+V,X=30,q=19,H=2*N+1,W=15,G=16,Z=7,Y=256,K=16,J=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=512,ne=new Array(2*(N+2));i(ne);var ae=new Array(2*X);i(ae);var oe=new Array(ie);i(oe);var se=new Array(F-L+1);i(se);var le=new Array(V);i(le);var ue=new Array(X);i(ue);var ce,de,he,fe=function(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length},pe=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},me=!1;r._tr_init=T,r._tr_stored_block=R,r._tr_flush_block=z,r._tr_tally=S,r._tr_align=A},{"../utils/common":27}],39:[function(t,e){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},{}]},{},[9])(9)}),/**
@preserve

JSZipUtils - A collection of cross-browser utilities to go along with JSZip.
<http://stuk.github.io/jszip-utils>

(c) 2014 Stuart Knightley, David Duponchel
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip-utils/master/LICENSE.markdown.

*/
!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.JSZipUtils=t():"undefined"!=typeof global?global.JSZipUtils=t():"undefined"!=typeof self&&(self.JSZipUtils=t())}(function(){return function t(e,r,i){function n(o,s){if(!r[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return n(r?r:t)},u,u.exports,t,e,r,i)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e){"use strict";function r(){try{return new window.XMLHttpRequest}catch(t){}}function i(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}var n={};n._getBinaryFromXHR=function(t){return t.response||t.responseText};var a=window.ActiveXObject?function(){return r()||i()}:r;n.getBinaryContent=function(t,e){try{var r=a();r.open("GET",t,!0),"responseType"in r&&(r.responseType="arraybuffer"),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(){var i,a;if(4===r.readyState)if(200===r.status||0===r.status){i=null,a=null;try{i=n._getBinaryFromXHR(r)}catch(t){a=new Error(t)}e(a,i)}else e(new Error("Ajax error for "+t+" : "+this.status+" "+this.statusText),null)},r.send()}catch(t){e(new Error(t),null)}},e.exports=n},{}]},{},[1])(1)}),/**
 @preserve
 * @fileoverview gl-matrix - High performance matrix and vector operations
 * @author Brandon Jones
 * @author Colin MacKenzie IV
 * @version 2.2.1

Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

  * Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
  * Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */
function(t){"use strict";var e={};"undefined"==typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e.exports={},define(function(){return e.exports})):e.exports="undefined"!=typeof window?window:t:e.exports=exports,function(t){if(!e)var e=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;if(!i)var i=Math.random;var n={};n.setMatrixArrayType=function(t){r=t},"undefined"!=typeof t&&(t.glMatrix=n);var a=Math.PI/180;n.toRadian=function(t){return t*a};var o={};o.create=function(){var t=new r(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new r(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var i=new r(2);return i[0]=t,i[1]=e,i},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,r){return t[0]=e,t[1]=r,t},o.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},o.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},o.sub=o.subtract,o.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},o.mul=o.multiply,o.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},o.div=o.divide,o.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},o.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},o.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},o.scaleAndAdd=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t},o.distance=function(t,e){var r=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(r*r+i*i)},o.dist=o.distance,o.squaredDistance=function(t,e){var r=e[0]-t[0],i=e[1]-t[1];return r*r+i*i},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},o.len=o.length,o.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.normalize=function(t,e){var r=e[0],i=e[1],n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.cross=function(t,e,r){var i=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=i,t},o.lerp=function(t,e,r,i){var n=e[0],a=e[1];return t[0]=n+i*(r[0]-n),t[1]=a+i*(r[1]-a),t},o.random=function(t,e){e=e||1;var r=2*i()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},o.transformMat2=function(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[2]*n,t[1]=r[1]*i+r[3]*n,t},o.transformMat2d=function(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[2]*n+r[4],t[1]=r[1]*i+r[3]*n+r[5],t},o.transformMat3=function(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[3]*n+r[6],t[1]=r[1]*i+r[4]*n+r[7],t},o.transformMat4=function(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[4]*n+r[12],t[1]=r[1]*i+r[5]*n+r[13],t},o.forEach=function(){var t=o.create();return function(e,r,i,n,a,o){var s,l;for(r||(r=2),i||(i=0),l=n?Math.min(n*r+i,e.length):e.length,s=i;l>s;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=o);var s={};s.create=function(){var t=new r(3);return t[0]=0,t[1]=0,t[2]=0,t},s.clone=function(t){var e=new r(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},s.fromValues=function(t,e,i){var n=new r(3);return n[0]=t,n[1]=e,n[2]=i,n},s.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},s.set=function(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t},s.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},s.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},s.sub=s.subtract,s.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},s.mul=s.multiply,s.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},s.div=s.divide,s.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},s.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},s.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},s.scaleAndAdd=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t},s.distance=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)},s.dist=s.distance,s.squaredDistance=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n},s.sqrDist=s.squaredDistance,s.length=function(t){var e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)},s.len=s.length,s.squaredLength=function(t){var e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i},s.sqrLen=s.squaredLength,s.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},s.normalize=function(t,e){var r=e[0],i=e[1],n=e[2],a=r*r+i*i+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t},s.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},s.cross=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=r[0],s=r[1],l=r[2];return t[0]=n*l-a*s,t[1]=a*o-i*l,t[2]=i*s-n*o,t},s.lerp=function(t,e,r,i){var n=e[0],a=e[1],o=e[2];return t[0]=n+i*(r[0]-n),t[1]=a+i*(r[1]-a),t[2]=o+i*(r[2]-o),t},s.random=function(t,e){e=e||1;var r=2*i()*Math.PI,n=2*i()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t},s.transformMat4=function(t,e,r){var i=e[0],n=e[1],a=e[2];return t[0]=r[0]*i+r[4]*n+r[8]*a+r[12],t[1]=r[1]*i+r[5]*n+r[9]*a+r[13],t[2]=r[2]*i+r[6]*n+r[10]*a+r[14],t},s.transformMat3=function(t,e,r){var i=e[0],n=e[1],a=e[2];return t[0]=i*r[0]+n*r[3]+a*r[6],t[1]=i*r[1]+n*r[4]+a*r[7],t[2]=i*r[2]+n*r[5]+a*r[8],t},s.transformQuat=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*i+s*a-l*n,d=u*n+l*i-o*a,h=u*a+o*n-s*i,f=-o*i-s*n-l*a;return t[0]=c*u+f*-o+d*-l-h*-s,t[1]=d*u+f*-s+h*-o-c*-l,t[2]=h*u+f*-l+c*-s-d*-o,t},s.rotateX=function(t,e,r,i){var n=[],a=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],a[0]=n[0],a[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),a[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},s.rotateY=function(t,e,r,i){var n=[],a=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],a[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),a[1]=n[1],a[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},s.rotateZ=function(t,e,r,i){var n=[],a=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],a[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),a[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),a[2]=n[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},s.forEach=function(){var t=s.create();return function(e,r,i,n,a,o){var s,l;for(r||(r=3),i||(i=0),l=n?Math.min(n*r+i,e.length):e.length,s=i;l>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),s.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=s);var l={};l.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},l.clone=function(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},l.fromValues=function(t,e,i,n){var a=new r(4);return a[0]=t,a[1]=e,a[2]=i,a[3]=n,a},l.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},l.set=function(t,e,r,i,n){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t},l.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},l.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},l.sub=l.subtract,l.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},l.mul=l.multiply,l.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},l.div=l.divide,l.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},l.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},l.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},l.scaleAndAdd=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t},l.distance=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+i*i+n*n+a*a)},l.dist=l.distance,l.squaredDistance=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],a=e[3]-t[3];return r*r+i*i+n*n+a*a},l.sqrDist=l.squaredDistance,l.length=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return Math.sqrt(e*e+r*r+i*i+n*n)},l.len=l.length,l.squaredLength=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return e*e+r*r+i*i+n*n},l.sqrLen=l.squaredLength,l.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},l.normalize=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=r*r+i*i+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o),t},l.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},l.lerp=function(t,e,r,i){var n=e[0],a=e[1],o=e[2],s=e[3];return t[0]=n+i*(r[0]-n),t[1]=a+i*(r[1]-a),t[2]=o+i*(r[2]-o),t[3]=s+i*(r[3]-s),t},l.random=function(t,e){return e=e||1,t[0]=i(),t[1]=i(),t[2]=i(),t[3]=i(),l.normalize(t,t),l.scale(t,t,e),t},l.transformMat4=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*a+r[12]*o,t[1]=r[1]*i+r[5]*n+r[9]*a+r[13]*o,t[2]=r[2]*i+r[6]*n+r[10]*a+r[14]*o,t[3]=r[3]*i+r[7]*n+r[11]*a+r[15]*o,t},l.transformQuat=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=r[0],s=r[1],l=r[2],u=r[3],c=u*i+s*a-l*n,d=u*n+l*i-o*a,h=u*a+o*n-s*i,f=-o*i-s*n-l*a;return t[0]=c*u+f*-o+d*-l-h*-s,t[1]=d*u+f*-s+h*-o-c*-l,t[2]=h*u+f*-l+c*-s-d*-o,t},l.forEach=function(){var t=l.create();return function(e,r,i,n,a,o){var s,l;for(r||(r=4),i||(i=0),l=n?Math.min(n*r+i,e.length):e.length,s=i;l>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),l.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=l);var u={};u.create=function(){var t=new r(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},u.clone=function(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},u.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},u.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},u.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},u.invert=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=r*a-n*i;return o?(o=1/o,t[0]=a*o,t[1]=-i*o,t[2]=-n*o,t[3]=r*o,t):null},u.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},u.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},u.multiply=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=i*s+a*l,t[1]=n*s+o*l,t[2]=i*u+a*c,t[3]=n*u+o*c,t},u.mul=u.multiply,u.rotate=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=i*l+a*s,t[1]=n*l+o*s,t[2]=i*-s+a*l,t[3]=n*-s+o*l,t},u.scale=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=r[0],l=r[1];return t[0]=i*s,t[1]=n*s,t[2]=a*l,t[3]=o*l,t},u.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},u.LDU=function(t,e,r,i){return t[2]=i[2]/i[0],r[0]=i[0],r[1]=i[1],r[3]=i[3]-t[2]*r[1],[t,e,r]},"undefined"!=typeof t&&(t.mat2=u);var c={};c.create=function(){var t=new r(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},c.clone=function(t){var e=new r(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},c.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},c.invert=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=r*a-i*n;return l?(l=1/l,t[0]=a*l,t[1]=-i*l,t[2]=-n*l,t[3]=r*l,t[4]=(n*s-a*o)*l,t[5]=(i*o-r*s)*l,t):null},c.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},c.multiply=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1],d=r[2],h=r[3],f=r[4],p=r[5];return t[0]=i*u+a*c,t[1]=n*u+o*c,t[2]=i*d+a*h,t[3]=n*d+o*h,t[4]=i*f+a*p+s,t[5]=n*f+o*p+l,t},c.mul=c.multiply,c.rotate=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=Math.sin(r),c=Math.cos(r);return t[0]=i*c+a*u,t[1]=n*c+o*u,t[2]=i*-u+a*c,t[3]=n*-u+o*c,t[4]=s,t[5]=l,t},c.scale=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=i*u,t[1]=n*u,t[2]=a*c,t[3]=o*c,t[4]=s,t[5]=l,t},c.translate=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=r[0],c=r[1];return t[0]=i,t[1]=n,t[2]=a,t[3]=o,t[4]=i*u+a*c+s,t[5]=n*u+o*c+l,t},c.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=c);var d={};d.create=function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},d.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},d.clone=function(t){var e=new r(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},d.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},d.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},d.transpose=function(t,e){if(t===e){var r=e[1],i=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=i,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},d.invert=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=c*o-s*u,h=-c*a+s*l,f=u*a-o*l,p=r*d+i*h+n*f;return p?(p=1/p,t[0]=d*p,t[1]=(-c*i+n*u)*p,t[2]=(s*i-n*o)*p,t[3]=h*p,t[4]=(c*r-n*l)*p,t[5]=(-s*r+n*a)*p,t[6]=f*p,t[7]=(-u*r+i*l)*p,t[8]=(o*r-i*a)*p,t):null},d.adjoint=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=o*c-s*u,t[1]=n*u-i*c,t[2]=i*s-n*o,t[3]=s*l-a*c,t[4]=r*c-n*l,t[5]=n*a-r*s,t[6]=a*u-o*l,t[7]=i*l-r*u,t[8]=r*o-i*a,t},d.determinant=function(t){var e=t[0],r=t[1],i=t[2],n=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*(u*a-o*l)+r*(-u*n+o*s)+i*(l*n-a*s)},d.multiply=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=r[0],f=r[1],p=r[2],m=r[3],g=r[4],_=r[5],v=r[6],w=r[7],x=r[8];return t[0]=h*i+f*o+p*u,t[1]=h*n+f*s+p*c,t[2]=h*a+f*l+p*d,t[3]=m*i+g*o+_*u,t[4]=m*n+g*s+_*c,t[5]=m*a+g*l+_*d,t[6]=v*i+w*o+x*u,t[7]=v*n+w*s+x*c,t[8]=v*a+w*l+x*d,t},d.mul=d.multiply,d.translate=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=r[0],f=r[1];return t[0]=i,t[1]=n,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=h*i+f*o+u,t[7]=h*n+f*s+c,t[8]=h*a+f*l+d,t},d.rotate=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=Math.sin(r),f=Math.cos(r);return t[0]=f*i+h*o,t[1]=f*n+h*s,t[2]=f*a+h*l,t[3]=f*o-h*i,t[4]=f*s-h*n,t[5]=f*l-h*a,t[6]=u,t[7]=c,t[8]=d,t},d.scale=function(t,e,r){var i=r[0],n=r[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},d.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},d.fromQuat=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=r+r,s=i+i,l=n+n,u=r*o,c=i*o,d=i*s,h=n*o,f=n*s,p=n*l,m=a*o,g=a*s,_=a*l;return t[0]=1-d-p,t[3]=c-_,t[6]=h+g,t[1]=c+_,t[4]=1-u-p,t[7]=f-m,t[2]=h-g,t[5]=f+m,t[8]=1-u-d,t},d.normalFromMat4=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],g=e[14],_=e[15],v=r*s-i*o,w=r*l-n*o,x=r*u-a*o,y=i*l-n*s,b=i*u-a*s,E=n*u-a*l,M=c*m-d*p,T=c*g-h*p,R=c*_-f*p,A=d*g-h*m,z=d*_-f*m,S=h*_-f*g,P=v*S-w*z+x*A+y*R-b*T+E*M;return P?(P=1/P,t[0]=(s*S-l*z+u*A)*P,t[1]=(l*R-o*S-u*T)*P,t[2]=(o*z-s*R+u*M)*P,t[3]=(n*z-i*S-a*A)*P,t[4]=(r*S-n*R+a*T)*P,t[5]=(i*R-r*z-a*M)*P,t[6]=(m*E-g*b+_*y)*P,t[7]=(g*x-p*E-_*w)*P,t[8]=(p*b-m*x+_*v)*P,t):null},d.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},d.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=d);var h={};h.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},h.clone=function(t){var e=new r(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},h.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},h.transpose=function(t,e){if(t===e){var r=e[1],i=e[2],n=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=a,t[11]=e[14],t[12]=n,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},h.invert=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],g=e[14],_=e[15],v=r*s-i*o,w=r*l-n*o,x=r*u-a*o,y=i*l-n*s,b=i*u-a*s,E=n*u-a*l,M=c*m-d*p,T=c*g-h*p,R=c*_-f*p,A=d*g-h*m,z=d*_-f*m,S=h*_-f*g,P=v*S-w*z+x*A+y*R-b*T+E*M;return P?(P=1/P,t[0]=(s*S-l*z+u*A)*P,t[1]=(n*z-i*S-a*A)*P,t[2]=(m*E-g*b+_*y)*P,t[3]=(h*b-d*E-f*y)*P,t[4]=(l*R-o*S-u*T)*P,t[5]=(r*S-n*R+a*T)*P,t[6]=(g*x-p*E-_*w)*P,t[7]=(c*E-h*x+f*w)*P,t[8]=(o*z-s*R+u*M)*P,t[9]=(i*R-r*z-a*M)*P,t[10]=(p*b-m*x+_*v)*P,t[11]=(d*x-c*b-f*v)*P,t[12]=(s*T-o*A-l*M)*P,t[13]=(r*A-i*T+n*M)*P,t[14]=(m*w-p*y-g*v)*P,t[15]=(c*y-d*w+h*v)*P,t):null},h.adjoint=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],g=e[14],_=e[15];return t[0]=s*(h*_-f*g)-d*(l*_-u*g)+m*(l*f-u*h),t[1]=-(i*(h*_-f*g)-d*(n*_-a*g)+m*(n*f-a*h)),t[2]=i*(l*_-u*g)-s*(n*_-a*g)+m*(n*u-a*l),t[3]=-(i*(l*f-u*h)-s*(n*f-a*h)+d*(n*u-a*l)),t[4]=-(o*(h*_-f*g)-c*(l*_-u*g)+p*(l*f-u*h)),t[5]=r*(h*_-f*g)-c*(n*_-a*g)+p*(n*f-a*h),t[6]=-(r*(l*_-u*g)-o*(n*_-a*g)+p*(n*u-a*l)),t[7]=r*(l*f-u*h)-o*(n*f-a*h)+c*(n*u-a*l),t[8]=o*(d*_-f*m)-c*(s*_-u*m)+p*(s*f-u*d),t[9]=-(r*(d*_-f*m)-c*(i*_-a*m)+p*(i*f-a*d)),t[10]=r*(s*_-u*m)-o*(i*_-a*m)+p*(i*u-a*s),t[11]=-(r*(s*f-u*d)-o*(i*f-a*d)+c*(i*u-a*s)),t[12]=-(o*(d*g-h*m)-c*(s*g-l*m)+p*(s*h-l*d)),t[13]=r*(d*g-h*m)-c*(i*g-n*m)+p*(i*h-n*d),t[14]=-(r*(s*g-l*m)-o*(i*g-n*m)+p*(i*l-n*s)),t[15]=r*(s*h-l*d)-o*(i*h-n*d)+c*(i*l-n*s),t},h.determinant=function(t){var e=t[0],r=t[1],i=t[2],n=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],h=t[11],f=t[12],p=t[13],m=t[14],g=t[15],_=e*o-r*a,v=e*s-i*a,w=e*l-n*a,x=r*s-i*o,y=r*l-n*o,b=i*l-n*s,E=u*p-c*f,M=u*m-d*f,T=u*g-h*f,R=c*m-d*p,A=c*g-h*p,z=d*g-h*m;return _*z-v*A+w*R+x*T-y*M+b*E},h.multiply=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],m=e[12],g=e[13],_=e[14],v=e[15],w=r[0],x=r[1],y=r[2],b=r[3];return t[0]=w*i+x*s+y*d+b*m,t[1]=w*n+x*l+y*h+b*g,t[2]=w*a+x*u+y*f+b*_,t[3]=w*o+x*c+y*p+b*v,w=r[4],x=r[5],y=r[6],b=r[7],t[4]=w*i+x*s+y*d+b*m,t[5]=w*n+x*l+y*h+b*g,t[6]=w*a+x*u+y*f+b*_,t[7]=w*o+x*c+y*p+b*v,w=r[8],x=r[9],y=r[10],b=r[11],t[8]=w*i+x*s+y*d+b*m,t[9]=w*n+x*l+y*h+b*g,t[10]=w*a+x*u+y*f+b*_,t[11]=w*o+x*c+y*p+b*v,w=r[12],x=r[13],y=r[14],b=r[15],t[12]=w*i+x*s+y*d+b*m,t[13]=w*n+x*l+y*h+b*g,t[14]=w*a+x*u+y*f+b*_,t[15]=w*o+x*c+y*p+b*v,t},h.mul=h.multiply,h.translate=function(t,e,r){var i,n,a,o,s,l,u,c,d,h,f,p,m=r[0],g=r[1],_=r[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*_+e[12],t[13]=e[1]*m+e[5]*g+e[9]*_+e[13],t[14]=e[2]*m+e[6]*g+e[10]*_+e[14],t[15]=e[3]*m+e[7]*g+e[11]*_+e[15]):(i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=i,t[1]=n,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=i*m+s*g+d*_+e[12],t[13]=n*m+l*g+h*_+e[13],t[14]=a*m+u*g+f*_+e[14],t[15]=o*m+c*g+p*_+e[15]),t},h.scale=function(t,e,r){var i=r[0],n=r[1],a=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},h.rotate=function(t,r,i,n){var a,o,s,l,u,c,d,h,f,p,m,g,_,v,w,x,y,b,E,M,T,R,A,z,S=n[0],P=n[1],k=n[2],D=Math.sqrt(S*S+P*P+k*k);return Math.abs(D)<e?null:(D=1/D,S*=D,P*=D,k*=D,a=Math.sin(i),o=Math.cos(i),s=1-o,l=r[0],u=r[1],c=r[2],d=r[3],h=r[4],f=r[5],p=r[6],m=r[7],g=r[8],_=r[9],v=r[10],w=r[11],x=S*S*s+o,y=P*S*s+k*a,b=k*S*s-P*a,E=S*P*s-k*a,M=P*P*s+o,T=k*P*s+S*a,R=S*k*s+P*a,A=P*k*s-S*a,z=k*k*s+o,t[0]=l*x+h*y+g*b,t[1]=u*x+f*y+_*b,t[2]=c*x+p*y+v*b,t[3]=d*x+m*y+w*b,t[4]=l*E+h*M+g*T,t[5]=u*E+f*M+_*T,t[6]=c*E+p*M+v*T,t[7]=d*E+m*M+w*T,t[8]=l*R+h*A+g*z,t[9]=u*R+f*A+_*z,t[10]=c*R+p*A+v*z,t[11]=d*R+m*A+w*z,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},h.rotateX=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*n+u*i,t[5]=o*n+c*i,t[6]=s*n+d*i,t[7]=l*n+h*i,t[8]=u*n-a*i,t[9]=c*n-o*i,t[10]=d*n-s*i,t[11]=h*n-l*i,t},h.rotateY=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*n-u*i,t[1]=o*n-c*i,t[2]=s*n-d*i,t[3]=l*n-h*i,t[8]=a*i+u*n,t[9]=o*i+c*n,t[10]=s*i+d*n,t[11]=l*i+h*n,t},h.rotateZ=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*n+u*i,t[1]=o*n+c*i,t[2]=s*n+d*i,t[3]=l*n+h*i,t[4]=u*n-a*i,t[5]=c*n-o*i,t[6]=d*n-s*i,t[7]=h*n-l*i,t},h.fromRotationTranslation=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=i+i,l=n+n,u=a+a,c=i*s,d=i*l,h=i*u,f=n*l,p=n*u,m=a*u,g=o*s,_=o*l,v=o*u;return t[0]=1-(f+m),t[1]=d+v,t[2]=h-_,t[3]=0,t[4]=d-v,t[5]=1-(c+m),t[6]=p+g,t[7]=0,t[8]=h+_,t[9]=p-g,t[10]=1-(c+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},h.fromQuat=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=r+r,s=i+i,l=n+n,u=r*o,c=i*o,d=i*s,h=n*o,f=n*s,p=n*l,m=a*o,g=a*s,_=a*l;return t[0]=1-d-p,t[1]=c+_,t[2]=h-g,t[3]=0,t[4]=c-_,t[5]=1-u-p,t[6]=f+m,t[7]=0,t[8]=h+g,t[9]=f-m,t[10]=1-u-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},h.frustum=function(t,e,r,i,n,a,o){var s=1/(r-e),l=1/(n-i),u=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*l,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(n+i)*l,t[10]=(o+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*u,t[15]=0,t},h.perspective=function(t,e,r,i,n){var a=1/Math.tan(e/2),o=1/(i-n);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+i)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*i*o,t[15]=0,t},h.ortho=function(t,e,r,i,n,a,o){var s=1/(e-r),l=1/(i-n),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(n+i)*l,t[14]=(o+a)*u,t[15]=1,t},h.lookAt=function(t,r,i,n){var a,o,s,l,u,c,d,f,p,m,g=r[0],_=r[1],v=r[2],w=n[0],x=n[1],y=n[2],b=i[0],E=i[1],M=i[2];return Math.abs(g-b)<e&&Math.abs(_-E)<e&&Math.abs(v-M)<e?h.identity(t):(d=g-b,f=_-E,p=v-M,m=1/Math.sqrt(d*d+f*f+p*p),d*=m,f*=m,p*=m,a=x*p-y*f,o=y*d-w*p,s=w*f-x*d,m=Math.sqrt(a*a+o*o+s*s),m?(m=1/m,a*=m,o*=m,s*=m):(a=0,o=0,s=0),l=f*s-p*o,u=p*a-d*s,c=d*o-f*a,m=Math.sqrt(l*l+u*u+c*c),m?(m=1/m,l*=m,u*=m,c*=m):(l=0,u=0,c=0),t[0]=a,t[1]=l,t[2]=d,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=s,t[9]=c,t[10]=p,t[11]=0,t[12]=-(a*g+o*_+s*v),t[13]=-(l*g+u*_+c*v),t[14]=-(d*g+f*_+p*v),t[15]=1,t)},h.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=h);var f={};f.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},f.rotationTo=function(){var t=s.create(),e=s.fromValues(1,0,0),r=s.fromValues(0,1,0);return function(i,n,a){var o=s.dot(n,a);return-.999999>o?(s.cross(t,e,n),s.length(t)<1e-6&&s.cross(t,r,n),s.normalize(t,t),f.setAxisAngle(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(s.cross(t,n,a),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,f.normalize(i,i))}}(),f.setAxes=function(){var t=d.create();return function(e,r,i,n){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],f.normalize(e,f.fromMat3(e,t))}}(),f.clone=l.clone,f.fromValues=l.fromValues,f.copy=l.copy,f.set=l.set,f.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},f.setAxisAngle=function(t,e,r){r*=.5;var i=Math.sin(r);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(r),t},f.add=l.add,f.multiply=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=r[0],l=r[1],u=r[2],c=r[3];return t[0]=i*c+o*s+n*u-a*l,t[1]=n*c+o*l+a*s-i*u,t[2]=a*c+o*u+i*l-n*s,t[3]=o*c-i*s-n*l-a*u,t},f.mul=f.multiply,f.scale=l.scale,f.rotateX=function(t,e,r){r*=.5;var i=e[0],n=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=i*l+o*s,t[1]=n*l+a*s,t[2]=a*l-n*s,t[3]=o*l-i*s,t},f.rotateY=function(t,e,r){r*=.5;var i=e[0],n=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=i*l-a*s,t[1]=n*l+o*s,t[2]=a*l+i*s,t[3]=o*l-n*s,t},f.rotateZ=function(t,e,r){r*=.5;var i=e[0],n=e[1],a=e[2],o=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=i*l+n*s,t[1]=n*l-i*s,t[2]=a*l+o*s,t[3]=o*l-a*s,t},f.calculateW=function(t,e){var r=e[0],i=e[1],n=e[2];return t[0]=r,t[1]=i,t[2]=n,t[3]=-Math.sqrt(Math.abs(1-r*r-i*i-n*n)),t},f.dot=l.dot,f.lerp=l.lerp,f.slerp=function(t,e,r,i){var n,a,o,s,l,u=e[0],c=e[1],d=e[2],h=e[3],f=r[0],p=r[1],m=r[2],g=r[3];return a=u*f+c*p+d*m+h*g,0>a&&(a=-a,f=-f,p=-p,m=-m,g=-g),1-a>1e-6?(n=Math.acos(a),o=Math.sin(n),s=Math.sin((1-i)*n)/o,l=Math.sin(i*n)/o):(s=1-i,l=i),t[0]=s*u+l*f,t[1]=s*c+l*p,t[2]=s*d+l*m,t[3]=s*h+l*g,t},f.invert=function(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=r*r+i*i+n*n+a*a,s=o?1/o:0;return t[0]=-r*s,t[1]=-i*s,t[2]=-n*s,t[3]=a*s,t},f.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},f.length=l.length,f.len=f.length,f.squaredLength=l.squaredLength,f.sqrLen=f.squaredLength,f.normalize=l.normalize,f.fromMat3=function(t,e){var r,i=e[0]+e[4]+e[8];if(i>0)r=Math.sqrt(i+1),t[3]=.5*r,r=.5/r,t[0]=(e[7]-e[5])*r,t[1]=(e[2]-e[6])*r,t[2]=(e[3]-e[1])*r;else{var n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);var a=(n+1)%3,o=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*a+a]-e[3*o+o]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*o+a]-e[3*a+o])*r,t[a]=(e[3*a+n]+e[3*n+a])*r,t[o]=(e[3*o+n]+e[3*n+o])*r}return t},f.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=f)}(e.exports)}(this),function(t,e){"use strict";var r={};"undefined"!=typeof module?module.exports=r:t.OBJ=r,r.Mesh=function(t){var e=[],r=[],i=[],n={};n.verts=[],n.norms=[],n.textures=[],n.hashindices={},n.indices=[],n.index=0;for(var a=t.split("\n"),o=/^v\s/,s=/^vn\s/,l=/^vt\s/,u=/^f\s/,c=/\s+/,d=0;d<a.length;d++){var h=a[d].trim(),f=h.split(c);if(f.shift(),o.test(h))e.push.apply(e,f);else if(s.test(h))r.push.apply(r,f);else if(l.test(h))i.push.apply(i,f);else if(u.test(h))for(var p=!1,m=0,g=f.length;g>m;m++){if(3!==m||p||(m=2,p=!0),f[m]in n.hashindices)n.indices.push(n.hashindices[f[m]]);else{var _=f[m].split("/");n.verts.push(+e[3*(_[0]-1)+0]),n.verts.push(+e[3*(_[0]-1)+1]),n.verts.push(+e[3*(_[0]-1)+2]),i.length&&(n.textures.push(+i[2*(_[1]-1)+0]),n.textures.push(+i[2*(_[1]-1)+1])),n.norms.push(+r[3*(_[2]-1)+0]),n.norms.push(+r[3*(_[2]-1)+1]),n.norms.push(+r[3*(_[2]-1)+2]),n.hashindices[f[m]]=n.index,n.indices.push(n.index),n.index+=1}3===m&&p&&n.indices.push(n.hashindices[f[0]])}}this.vertices=n.verts,this.vertexNormals=n.norms,this.textures=n.textures,this.indices=n.indices};var i=function(){var t=this;this.xmlhttp=new XMLHttpRequest,this.get=function(e,r){t.xmlhttp.onreadystatechange=function(){4===t.xmlhttp.readyState&&r(t.xmlhttp.responseText,t.xmlhttp.status)},t.xmlhttp.open("GET",e,!0),t.xmlhttp.send()}};r.downloadMeshes=function(t,n,a){var o=Object.keys(t).length,s=!1;a===e&&(a={});for(var l in t)t.hasOwnProperty(l)&&(new i).get(t[l],function(t){return function(e,i){if(200===i?a[t]=new r.Mesh(e):(s=!0,console.error('An error has occurred and the mesh "'+t+'" could not be downloaded.')),o--,0===o){if(s)throw console.error("An error has occurred and one or meshes has not been downloaded. The execution of the script has terminated."),"";n(a)}}}(l))};var n=function(t,e,r,i){var n=t.createBuffer(),a=e===t.ARRAY_BUFFER?Float32Array:Uint16Array;return t.bindBuffer(e,n),t.bufferData(e,new a(r),t.STATIC_DRAW),n.itemSize=i,n.numItems=r.length/i,n};r.initMeshBuffers=function(t,e){e.normalBuffer=n(t,t.ARRAY_BUFFER,e.vertexNormals,3),e.textureBuffer=n(t,t.ARRAY_BUFFER,e.textures,2),e.vertexBuffer=n(t,t.ARRAY_BUFFER,e.vertices,3),e.indexBuffer=n(t,t.ELEMENT_ARRAY_BUFFER,e.indices,1)},r.deleteMeshBuffers=function(t,e){t.deleteBuffer(e.normalBuffer),t.deleteBuffer(e.textureBuffer),t.deleteBuffer(e.vertexBuffer),t.deleteBuffer(e.indexBuffer)}}(this),/**
@preserve

Curlify - A javascript webgl framework
<http://curlify.io>

(c) 2013-2015 Curlify LLC
*/
function(){document.currentScript.curlify={modules:{},localVars:{},extract:function(obj,objId){var code=[];for(var i in obj)if(obj.hasOwnProperty(i))try{eval("var "+i),code.push("var "+i+"="+objId+'["'+i+'"]')}catch(t){}return code.join(";")},module:function(t,e){null!=this.modules[t]&&console.log("WARNING: overwriting module",t),null==e&&console.log("ERROR: setting null code as module '"+t+"'"),this.modules[t]=e},getModule:function(t){return this.modules[t]},clearModuleBuffersAndPrograms:function(){console.log("clearModuleBuffersAndPrograms()");for(var t in this.modules){var e=this.modules[t];console.log("checking",e.id),null!=e.default_program&&(console.log("clearing module program",e.id),e.default_program.glProgram=null),null!=e.buffer&&(console.log("clearing module buffer",e.id),e.buffer=null)}}},document.currentScript.curlify.localVars.sensors={acceleration:null,rotationRate:null,orientation:{alpha:0,beta:0,gamma:0},damped_orientation:{alpha:0,beta:0,gamma:0,inertia:10}},document.currentScript.curlify.localVars.zipfile=null,document.currentScript.curlify.localVars.layoutWidth=null,document.currentScript.curlify.localVars.layoutHeight=null,document.currentScript.curlify.localVars.layoutOffset={x:0,y:0},document.currentScript.curlify.localVars.layoutScale={x:1,y:1},document.currentScript.curlify.localVars.gl=null,document.currentScript.curlify.localVars.camera=null,document.currentScript.curlify.localVars.viewWidth=null,document.currentScript.curlify.localVars.viewHeight=null,document.currentScript.curlify.localVars.screenWidth=null,document.currentScript.curlify.localVars.screenHeight=null}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize glutils module");var t=function(t){window.console&&(window.console.error?window.console.error(t):window.console.log&&window.console.log(t))},e=function(e,r,i,n){var a=n||t,o=e.createShader(i);e.shaderSource(o,r),e.compileShader(o);var s=e.getShaderParameter(o,e.COMPILE_STATUS);return s?o:(lastError=e.getShaderInfoLog(o),a("*** Error compiling shader '"+o+"':"+lastError),e.deleteShader(o),null)};return{loadProgram:function(e,r,i,n){for(var a={},o=e.createProgram(),s=0;s<r.length;++s)e.attachShader(o,r[s]);e.linkProgram(o);var l=e.getProgramParameter(o,e.LINK_STATUS);if(!l)return lastError=e.getProgramInfoLog(o),t("Error in program linking:"+lastError),e.deleteProgram(o),null;if(i)for(var s=0;s<i.length;++s){var u=i[s]+"_handle";a[u]=e.getAttribLocation(o,i[s])}if(n)for(var s=0;s<n.length;++s){var u=n[s]+"_handle";a[u]=e.getUniformLocation(o,n[s])}return a.program=o,a},createShader:function(t,r,i,n){var a,o=r.text;if(!i)if("x-shader/x-vertex"==r.type)a=t.VERTEX_SHADER;else if("x-shader/x-fragment"==r.type)a=t.FRAGMENT_SHADER;else if(a!=t.VERTEX_SHADER&&a!=t.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return e(t,o,i?i:a,n)}}}();t.module("glutils",e)}(),function(){var t=document.currentScript.curlify,e=function(){return console.log("initialize sys module"),{timestamp:function(){return(new Date).getTime()},ismobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.ismobile.Android()||e.ismobile.BlackBerry()||e.ismobile.iOS()||e.ismobile.Opera()||e.ismobile.Windows()}}}}();t.module("sys",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize fps module");var e=t.getModule("sys"),r=0,i=0;return{updateFps:function(){if(100==r){r=0;var t=e.timestamp(),n=1e5/(t-i);console.log("FPS : "+n),i=t}r+=1}}}();t.module("fps",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize animator module");var r=t.getModule("sys"),n={time:!0,ease:!0,start:!0,onComplete:!0};return{new:function(){var a=null,o={animations:[],animate:function(i,a){null==a.ease&&(a.ease=e.linear),null==a.start&&(a.start=0);var o={};for(var s in a){{a[s]}null==n[s]&&(null==i[s]?console.log("ERROR: Animated property cannot be initially nil : "+s):o[s]=i[s])}this.animations.push({target:i,start:r.timestamp()+a.start,deadline:r.timestamp()+a.start+a.time,config:a,init:o}),t.requestRender()},step:function(){for(var e=[],n=r.timestamp(),o=!1,s=null,l=0;l<a.animations.length;l++){s=l;var u=a.animations[s],c=(u.deadline,0);1==u.paused&&(n=u.pausetimestamp),n<u.deadline?c=1-(u.deadline-n)/u.config.time:n<u.start?c=0:(c=1,e.push(s)),c=Math.max(c,1e-5);for(var s in u.init)initial=u.init[s],u.target[s]=u.config.ease(initial,u.config[s],c);0==o&&(o=!0,t.requestRender())}for(i=e.length-1;i>=0;i--){var d=a.animations[e[i]].config.onComplete;a.animations.splice(e[i],1),null!=d&&d()}},pause:function(){for(var t in this.animations)this.animations[t].paused=!0,this.animations[t].pausetimestamp=r.timestamp()},resume:function(){for(var e in this.animations)this.animations[e].paused=!1,this.animations[e].deadline=this.animations[e].deadline+(r.timestamp()-self.animations[e].pausetimestamp);t.requestRender()},stop:function(){for(var t in this.animations)this.animations[t].init={},this.animations[t].config.onComplete=null;this.animations=[]}};return a=o,o}}}();e.linear=function(t,e,r){return t+(e-t)*r},e.inQuad=function(t,e,r){return t+(e-t)*r*r},e.outQuad=function(t,e,r){return t+-(e-t)*r*(r-2)},e.inOutQuad=function(t,e,r){return.5>r?(r=2*r,t+(e-t)/2*r*r):(r=2*(r-.5),t-(e-t)/2*(r*(r-2)-1))},e.inCubic=function(t,e,r){return t+(e-t)*r*r*r},e.outCubic=function(t,e,r){return r-=1,t+(e-t)*(r*r*r+1)},e.inOutCubic=function(t,e,r){return.5>r?(r=2*r,t+(e-t)/2*r*r*r):(r=2*(r-.5)-1,t+(e-t)/2*(r*r*r+2))},e.inQuart=function(t,e,r){return t+(e-t)*r*r*r*r},e.outQuart=function(t,e,r){return r-=1,t-(e-t)*(r*r*r*r-1)},e.inOutQuart=function(t,e,r){return.5>r?(r=2*r,t+(e-t)/2*r*r*r*r):(r=2*(r-.5)-1,t-(e-t)/2*(r*r*r*r-2))},e.inSine=function(t,e,r){return t+(e-t)*(1-Math.cos(r*Math.PI/2))},e.outSine=function(t,e,r){return t+(e-t)*Math.sin(r*Math.PI/2)},e.inOutSine=function(t,e,r){return t-(e-t)/2*(Math.cos(Math.PI*r)-1)},e.inExpo=function(t,e,r){return r-=1,t+(e-t)*Math.pow(2,10*r)},e.outExpo=function(t,e,r){return t+(e-t)*(1-Math.pow(2,-10*r))},e.inOutExpo=function(t,e,r){return.5>r?(r=2*r-1,t+(e-t)/2*Math.pow(2,10*r)):(r=2*(r-.5),t+(e-t)/2*(2-Math.pow(2,-10*r)))},e.inCirc=function(t,e,r){return t+(e-t)*(1-Math.sqrt(1-r*r))},e.outCirc=function(t,e,r){return r-=1,t+(e-t)*Math.sqrt(1-r*r)},e.inOutCirc=function(t,e,r){return.5>r?(r=2*r,t+(e-t)/2*(1-Math.sqrt(1-r*r))):(r=2*(r-.5)-1,t+(e-t)/2*(1+Math.sqrt(1-r*r)))},e.inElastic=function(t,e,r){return r-=1,t-(e-t)*Math.pow(2,10*r)*Math.sin(6*(r-.0777777)*Math.PI)},e.outElastic=function(t,e,r){return t+(e-t)*(Math.pow(2,-10*r)*Math.sin(6*(r-.0777777)*Math.PI)+1)},t.module("animator",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize scene module");var e=t.getModule("animator"),r=t.getModule("sys"),i=[],n=[],a=e.new(),o=null,s=0,l=function(t,e,r,i){i>100&&(i=100);var n=1;t>e&&(n=-1);var a=-n*i/(16.66*r)*Math.abs(t-e);return Math.abs(a)<1e-4?t=e:t-=a,1==n&&t>e&&(t=e),-1==n&&e>t&&(t=e),t},u=function(t,e,r,i,n){var a=e[r]-t[r];if(Math.abs(a)>i){var o=a/Math.abs(a);e[r]=l(e[r],t[r]+360*o,e.inertia,n),-1==o&&e[r]<-180&&(e[r]=e[r]+360),1==o&&e[r]>180&&(e[r]=e[r]-360)}else e[r]=l(e[r],t[r],e.inertia,n)};return{render:function(){var e=(t.localVars.gl,r.timestamp()-s);if(s=r.timestamp(),u(t.localVars.sensors.orientation,t.localVars.sensors.damped_orientation,"alpha",180,e),u(t.localVars.sensors.orientation,t.localVars.sensors.damped_orientation,"beta",180,e),u(t.localVars.sensors.orientation,t.localVars.sensors.damped_orientation,"gamma",180,e),a.step(),a.animations.length>0){var o=i[i.length-2];o.stepTree(),o.drawTree()}var l=i[i.length-1];if(null!=l){l.stepTree(),l.drawTree();for(var c=0;c<n.length;c++)!new function(){var t=n[c];t.renderFbo()};n=[]}},openScene:function(t,e,r){var n=i[i.length-1];i.push(t),null!=e&&a.animate(t,e),null!=n&&null!=r&&a.animate(n,r)},closeScene:function(t,e){var r=i[i.length-1],n=i[i.length-2];if(null!=t){var o=t.onComplete,s=function(){null!=o&&o(),i.splice(i.length-1,1),console.log("remove scene from stack",r.identifier,i.length)};t.onComplete=s,a.animate(r,t)}else i.splice(i.length-1,1);null!=n&&null!=e&&a.animate(n,e)},removeAllScenes:function(){i=[],n=[],a.stop(),o=null},isAnimating:function(){return a.animations.length>0?!0:!1},getPointerUser:function(){return o?o:i[i.length-1]},getpointerStealer:function(){return o},stealPointers:function(t){console.log("stealPointers",t);var e=o?o:i[i.length-1];o=t,e.resetpress()},resetPointerStealer:function(){o=null},addFboUpdate:function(t){n.push(t)}}}();t.module("scene",e)}(),function(){var curlify=document.currentScript.curlify,object=function(){console.log("initialize object module");var scene=curlify.getModule("scene"),animator=curlify.getModule("animator"),sys=curlify.getModule("sys");return{new:function(ident,width,height){return eval(curlify.extract(curlify.localVars,"curlify.localVars")),{identifier:null==ident?"object identifier":ident,position:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},size:{width:null==width?screenWidth:width,height:null==height?screenHeight:height},children:[],active:!0,visible:!0,alpha:1,blend:!0,drawbackside:!1,depthtest:!1,disableGlStateUpdates:!1,projectionMatrix:camera.projectionMatrix,viewMatrix:camera.viewMatrix,modelMatrix:mat4.create(),modelViewMatrix:mat4.create(),translateScale:camera.translateScale,identityMatrix:mat4.create(),anim:animator.new(),timervalue:0,laststep:0,add:function(t){return t.parent=this,this.children.push(t),t},updateModelMatrix:function(){var t=this.modelMatrix;if(mat4.copy(t,this.identityMatrix),0!=this.position.x||0!=this.position.y||0!=this.position.z){var e=screenWidth/(2*this.translateScale);mat4.translate(t,t,vec3.clone([this.position.x/e,-this.position.y/e,this.position.z/e]))}0!=this.rotate.z&&mat4.rotateZ(t,t,-this.rotate.z),0!=this.rotate.y&&mat4.rotateY(t,t,-this.rotate.y),0!=this.rotate.x&&mat4.rotateX(t,t,-this.rotate.x),(1!=this.scale.x||1!=this.scale.y||1!=this.scale.z)&&mat4.scale(t,t,vec3.clone([this.scale.x,this.scale.y,this.scale.z])),this.modelMatrix=t},update:function(){var t=this.viewMatrix;null!=this.parent&&null!=this.parent.modelViewMatrix&&(t=this.parent.modelViewMatrix),this.viewMatrix=t,this.updateModelMatrix(),this.children.length>0&&(mat4.copy(this.modelViewMatrix,this.viewMatrix),mat4.multiply(this.modelViewMatrix,this.modelViewMatrix,this.modelMatrix))},updateGlStates:function(){this.depthtest?(gl.enable(gl.DEPTH_TEST),gl.depthFunc(gl.LEQUAL)):gl.disable(gl.DEPTH_TEST),0==this.blend?gl.disable(gl.BLEND):(gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)),1==this.drawbackside?gl.disable(gl.CULL_FACE):(gl.enable(gl.CULL_FACE),gl.cullFace(gl.FRONT))},stepTree:function(){if(this.anim.step(),null!=this.preStep&&this.preStep(),null!=this.step){var t=Math.max(1,Math.min(sys.timestamp()-this.laststep,60));this.laststep=sys.timestamp(),this.step(t)}for(var e=0;e<this.children.length;e++)this.children[e].stepTree();null!=this.postStep&&this.postStep()},drawTree:function(){if(0!=this.visible){if(this.update(),1!=this.disableGlStateUpdates&&this.updateGlStates(),null!=this.preDraw&&this.preDraw(),null!=this.draw&&this.draw(),this.reverseDrawOrder)for(var t=this.children.length-1;t>=0;t--)this.children[t].drawTree();else for(var t=0;t<this.children.length;t++)this.children[t].drawTree();null!=this.postDraw&&this.postDraw()}},press:function(t,e){var r=!1;if(null!=this.relativePress){var i=t-screenWidth/2-this.absolutex(),n=e-screenHeight/2-this.absolutey();r=this.relativePress(i,n)}null!=this.absolutePress&&(r=this.absolutePress(t,e));for(var a=this.children.length-1;a>=0;a--)this.children[a].active&&(r=this.children[a].press(t,e));return r},drag:function(t,e){var r=!1;if(null!=this.relativeDrag){var i=t-screenWidth/2-this.absolutex(),n=e-screenHeight/2-this.absolutey();r=this.relativeDrag(i,n)}null!=this.absoluteDrag&&(r=this.absoluteDrag(t,e));for(var a=this.children.length-1;a>=0;a--)this.children[a].active&&(r=this.children[a].drag(t,e));return r},release:function(t,e){var r=!1;if(null!=this.relativeRelease){var i=t-screenWidth/2-this.absolutex(),n=e-screenHeight/2-this.absolutey();r=this.relativeRelease(i,n)}null!=this.absoluteRelease&&(r=this.absoluteRelease(t,e));for(var a=this.children.length-1;a>=0;a--)this.children[a].active&&(r=this.children[a].release(t,e));return r},swipe:function(t){for(var e=!1,r=this.children.length-1;r>=0;r--)this.children[r].active&&(e=this.children[r].swipe(t));var i=Math.abs(t.x),n=Math.abs(t.y);return i>n?t.x>0?this.swipeLeft?this.swipeLeft(i):!1:this.swipeRight?this.swipeRight(i):!1:t.y>0?this.swipeUp?this.swipeUp(n):!1:this.swipeDown?this.swipeDown(n):!1},resetpress:function(){if(1==this.active){for(var t=this.children.length-1;t>=0;t--)this.children[t].resetpress();this!=scene.getpointerStealer()&&null!=this.pointerReset&&this.pointerReset()}},x:function(){return this.position.x},y:function(){return this.position.y},width:function(){return this.size.width*this.scale.x},height:function(){return this.size.height*this.scale.y},top:function(){return this.position.y-this.height()/2},bottom:function(){return this.position.y+this.height()/2},left:function(){return this.position.x-this.width()/2},right:function(){return this.position.x+this.width()/2},absolutex:function(){var t=0;return null!=this.parent&&(t=this.parent.absolutex()),t+this.x()},absolutey:function(){var t=0;return null!=this.parent&&(t=this.parent.absolutey()),t+this.y()},absolutescalex:function(){var t=1;return null!=this.parent&&(t=this.parent.absolutescalex()),t*this.scale.x},absolutescaley:function(){var t=1;return null!=this.parent&&(t=this.parent.absolutescaley()),t*this.scale.y},absolutealpha:function(){var t=1;return null!=this.parent&&(t=this.parent.absolutealpha()),t*this.alpha},activate:function(){this.active=!0,null!=this.postActivate&&this.postActivate()},deactivate:function(){this.active=!1,null!=this.postDeactivate&&this.postDeactivate()},removeSelf:function(){if(null!=this.parent)for(var t=0;t<this.parent.children.length;t++)if(this.parent.children[t]==this){this.parent.children.splice(t,1);break}}}}}}();curlify.module("object",object)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize quad module");var r=t.getModule("glutils"),i=t.getModule("object");return{buffer:null,default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var e={text:"              attribute vec2 a_position;              attribute vec2 a_tex_coordinate;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            varying vec2 v_tex_coord;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);                v_tex_coord = a_tex_coordinate;              }            ",type:"x-shader/x-vertex"},i={text:"              precision mediump float;                            varying vec2      v_tex_coord;                            uniform sampler2D u_texture;              uniform float     u_alpha;                            void main() {                vec4 color = texture2D(u_texture, v_tex_coord);                gl_FragColor = color * u_alpha;              }            ",type:"x-shader/x-fragment"},n=t.localVars.gl,a=r.createShader(n,e),o=r.createShader(n,i);this.glProgram=r.loadProgram(n,[a,o],["a_position","a_tex_coordinate"],["u_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(r,n,a){var o=t.localVars.gl,s=t.localVars.screenWidth;null==this.buffer&&(this.buffer=o.createBuffer(),this.buffer.itemSize=2,this.buffer.numItems=4,o.bindBuffer(o.ARRAY_BUFFER,this.buffer),vertices=[-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1],o.bufferData(o.ARRAY_BUFFER,new Float32Array(vertices),o.STATIC_DRAW));var l=i.new(r,n,a);return l.glProgram=this.default_program.getProgram(),l.quadModelMatrix=mat4.create(),l.updateModelMatrix=function(){var t=this.modelMatrix;if(mat4.copy(t,this.identityMatrix),0!=this.position.x||0!=this.position.y||0!=this.position.z){var e=s/(2*this.translateScale);mat4.translate(t,t,[this.position.x/e,-this.position.y/e,this.position.z/e])}0!=this.rotate.z&&mat4.rotateZ(t,t,-this.rotate.z),0!=this.rotate.y&&mat4.rotateY(t,t,-this.rotate.y),0!=this.rotate.x&&mat4.rotateX(t,t,-this.rotate.x),(1!=this.scale.x||1!=this.scale.y||1!=this.scale.z)&&mat4.scale(t,t,[this.scale.x,this.scale.y,this.scale.z]),this.modelMatrix=t,mat4.copy(this.quadModelMatrix,this.modelMatrix);var r=s/this.translateScale;mat4.scale(this.quadModelMatrix,this.quadModelMatrix,[this.size.width/r,-this.size.height/r,1])},l.draw=function(){if(null!=l.texture){o.useProgram(this.glProgram.program),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,l.texture),o.uniform1i(this.glProgram.u_texture_handle,0),o.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),o.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),o.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),o.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:e.buffer;o.bindBuffer(o.ARRAY_BUFFER,t),o.enableVertexAttribArray(this.glProgram.a_position_handle),o.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),o.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,o.FLOAT,!1,16,0),o.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,t.itemSize,o.FLOAT,!1,16,8),o.drawArrays(o.TRIANGLE_STRIP,0,t.numItems)}},l}}}();t.module("quad",e)}(),function(){var t=document.currentScript.curlify,e=t.getModule("object"),r=t.getModule("quad"),i=function(){return console.log("initialize plane module"),{new:function(i,n,a,o,s){for(var l=t.localVars.gl,u=t.localVars.screenWidth,c=(t.localVars.screenHeight,e.new(i,o,s)),d=n+1,h=a+1,f=c.size.height/c.size.width,p=[],m=0;h>m;m++)for(var g=(-1+2*m/a)*f,_=m/a,v=0;d>v;v++){var w=-1+2*v/n,x=v/n;p.push(w,g,x,_)}c.buffer=l.createBuffer(),c.buffer.itemSize=2,c.buffer.numItems=4,l.bindBuffer(l.ARRAY_BUFFER,c.buffer),l.bufferData(l.ARRAY_BUFFER,new Float32Array(p),l.STATIC_DRAW);for(var y=[],b=0,E=0;a>E;E++)for(var M=0;n>M;M++)y.push(E*d+M),y.push(E*d+M+1),y.push((E+1)*d+M),y.push(E*d+M+1),y.push((E+1)*d+M+1),y.push((E+1)*d+M),b+=6;return c.indices=l.createBuffer(),c.indices.indexCount=y.length,l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,c.indices),l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(y),l.STATIC_DRAW),c.glProgram=r.default_program.getProgram(),c.quadModelMatrix=mat4.create(),c.updateModelMatrix=function(){var t=this.modelMatrix;if(mat4.copy(t,this.identityMatrix),0!=this.position.x||0!=this.position.y||0!=this.position.z){var e=u/(2*this.translateScale);mat4.translate(t,t,[this.position.x/e,-this.position.y/e,this.position.z/e])}0!=this.rotate.z&&mat4.rotateZ(t,t,-this.rotate.z),0!=this.rotate.y&&mat4.rotateY(t,t,-this.rotate.y),0!=this.rotate.x&&mat4.rotateX(t,t,-this.rotate.x),(1!=this.scale.x||1!=this.scale.y||1!=this.scale.z)&&mat4.scale(t,t,[this.scale.x,this.scale.y,this.scale.z]),this.modelMatrix=t,mat4.copy(this.quadModelMatrix,this.modelMatrix);var r=u/this.translateScale;mat4.scale(this.quadModelMatrix,this.quadModelMatrix,[this.size.width/r,-this.size.height/r*1/f,1])},c.draw=function(){null!=c.texture&&(l.useProgram(this.glProgram.program),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.texture),l.uniform1i(this.glProgram.u_texture_handle,0),l.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),l.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),l.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),l.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix),l.bindBuffer(l.ARRAY_BUFFER,this.buffer),l.enableVertexAttribArray(this.glProgram.a_position_handle),l.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),l.vertexAttribPointer(this.glProgram.a_position_handle,this.buffer.itemSize,l.FLOAT,!1,16,0),l.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,this.buffer.itemSize,l.FLOAT,!1,16,8),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.indices),l.drawElements(l.TRIANGLES,this.indices.indexCount,l.UNSIGNED_SHORT,0))},c}}}();t.module("plane",i)}(),function(){var t=document.currentScript.curlify,e=function(){var e=t.getModule("quad");return{new:function(t,r,i){var n=e.new(t,r,i);return n.focused=!1,n.hit=function(t,e){return t<-this.width()/2||t>this.width()/2||e<-this.height()/2||e>this.height()/2?!1:!0},n.relativePress=function(t,e){return this.hit(t,e)?(null!=this.focus&&this.focus(t,e),this.focused=!0,!0):!1},n.relativeDrag=function(t,e){return 1!=this.focused?!1:(1!=this.hit(t,e)?(null!=this.defocus&&this.defocus(t,e),this.focused=!1):null!=this.focusdrag&&this.focusdrag(t,e),!0)},n.relativeRelease=function(t,e){return 1!=this.focused?!1:(null!=this.click&&this.click(t,e),null!=this.defocus&&this.defocus(t,e),this.focused=!1,!0)},n.pointerReset=function(){null!=this.defocus&&this.defocus(0,0),this.focused=!1},n}}}();t.module("focusable",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize rectangle module");var e=t.getModule("glutils"),r=t.getModule("quad");return{default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"              attribute vec2 a_position;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);              }",type:"x-shader/x-vertex"},i={text:"              precision mediump float;                            uniform float     u_red;              uniform float     u_green;              uniform float     u_blue;              uniform float     u_alpha;                            void main() {                gl_FragColor = vec4( u_red, u_green, u_blue, 1.0 ) * u_alpha;              }",type:"x-shader/x-fragment"},n=t.localVars.gl,a=e.createShader(n,r),o=e.createShader(n,i);this.glProgram=e.loadProgram(n,[a,o],["a_position"],["u_red","u_green","u_blue","u_alpha","u_model","u_view","u_projection"])}},new:function(e,i,n){var a=t.localVars.gl,o=r.new("rectangle",e,i);return o.glProgram=this.default_program.getProgram(),o.color=null==n?{red:0,green:0,blue:0}:n,o.draw=function(){a.useProgram(this.glProgram.program),a.uniform1f(this.glProgram.u_red_handle,this.color.red),a.uniform1f(this.glProgram.u_green_handle,this.color.green),a.uniform1f(this.glProgram.u_blue_handle,this.color.blue),a.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),a.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),a.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),a.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:r.buffer;a.bindBuffer(a.ARRAY_BUFFER,t),a.enableVertexAttribArray(this.glProgram.a_position_handle),a.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,a.FLOAT,!1,16,0),a.drawArrays(a.TRIANGLE_STRIP,0,t.numItems)},o}}}();t.module("rectangle",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize image module");var r=t.getModule("quad");return{loadImage:function(e){var r=t.localVars.zipfile,i=null;if("string"!=typeof e)return console.log("ERROR: image.loadImage source is not of type string",e),null;if(i=new Image,null!=r){var n=r.file(e);i.src="data:image/jpg;base64,"+JSZip.base64.encode(n.asBinary())}else i.crossOrigin="anonymous",i.src=e;return i},new:function(i,n){var a=t.localVars.gl,o=n?n:r.new("image : "+i);return o.size.width=null,o.size.height=null,i instanceof HTMLElement?(o.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,o.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,i),null==o.size.width&&(o.size.width=i.width),null==o.size.height&&(o.size.height=i.height),o.loaded=!0,null!=o.onload&&o.onload()):i instanceof Object?null!=i.texture||null!=i.size?(o.texture=i.texture,o.image=i.image,null==o.size.width&&(o.size.width=i.size.width),null==o.size.height&&(o.size.height=i.size.height),o.loaded=!0,null!=o.onload&&o.onload()):console.log("ERROR: image.new from unknown Object",i):"string"==typeof i?(o.image=e.loadImage(i),o.image.onload=function(){return null==e?void console.log("image == null!"):(o.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,o.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,o.image),null==o.size.width&&(o.size.width=o.image.width),null==o.size.height&&(o.size.height=o.image.height),o.loaded=!0,void(null!=o.onload&&o.onload()))},o.image.onerror=function(){console.log("texture load failed",i)}):console.log("ERROR: image.new from unknown object",i),o}}}();t.module("image",e)}(),function(){var t=document.currentScript.curlify,e=t.getModule("glutils"),r=t.getModule("image"),i=t.getModule("quad"),n=function(){return console.log("initialize masked_image module"),{default_program:{program:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"            attribute vec2 a_position;             attribute vec2 a_tex_coordinate;                         uniform mat4 u_projection;             uniform mat4 u_view;             uniform mat4 u_model;                         varying vec2 v_tex_coord;                         void main() {               gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);               v_tex_coord = a_tex_coordinate;             }             ",type:"x-shader/x-vertex"},i={text:"            precision mediump float;                         varying vec2      v_tex_coord;                         uniform sampler2D u_texture;             uniform sampler2D u_mask_texture;             uniform float     u_alpha;                         void main() {                             vec4 color = texture2D(u_texture, v_tex_coord);               vec4 mask_color = texture2D(u_mask_texture, v_tex_coord);                             gl_FragColor = color * mask_color.a * u_alpha;             }             ",type:"x-shader/x-fragment"},n=t.localVars.gl,a=e.createShader(n,r),o=e.createShader(n,i);this.glProgram=e.loadProgram(n,[a,o],["a_position","a_tex_coordinate"],["u_texture","u_mask_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,n){var a=t.localVars.gl,o=r.new(e);return o.identifier="masked_image : "+e+" : "+n,console.log(o.identifier),o.mask=n,o.glProgram=this.default_program.getProgram(),o.draw=function(){if(1==o.loaded){a.useProgram(this.glProgram.program),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o.texture),a.uniform1i(this.glProgram.u_texture_handle,0),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,o.mask.texture),a.uniform1i(this.glProgram.u_mask_texture_handle,1),a.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),a.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),a.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),a.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:i.buffer;a.bindBuffer(a.ARRAY_BUFFER,t),a.enableVertexAttribArray(this.glProgram.a_position_handle),a.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),a.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,a.FLOAT,!1,16,0),a.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,t.itemSize,a.FLOAT,!1,16,8),a.drawArrays(a.TRIANGLE_STRIP,0,t.numItems)}},o}}}();t.module("masked_image",n)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize fbo_object module");var e=t.getModule("glutils"),r=t.getModule("scene"),i=t.getModule("quad"),n=t.getModule("sys"),a=t.getModule("object");return{default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"              attribute vec2 a_position;              attribute vec2 a_tex_coordinate;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            varying vec2 v_tex_coord;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);                v_tex_coord = vec2(a_tex_coordinate.x,1.0-a_tex_coordinate.y);              }              ",type:"x-shader/x-vertex"},i={text:"              precision mediump float;                            varying vec2      v_tex_coord;                            uniform sampler2D u_texture;              uniform float     u_alpha;                            void main() {                vec4 color = texture2D(u_texture, v_tex_coord);                gl_FragColor = color * u_alpha;              }            ",type:"x-shader/x-fragment"},n=t.localVars.gl,a=e.createShader(n,r),o=e.createShader(n,i);this.glProgram=e.loadProgram(n,[a,o],["a_position","a_tex_coordinate"],["u_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,o,s,l){var u=t.localVars.gl,c=i.new("fbo_object : "+e,o,s);c.glProgram=this.default_program.getProgram(),console.log("fbo_object.new(",c.identifier,c.size.width,c.size.height,c.glProgram,")"),c.parentobject=a.new(),c.parentobject.add(a.new()),c.parentobject.scale.x=t.localVars.screenWidth/c.size.width,c.parentobject.scale.y=t.localVars.screenHeight/c.size.height,c.parentobject.update(),c.dobypassFbo=!1,c.lastUpdated=-99999,c.updateInterval=0,c.framebuffer=u.createFramebuffer(),c.framebuffer.width=c.size.width,c.framebuffer.height=c.size.height,u.bindFramebuffer(u.FRAMEBUFFER,c.framebuffer),c.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,c.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR);var d=l?u.RGB:u.RGBA;return u.texImage2D(u.TEXTURE_2D,0,d,c.framebuffer.width,c.framebuffer.height,0,d,u.UNSIGNED_BYTE,null),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,c.texture,0),u.bindTexture(u.TEXTURE_2D,null),u.bindFramebuffer(u.FRAMEBUFFER,null),c.preStep=function(){var t=n.timestamp()-this.lastUpdated;this.fboUpdatesDisabled||this.dobypassFbo||t>=this.updateInterval&&c.updateFbo()},c.updateFbo=function(){r.addFboUpdate(c)},c.renderFbo=function(){u.bindTexture(u.TEXTURE_2D,null);var e=u.getParameter(u.FRAMEBUFFER_BINDING),r=t.localVars.screenWidth,i=t.localVars.screenHeight,a=t.localVars.layoutWidth,o=t.localVars.layoutHeight,s={x:t.localVars.layoutOffset.x,y:t.localVars.layoutOffset.y};u.viewport(0,0,c.size.width,c.size.height),u.bindFramebuffer(u.FRAMEBUFFER,c.framebuffer),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),t.localVars.screenWidth=c.size.width,t.localVars.screenHeight=c.size.height,t.localVars.layoutWidth=c.size.width,t.localVars.layoutHeight=c.size.height,t.localVars.layoutOffset={x:0,y:0},screenWidth=t.localVars.screenWidth,screenHeight=t.localVars.screenHeight,layoutWidth=t.localVars.layoutWidth,layoutHeight=t.localVars.layoutHeight,layoutOffset=t.localVars.layoutOffset;
for(var l=0;l<c.children.length;l++)c.children[l].parent=c.parentobject,c.children[l].viewMatrix=c.parentobject.modelViewMatrix,c.children[l].drawTree();t.localVars.screenWidth=r,t.localVars.screenHeight=i,t.localVars.layoutWidth=a,t.localVars.layoutHeight=o,t.localVars.layoutOffset=s,screenWidth=t.localVars.screenWidth,screenHeight=t.localVars.screenHeight,layoutWidth=t.localVars.layoutWidth,layoutHeight=t.localVars.layoutHeight,layoutOffset=t.localVars.layoutOffset,u.viewport(t.localVars.layoutOffset.x,t.localVars.layoutOffset.y,t.localVars.layoutWidth,t.localVars.layoutHeight),u.bindFramebuffer(u.FRAMEBUFFER,e),c.lastUpdated=n.timestamp()},c.drawTree=function(){if(0!=this.visible){if(this.update(),null!=this.preDraw&&this.preDraw(),this.dobypassFbo)for(var t=0;t<this.children.length;t++)this.children[t].parent=this,this.children[t].viewMatrix=this.modelViewMatrix,this.children[t].drawTree();else null!=this.draw&&this.draw();null!=this.postDraw&&this.postDraw()}},c}}}();t.module("fbo_object",e)}(),function(){var t=document.currentScript.curlify,e=t.getModule("glutils"),r=(t.getModule("image"),t.getModule("quad")),i=t.getModule("fbo_object"),n=function(){return console.log("initialize masked_fbo_object module"),{default_program:{program:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"            attribute vec2 a_position;             attribute vec2 a_tex_coordinate;                         uniform mat4 u_projection;             uniform mat4 u_view;             uniform mat4 u_model;                         varying vec2 v_tex_coord;                         void main() {               gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);               v_tex_coord = vec2(a_tex_coordinate.x,1.0-a_tex_coordinate.y);            }             ",type:"x-shader/x-vertex"},i={text:"            precision mediump float;                         varying vec2      v_tex_coord;                         uniform sampler2D u_texture;             uniform sampler2D u_mask_texture;             uniform float     u_alpha;                         void main() {                             vec4 color = texture2D(u_texture, v_tex_coord);               vec4 mask_color = texture2D(u_mask_texture, v_tex_coord);                             gl_FragColor = color * mask_color.a * u_alpha;             }             ",type:"x-shader/x-fragment"},n=t.localVars.gl,a=e.createShader(n,r),o=e.createShader(n,i);this.glProgram=e.loadProgram(n,[a,o],["a_position","a_tex_coordinate"],["u_texture","u_mask_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,n,a,o,s){var l=t.localVars.gl,u=i.new(e,a,o,s);return u.identifier="masked_fbo_object : "+e+" : "+n,console.log(u.identifier),u.mask=n,u.glProgram=this.default_program.getProgram(),u.draw=function(){if(null!=n.texture){l.useProgram(this.glProgram.program),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.texture),l.uniform1i(this.glProgram.u_texture_handle,0),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,u.mask.texture),l.uniform1i(this.glProgram.u_mask_texture_handle,1),l.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),l.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),l.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),l.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:r.buffer;l.bindBuffer(l.ARRAY_BUFFER,t),l.enableVertexAttribArray(this.glProgram.a_position_handle),l.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),l.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,l.FLOAT,!1,16,0),l.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,t.itemSize,l.FLOAT,!1,16,8),l.drawArrays(l.TRIANGLE_STRIP,0,t.numItems)}},u}}}();t.module("masked_fbo_object",n)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize button module");{var e=t.getModule("image");t.getModule("focusable")}return{new:function(t){var r=e.new(t);return r.focused=!1,r.identifier="button : "+t,r.hit=function(t,e){return t<-this.width()/2||t>this.width()/2||e<-this.height()/2||e>this.height()/2?!1:!0},r.relativePress=function(t,e){return this.hit(t,e)?(null!=this.focus&&this.focus(t,e),this.focused=!0,!0):!1},r.relativeDrag=function(t,e){return 1!=this.focused?!1:(1!=this.hit(t,e)?(null!=this.defocus&&this.defocus(t,e),this.focused=!1):null!=this.focusdrag&&this.focusdrag(t,e),!0)},r.relativeRelease=function(t,e){return 1!=this.focused?!1:(null!=this.click&&this.click(t,e),null!=this.defocus&&this.defocus(t,e),this.focused=!1,!0)},r.pointerReset=function(){null!=this.defocus&&this.defocus(0,0),this.focused=!1},r}}}();t.module("button",e)}(),function(){var t=document.currentScript.curlify,e=t.getModule("object"),r=t.getModule("focusable"),i=t.getModule("image"),n=function(t,e,n,a,o){n=n?n:t.frames.length,a=a?a:0;for(var s=o?o:r.new("spritesheet "+t.name),l=a;a+n>l;l++){var u=s.add(i.new(t.frames[l]));u.visible=!1,u.active=!1}return s.size.width=t.spritewidth,s.size.height=t.spriteheight,s.frame=s.children[0],s.frametimervalue=0,s.frametime=35,s.restart=function(t){s.frametimervalue=0;var r=s.restart;0==e&&(r=null);var i=s.loopdelay&&!t?s.loopdelay:0;s.anim.animate(s,{frametimervalue:s.children.length,start:i,time:s.frametime*s.children.length,onComplete:r})},s.preStep=function(){s.frame.visible=!1;var t=Math.floor(s.frametimervalue);t>s.children.length-1||(s.frame=s.children[t],s.frame.visible=!0)},s.start=function(){return s.anim.animations.length>0&&s.anim.animations[0].paused?void s.anim.resume():void s.restart()},s.stop=function(){s.anim.pause()},s.unload=function(){s.anim.stop()},0!=e&&s.restart(!0),s},a=function(){return{newSheet:function(t,e,r){var n={spritewidth:0,spriteheight:0,frames:[]};if(t instanceof Array){var a=e,o=r,s=document.createElement("canvas");s.width=a,s.height=o;for(var l=s.getContext("2d"),u=0,c=0;c<t.length;c++)!new function(){var e=i.loadImage(t[c]);e.onload=function(){l.drawImage(e,0,0),n.frames.push(i.new(s)),l.clearRect(0,0,s.width,s.height),u+=1,u==t.length&&null!=n.onload&&n.onload()}};n.spritewidth=a,n.spriteheight=o,n.name="array "+t.length}else{var d=i.loadImage(t);d.onload=function(){var a=d.width/e,o=d.height/r,s=document.createElement("canvas");s.width=a,s.height=o;for(var l=s.getContext("2d"),u=0;r>u;u++)for(var c=0;e>c;c++)l.drawImage(d,-c*a,-u*o),n.frames.push(i.new(s)),l.clearRect(0,0,s.width,s.height);n.spritewidth=a,n.spriteheight=o,n.name=t,null!=n.onload&&n.onload()}}return n},newFromSheet:function(t,e,r,i,a){return n(t,e,r,i,a)},new:function(t,r,i,a,o,s){var l=this.newSheet(t,r,i),u=e.new("sprite loader");return u.sheet=l,l.onload=function(){n(l,a,o,s,u),null!=u.onload&&u.onload()},u}}}();t.module("sprite",a)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize carousel module");{var e=t.getModule("object"),r=t.getModule("focusable"),i=t.getModule("animator"),n=t.getModule("scene");t.getModule("sys")}return{new:function(a,o,s){var l=t.localVars.screenWidth,u=t.localVars.screenHeight,c=r.new(a,o,s),d={name:"coverflow",show:[],hide:[]};d.show.push({target:"position.x",startposition:1*l,endposition:0,func:i.linear}),d.show.push({target:"rotate.y",startposition:.8*Math.PI,endposition:0,func:i.linear}),d.show.push({target:"scale.x",startposition:.6,endposition:1,func:i.linear}),d.show.push({target:"scale.y",startposition:.6,endposition:1,func:i.linear}),d.hide.push({target:"position.x",startposition:0,endposition:1*-l,func:i.linear}),d.hide.push({target:"rotate.y",startposition:0,endposition:.8*-Math.PI,func:i.linear}),d.hide.push({target:"scale.x",startposition:1,endposition:.6,func:i.linear}),d.hide.push({target:"scale.y",startposition:1,endposition:.6,func:i.linear}),c.contentsize={width:c.size.width,height:c.size.height},c.inertia=5,c.swipespeed=1,c.swipefunc=i.outQuad,c.movespeed=1,c.movethreshold=60,c.itemsize=l,c.transition=d,c.unload_distance=1,c.wrap=!1,c.bounceOnWrap=!1,c.alwaysmove=!1,c.nevermove=!1,c.selecteditem=1,c.moveToSelectedItem=!0;var h=c.add(e.new("carousel"));h.targetposition={x:0,y:0,z:0},h.pressOffset={x:0,y:0};var f=c.add(e.new("item container"));f.targetposition={x:0,y:0,z:0},c.instance=h,c.itemcontainer=f;var p=function(t,e,r){r>100&&(r=100);var i=1;t>e&&(i=-1);var n=-i*r/(16.66*c.inertia)*Math.abs(t-e);return Math.abs(n)<1e-4?t=e:t-=n,1==i&&t>e&&(t=e),-1==i&&e>t&&(t=e),t};h.setMoving=function(t,e){null==n.getpointerStealer()&&1!=c.nevermove&&(n.stealPointers(c),null!=c.stolePointers&&c.stolePointers(t,e),h.moving=!0)},c.focus=function(t,e){h.moving&&(h.moving=!1,h.targetposition.x=h.position.x,h.targetposition.y=h.position.y),h.pressOffset={x:h.targetposition.x-t*c.movespeed/l*2,y:h.targetposition.y-e*c.movespeed},c.pressStarted={x:t,y:e}},c.focusdrag=function(t,e){var r=h.pressOffset.x+t*c.movespeed/l*2,i=h.pressOffset.y+e*c.movespeed/u*2,n=c.pressStarted.x-t,a=c.pressStarted.y-e;(c.alwaysmove||c.contentsize.width!=c.size.width)&&Math.abs(n)>c.movethreshold&&h.setMoving(n,a),h.moving&&(h.targetposition.x=r,h.targetposition.y=i)},c.defocus=function(){var t=Math.floor(-h.targetposition.x+.5);c.moveToSelectedItem&&(h.targetposition.x=-t),c.selecteditem=t,c.selecteditem<0&&(c.selecteditem=c.wrap?f.children.length+t:0),c.selecteditem>f.children.length-1&&(c.selecteditem=c.wrap?t-f.children.length:f.children.length-1),c.selecteditem=c.selecteditem+1,null!=c.carouselmoved&&c.carouselmoved(c.selecteditem)};var m=function(t,e){var r=t.active,i=t.visible,n=t.itemposition;t.itemposition=n+e,t.stepTree(),t.drawTree(),t.itemposition=n,t.step(0),t.visible=i,t.active=r};return c.preDraw=function(){if(c.wrap)if(c.transition.reverse_draw)for(var t=f.children.length-1;t>=0;t--)m(f.children[t],f.children.length);else for(var t=0;t<f.children.length;t++)m(f.children[t],f.children.length)},c.postDraw=function(){if(c.wrap)if(c.transition.reverse_draw)for(var t=f.children.length-1;t>=0;t--)m(f.children[t],-f.children.length);else for(var t=0;t<f.children.length;t++)m(f.children[t],-f.children.length)},c.selected=function(){return c.selecteditem},c.getItem=function(t){return f.children[t-1]},c.moveto=function(t,e){h.targetposition.x=-t,e&&(h.position.x=h.targetposition.x),c.selecteditem=t,null!=c.carouselmoved&&c.carouselmoved(t+1)},c.swipeRight=function(t){c.focused&&(h.targetposition.x=h.targetposition.x-c.swipefunc(0,c.swipespeed,t))},c.swipeLeft=function(t){c.focused&&(h.targetposition.x=h.targetposition.x+c.swipefunc(0,c.swipespeed,t))},c.step=function(t){var e=-f.children.length+1,r=-f.children.length+1,i=.75,n=.75;0==c.wrap||c.bounceOnWrap&&h.position.x>e-i&&h.position.x<i?(c.bounceOnWrap&&(i=2*i,n=2*n),h.targetposition.x>i&&(h.targetposition.x=i),h.targetposition.y>n&&(h.targetposition.y=n),h.targetposition.x<e-i&&(h.targetposition.x=e-i),h.targetposition.y<r-n&&(h.targetposition.y=r-n),0==c.focused&&(h.targetposition.x>0&&(h.targetposition.x=p(h.targetposition.x,0,t/2)),h.targetposition.y>0&&(h.targetposition.y=p(h.targetposition.y,0,t/2)),h.targetposition.x<e&&(h.targetposition.x=p(h.targetposition.x,e,t/2)),h.targetposition.y<r&&(h.targetposition.y=p(h.targetposition.y,r,t/2)))):(h.targetposition.x>=1?(h.targetposition.x=h.targetposition.x-f.children.length,h.position.x=h.position.x-f.children.length,h.pressOffset.x=h.pressOffset.x-f.children.length):h.targetposition.x<=-f.children.length&&(h.targetposition.x=h.targetposition.x+f.children.length,h.position.x=h.position.x+f.children.length,h.pressOffset.x=h.pressOffset.x+f.children.length),h.targetposition.y>=1?(h.targetposition.y=h.targetposition.y-f.children.length,h.position.y=h.position.y-f.children.length,h.pressOffset.y=h.pressOffset.y-f.children.length):h.targetposition.y<=-f.children.length&&(h.targetposition.y=h.targetposition.y+f.children.length,h.position.y=h.position.y+f.children.length,h.pressOffset.y=h.pressOffset.y+f.children.length));var a=t;a>100&&(a=1),0==c.focused&&(a=t/2),(c.alwaysmove||c.contentsize.width!=c.size.width)&&(h.position.x=p(h.position.x,h.targetposition.x,a)),(c.alwaysmove||c.contentsize.height!=c.size.height)&&(h.position.y=p(h.position.y,h.targetposition.y,a)),0==c.focused&&h.position.x==h.targetposition.x&&h.position.y==h.targetposition.y&&(h.moving=!1),h.moving},c.getDistance=function(){var t=(h.position.x*c.itemsize+this.itemposition*c.itemsize)/l;return t},c.setContentSize=function(){c.contentsize.width=c.itemsize*f.children.length},c.add=function(t,e){var e=f.children.length,i=r.new("carousel item container");return i.add(t),i.parent=f,f.children.push(i),f.drawTree=function(){function t(t,e){return Math.abs(t.dist)>Math.abs(e.dist)?-1:1}if(0!=this.visible){if(this.update(),null!=this.preDraw&&this.preDraw(),null!=this.draw&&this.draw(),c.transition.order_draw){for(var e=[],r=0;r<this.children.length;r++)e.push(this.children[r]);e.sort(t);for(var r=0;r<e.length;r++)e[r].drawTree()}else if(this.reverseDrawOrder)for(var r=this.children.length-1;r>=0;r--)this.children[r].drawTree();else for(var r=0;r<this.children.length;r++)this.children[r].drawTree();null!=this.postDraw&&this.postDraw()}},t.carouselobject=i,i.index=e,i.child=t,i.itemposition=e,i.getDistance=c.getDistance,i.step=function(){var t=this.getDistance();if(this.dist=t,t<=-c.unload_distance||t>=c.unload_distance?null!=this.unload_content&&null!=this.content&&this.unload_content():null!=this.load_content&&null==this.content&&this.load_content(),this.active=!0,Math.abs(t)>.2&&(this.active=!1),this.visible=!0,Math.abs(t)>1&&(this.visible=!1),!(this.distance==t||Math.abs(t)>2)){this.distance=t;var e=c.transition;if(f.reverseDrawOrder=e.reverse_draw?!0:!1,t>=0)for(var r=0;r<e.show.length;r++){var i=e.show[r];"position.x"==i.target?this.position.x=i.func(i.startposition,i.endposition,Math.abs(1-t)):"position.y"==i.target?this.position.y=i.func(i.startposition,i.endposition,Math.abs(1-t)):"position.z"==i.target?this.position.z=i.func(i.startposition,i.endposition,Math.abs(1-t)):"scale.x"==i.target?this.scale.x=i.func(i.startposition,i.endposition,Math.abs(1-t)):"scale.y"==i.target?this.scale.y=i.func(i.startposition,i.endposition,Math.abs(1-t)):"rotate.x"==i.target?this.rotate.x=i.func(i.startposition,i.endposition,Math.abs(1-t)):"rotate.y"==i.target?this.rotate.y=i.func(i.startposition,i.endposition,Math.abs(1-t)):"rotate.z"==i.target?this.rotate.z=i.func(i.startposition,i.endposition,Math.abs(1-t)):"alpha"==i.target?this.alpha=i.func(i.startposition,i.endposition,Math.abs(1-t)):"transition_value"==i.target&&(this.transition_value=i.func(i.startposition,i.endposition,Math.abs(1-t)))}else for(var r=0;r<e.hide.length;r++){var n=e.hide[r];"position.x"==n.target?this.position.x=n.func(n.startposition,n.endposition,Math.abs(t)):"position.y"==n.target?this.position.y=n.func(n.startposition,n.endposition,Math.abs(t)):"position.z"==n.target?this.position.z=n.func(n.startposition,n.endposition,Math.abs(t)):"scale.x"==n.target?this.scale.x=n.func(n.startposition,n.endposition,Math.abs(t)):"scale.y"==n.target?this.scale.y=n.func(n.startposition,n.endposition,Math.abs(t)):"rotate.x"==n.target?this.rotate.x=n.func(n.startposition,n.endposition,Math.abs(t)):"rotate.y"==n.target?this.rotate.y=n.func(n.startposition,n.endposition,Math.abs(t)):"rotate.z"==n.target?this.rotate.z=n.func(n.startposition,n.endposition,Math.abs(t)):"alpha"==n.target?this.alpha=n.func(n.startposition,n.endposition,Math.abs(t)):"transition_value"==n.target&&(this.transition_value=n.func(n.startposition,n.endposition,Math.abs(t)))}}},f.itemaddposition=f.itemaddposition+1,c.setContentSize(),i},c}}}();t.module("carousel",e)}(),function(){var t=document.currentScript.curlify,e=t.getModule("animator"),r=t.getModule("carousel"),i=function(){return{new:function(i,n,a){var o=t.localVars.screenWidth,s=t.localVars.screenHeight,l={name:"move in",show:[],hide:[]};l.show.push({target:"position.y",startposition:s,endposition:0,func:e.outQuad}),l.show.push({target:"alpha",startposition:0,endposition:1,func:e.outExpo}),l.hide.push({target:"position.y",startposition:0,endposition:0,func:e.linear}),l.hide.push({target:"alpha",startposition:1,endposition:0,func:e.inExpo});var u=r.new(i,n,a);return u.itemsize=s,u.transition=l,u.getDistance=function(){var t=(u.instance.position.y*u.itemsize+this.itemposition*u.itemsize)/s;return t},u.setContentSize=function(){u.contentsize.height=u.itemsize*u.itemcontainer.children.length},u.focus=function(t,e){u.instance.moving&&(u.instance.moving=!1,u.instance.targetposition.x=u.instance.position.x,u.instance.targetposition.y=u.instance.position.y),u.instance.pressOffset={x:u.instance.targetposition.x-t*u.movespeed/o*2,y:u.instance.targetposition.y-e*u.movespeed/s*2},u.pressStarted={x:t,y:e}},u.focusdrag=function(t,e){var r=u.instance.pressOffset.x+t*u.movespeed/o*2,i=u.instance.pressOffset.y+e*u.movespeed/s*2,n=u.pressStarted.x-t,a=u.pressStarted.y-e;(u.alwaysmove||u.contentsize.height!=u.size.height)&&Math.abs(a)>u.movethreshold&&u.instance.setMoving(n,a),u.instance.moving&&(u.instance.targetposition.x=r,u.instance.targetposition.y=i)},u.defocus=function(){var t=Math.floor(-u.instance.targetposition.y+.5);u.moveToSelectedItem&&(u.instance.targetposition.y=-t),u.selecteditem=t,u.selecteditem<0&&(u.selecteditem=u.wrap?u.itemcontainer.children.length+t:0),u.selecteditem>u.itemcontainer.children.length-1&&(u.selecteditem=u.wrap?t-u.itemcontainer.children.length:u.itemcontainer.children.length-1),u.selecteditem=u.selecteditem+1,null!=u.carouselmoved&&u.carouselmoved(u.selecteditem)},u.swipeLeft=null,u.swipeDown=null,u.swipeDown=function(t){u.focused&&(u.instance.targetposition.x=u.instance.targetposition.x-u.swipefunc(0,u.swipespeed,t))},u.swipeUp=function(t){u.focused&&(u.instance.targetposition.x=u.instance.targetposition.x+u.swipefunc(0,u.swipespeed,t))},u.moveto=function(t,e){u.instance.targetposition.y=-t,e&&(u.instance.position.y=u.instance.targetposition.y),u.selecteditem=t,null!=u.carouselmoved&&u.carouselmoved(t)},u}}}();t.module("carousel_vertical",i)}(),function(){var t=document.currentScript.curlify,e=t.getModule("scene"),r=t.getModule("animator"),i=t.getModule("object"),n=t.getModule("focusable"),a=function(){return{new:function(a,o,s){var l=t.localVars.screenWidth,u=t.localVars.screenHeight,c=n.new(a,o,s);c.contentsize={width:c.size.width,height:c.size.height},c.movespeed=1,c.movethreshold=40,c.swipespeed=(l+u)/2*5,c.maxspeed=200,c.inertia=7,c.zeroposition=0,c.loaddistance=u,c.visibledistance=c.loaddistance,c.itempad=0,c.centerslots=!1,c.swipefunc=r.inQuad;var d=c.add(i.new("scrollable"));c.instance=d,d.targetposition={x:0,y:0,z:0};var h=function(t,e,r){r>100&&(r=100);var i=1;t>e&&(i=-1);var n=-i*(r/(16.66*c.inertia))*Math.abs(t-e),a=r/16.66*c.maxspeed;return n>a&&(n=a),-a>n&&(n=-a),Math.abs(n)<1e-5?t=e:t-=n,1==i&&t>e&&(t=e),-1==i&&e>t&&(t=e),t};c.focus=function(t,e){d.pressOffset={x:d.position.x-t*c.movespeed,y:d.position.y-e*c.movespeed},d.moving&&(d.resetpress(),d.moving=!1)},c.defocus=function(){e.getpointerStealer()==c&&c.centeronslots(),console.log("DEFOCUS",c.identifier,d.position.y,d.targetposition.y)},c.centeronslots=function(){if(c.centerslots){var t=Math.floor(c.selected()/(l+c.itempad));c.movetox(t*(l+c.itempad)+l/2)}},d.setMoving=function(){0==d.moving&&null==e.getpointerStealer()&&(e.stealPointers(c),d.moving=!0)},c.focusdrag=function(t,e){var r=d.pressOffset.x+t*c.movespeed,i=d.pressOffset.y+e*c.movespeed,n=r-d.targetposition.x,a=i-d.targetposition.y;c.contentsize.width!=c.size.width&&Math.abs(n)>c.movethreshold&&d.setMoving(),c.contentsize.height!=c.size.height&&Math.abs(a)>c.movethreshold&&d.setMoving(),d.moving&&(d.targetposition.x=r,d.targetposition.y=i)},c.step=function(t){var e=-(c.contentsize.width-c.size.width)+c.zeroposition,r=-(c.contentsize.height-c.size.height),i=t;i>66&&(i=66),0!=c.enforcelimits&&(d.targetposition.x>c.size.width/4+c.zeroposition&&(d.targetposition.x=c.size.width/4+c.zeroposition),d.targetposition.y>c.size.height/4&&(d.targetposition.y=c.size.height/4),d.targetposition.x<e-c.size.width/4&&(d.targetposition.x=e-c.size.width/4),d.targetposition.y<r-c.size.height/4&&(d.targetposition.y=r-c.size.height/4),0==c.focused&&(d.targetposition.x>c.zeroposition&&(d.targetposition.x=h(d.targetposition.x,c.zeroposition,t/2)),d.targetposition.y>0&&(d.targetposition.y=h(d.targetposition.y,0,t/2)),d.targetposition.x<e&&(d.targetposition.x=h(d.targetposition.x,e,t/2)),d.targetposition.y<r&&(d.targetposition.y=h(d.targetposition.y,r,t/2)))),0==c.focused&&(i/=2),c.contentsize.width!=c.size.width&&(d.position.x=h(d.position.x,d.targetposition.x,i)),c.contentsize.height!=c.size.height&&(d.position.y=h(d.position.y,d.targetposition.y,i)),0==c.focused&&d.position.x==d.targetposition.x&&d.position.y==d.targetposition.y&&(d.moving=!1)},c.selected=function(){return Math.floor(d.targetposition.x)},c.movetox=function(t,e){e&&(d.position.x=t),d.targetposition.x=t},c.movetoy=function(t,e){e&&(d.position.y=t),d.targetposition.y=t},c.prepare=function(){c.step(0);for(var t=0;t<d.children.length;t++)d.children[t].step(0)};var f=4*l,p=4*u,m=-f,g=f,_=-p,v=p;return c.intersectsScreen=function(t){var e=t.absolutex(),r=t.absolutey(),i=e-t.width()/2,n=e+t.width()/2,a=r-t.height()/2,o=r+t.height()/2;return!(m>n||i>g||_>o||a>v)},c.add=function(t,e){e?e:d.children.length;return t.parent=d,d.children.push(t),t.step=function(){this.xdistance=this.absolutex();var t=Math.sqrt(Math.pow(this.xdistance,2)+Math.pow(this.absolutey(),2));if(t<c.loaddistance)null!=this.load_content&&0==this.loaded&&this.load_content();else{var e=c.unloaddistance;null==e&&(e=c.loaddistance),t>e&&null!=this.load_content&&null!=this.unload_content&&this.loaded&&this.unload_content()}this.visible=t<c.visibledistance?!0:!1,this.distance=t},t},c}}}();t.module("scrollable",a)}(),function(){function t(e,r,i,n){r=r.replace("\n"," ");var a,o,s,l=r,u=0,c=0,d=r.split(" ");for(o=s=d.length;e.measureText(l).width>i&&o>1;){o--;l=a="";for(var h=0;s>h;h++)o>h?(l+=d[h],o>h+1&&(l+=" ")):(a+=d[h],s>h+1&&(a+=" "))}return n.push(l),c=e.measureText(l),a&&(u=t(e,a,i,n),u>c&&(c=u)),c}var e=document.currentScript.curlify,r=function(){console.log("initialize text module");var r=e.getModule("quad");return{new:function(i,n,a,o,s,l){var u=e.localVars.gl,c=e.localVars.screenWidth,s=s?s:c,d=r.new("text : "+i+" : "+s+","+l);console.log("NEW TEXT: "+d.identifier),d.canvas=document.createElement("canvas"),d.canvas.width=s,d.canvas.height=2*n,d.context=d.canvas.getContext("2d"),d.context.fillStyle="rgba("+255*o.red+","+255*o.green+","+255*o.blue+",255)",d.context.textAlign="center",d.context.textBaseline="middle",d.context.font=n+"px "+a;var h,f,p=[],m=n,g=s;t(d.context,i,s,p);var _=g,v=m*(p.length+1);h=_/2;for(var w=.5*(v-m*(p.length+1)),x=0;x<p.length;x++)f=(x+1)*m+w,d.context.fillText(p[x],h,f),console.log(p[x],h,f);return d.size.width=d.canvas.width,d.size.height=d.canvas.height,d.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,d.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,d.canvas),d}}}();e.module("text",r)}(),function(){var t=document.currentScript.curlify,e=function(){return{json:null,open:function(e){var r=t.localVars.zipfile,i=null;if(null!=r){var n=r.file(e);null!=n&&(i=JSON.parse(n.asText()))}return this.json=i,this}}}();t.module("jsonfile",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize video module");var e=t.getModule("quad"),r=t.getModule("focusable"),i=t.getModule("sys");return{new:function(n){function a(){console.log("videoDone")}function o(){console.log("progress")}function s(){console.log("playing")}function l(){console.log("stalling")}function u(){console.log("suspend")}var c=t.localVars.gl,d=t.localVars.zipfile,h=r.new("video : "+n);h.glProgram=e.default_program.getProgram(),h.player=document.createElement("video");var f=!1;if(h.player.autoplay=!0,h.player.loop=!0,h.player.oncanplay=function(){f=!0},h.player.onerror=function(){var t="unknown error";switch(h.player.error.code){case 1:t="video loading aborted";break;case 2:t="network loading error";break;case 3:t="video decoding failed / corrupted data or unsupported codec";break;case 4:t="video not supported"}console.log("Error: "+t+" (errorcode="+h.player.error.code+")")},null!=d&&"http"!=n.slice(0,4)){var p=d.file(n);console.log("video.source zip",p,n,d),h.player.type="video/mp4",h.player.src="data:video/mp4;base64,"+JSZip.base64.encode(p.asBinary())}else console.log("video.source ",n),h.player.src=n,h.player.crossOrigin="anonymous";return i.ismobile.any()&&(h.click=function(t,e){console.log("video click",t,e),h.player.play()},h.focus=function(t,e){console.log("video focus",t,e)}),h.preload="auto",h.player.addEventListener("ended",a,!0),h.player.addEventListener("progress",o,!0),h.player.addEventListener("playing",s,!0),h.player.addEventListener("stalling",l,!0),h.player.addEventListener("suspend",u,!0),h.player.setAttribute("playsinline",""),h.player.setAttribute("webkit-playsinline",""),h.player.load(),h.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,h.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),h.draw=function(){if(1!=h.loaded)return void(f&&(console.log("video texture loaded : "+h.size.width+"x"+h.size.height+" : "+h.visible+","+h.alpha),null!=h.onload&&h.onload(),h.loaded=!0));c.useProgram(this.glProgram.program),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,h.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h.player),c.uniform1i(this.glProgram.u_texture_handle,0),c.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),c.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),c.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),c.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:e.buffer;c.bindBuffer(c.ARRAY_BUFFER,t),c.enableVertexAttribArray(this.glProgram.a_position_handle),c.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),c.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,c.FLOAT,!1,16,0),c.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,t.itemSize,c.FLOAT,!1,16,8),c.drawArrays(c.TRIANGLE_STRIP,0,t.numItems)},h.checkstatus=function(){console.log("video status : "+h.player.paused+" : "+h.player.buffered+" : "+h.player.error),console.log("readyState  :"+h.player.readyState),console.log("startDate  :"+h.player.startDate),console.log("duration  :"+h.player.duration),console.log("currentSrc  :"+h.player.currentSrc)},h}}}();t.module("video",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize mesh module");var e=t.getModule("glutils"),r=t.getModule("object"),i=t.getModule("image");return{default_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram},loadProgram:function(){var r={text:"              attribute vec3 a_position;              attribute vec3 a_normal;              attribute vec2 a_tex_coordinate;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            varying vec3 v_normal;              varying vec2 v_tex_coord;                            void main() {                mat4 modelViewProj = u_projection*u_view*u_model;                gl_Position = modelViewProj * vec4(a_position, 1.0);                v_normal = vec3(modelViewProj * vec4(a_normal, 0.0));                v_tex_coord = a_tex_coordinate;              }            ",type:"x-shader/x-vertex"},i={text:"              precision mediump float;                            varying vec3      v_normal;              varying vec2      v_tex_coord;                            uniform sampler2D u_texture;              uniform float     u_alpha;                            void main() {                vec4 color = texture2D(u_texture, v_tex_coord);                float diffuse = max(dot(normalize(v_normal), vec3(0.0, 0.0, 1.0)), 0.0) + 0.3;                gl_FragColor = color * u_alpha;              }            ",type:"x-shader/x-fragment"},n=t.localVars.gl,a=e.createShader(n,r),o=e.createShader(n,i);this.glProgram=e.loadProgram(n,[a,o],["a_position","a_normal","a_tex_coordinate"],["u_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e,n){var a=t.localVars.gl,o=t.localVars.zipfile,s=r.new("mesh : "+e);if(s.depthtest=!0,s.drawbackside=!0,s.loaded=!1,null!=n){var l=i.loadImage(n);l.onload=function(){s.texture=a.createTexture(),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0),a.bindTexture(a.TEXTURE_2D,s.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,l),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1),s.loaded=!0},l.onerror=function(){console.log("ERROR: texture load failed for mesh "+e+" : "+n),s.loaded=!0}}else console.log("WARNING: no texture defined for mesh "+e),s.loaded=!0;if(null!=o){console.log("zipfile load",e);var u=o.file(e);s.mesh=new OBJ.Mesh(u.asBinary()),OBJ.initMeshBuffers(a,s.mesh)}else console.log("download load",n),OBJ.downloadMeshes({model:e},function(t){s.mesh=t.model,OBJ.initMeshBuffers(a,s.mesh)});return s.draw=function(){0!=this.loaded&&null!=this.mesh&&(a.useProgram(this.glProgram.program),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,s.texture),a.uniform1i(this.glProgram.u_texture_handle,0),a.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),a.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),a.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),a.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.modelMatrix),a.enableVertexAttribArray(this.glProgram.a_position_handle),a.enableVertexAttribArray(this.glProgram.a_normal_handle),a.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),a.bindBuffer(a.ARRAY_BUFFER,this.mesh.vertexBuffer),a.vertexAttribPointer(this.glProgram.a_position_handle,this.mesh.vertexBuffer.itemSize,a.FLOAT,!1,0,0),this.mesh.textures.length?(a.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),a.bindBuffer(a.ARRAY_BUFFER,this.mesh.textureBuffer),a.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,this.mesh.textureBuffer.itemSize,a.FLOAT,!1,0,0)):a.disableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),a.bindBuffer(a.ARRAY_BUFFER,this.mesh.normalBuffer),a.vertexAttribPointer(this.glProgram.a_normal_handle,this.mesh.normalBuffer.itemSize,a.FLOAT,!1,0,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.mesh.indexBuffer),a.drawElements(a.TRIANGLES,this.mesh.indexBuffer.numItems,a.UNSIGNED_SHORT,0))},s.glProgram=this.default_program.getProgram(),s}}}();t.module("mesh",e)}(),function(){var t=document.currentScript.curlify,e=function(){console.log("initialize particle module");var e=t.getModule("glutils"),r=(t.getModule("object"),t.getModule("quad")),i=t.getModule("image");return{particle_program:{glProgram:null,getProgram:function(){return null==this.glProgram&&this.loadProgram(),this.glProgram
},loadProgram:function(){var r={text:"              attribute vec2 a_position;              attribute vec2 a_tex_coordinate;                            uniform mat4 u_projection;              uniform mat4 u_view;              uniform mat4 u_model;                            varying vec2 v_tex_coord;                            void main() {                gl_Position = u_projection*u_view*u_model*vec4(a_position, 0.0, 1.0);                v_tex_coord = a_tex_coordinate;              }            ",type:"x-shader/x-vertex"},i={text:"              precision mediump float;                            varying vec2      v_tex_coord;                            uniform sampler2D u_texture;              uniform float     u_alpha;                            void main() {                vec4 color = texture2D(u_texture, v_tex_coord);                gl_FragColor = color * u_alpha;              }            ",type:"x-shader/x-fragment"},n=t.localVars.gl,a=e.createShader(n,r),o=e.createShader(n,i);this.glProgram=e.loadProgram(n,[a,o],["a_position","a_tex_coordinate"],["u_texture","u_alpha","u_model","u_view","u_projection"])}},new:function(e){var n=t.localVars.gl,a=i.new(e);return a.glProgram=this.particle_program.getProgram(),a.stepTree=function(){if(this.anim.step(),null!=this.preStep&&this.preStep(),null!=this.step){var t=Math.max(1,Math.min(sys.timestamp()-this.laststep,60));this.laststep=sys.timestamp(),this.step(t)}null!=this.postStep&&this.postStep()},a.drawTree=function(){if(0!=this.visible){if(this.update(),1!=this.disableGlStateUpdates&&this.updateGlStates(),null!=this.preDraw&&this.preDraw(),null!=this.draw&&this.draw(),this.reverseDrawOrder)for(var t=this.children.length-1;t>=0;t--)this.children[t].update(),this.children[t].draw();else for(var t=0;t<this.children.length;t++)this.children[t].update(),this.children[t].draw();null!=this.postDraw&&this.postDraw()}},a.draw=function(){if(null!=this.texture){n.useProgram(this.glProgram.program),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.texture),n.uniform1i(this.glProgram.u_texture_handle,0),n.uniform1f(this.glProgram.u_alpha_handle,this.absolutealpha()),n.uniformMatrix4fv(this.glProgram.u_projection_handle,!1,this.projectionMatrix),n.uniformMatrix4fv(this.glProgram.u_view_handle,!1,this.viewMatrix),n.uniformMatrix4fv(this.glProgram.u_model_handle,!1,this.quadModelMatrix);var t=this.buffer?this.buffer:r.buffer;n.bindBuffer(n.ARRAY_BUFFER,t),n.enableVertexAttribArray(this.glProgram.a_position_handle),n.enableVertexAttribArray(this.glProgram.a_tex_coordinate_handle),n.vertexAttribPointer(this.glProgram.a_position_handle,t.itemSize,n.FLOAT,!1,16,0),n.vertexAttribPointer(this.glProgram.a_tex_coordinate_handle,t.itemSize,n.FLOAT,!1,16,8),n.drawArrays(n.TRIANGLE_STRIP,0,t.numItems)}},a}}}();t.module("particle",e)}(),function(){function createProjection(t,e,r,i){var n=mat4.clone([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);return n[0]=r/t,n[5]=r/e,n[10]=-(i+r)/(i-r),n[11]=-1,n[14]=-2*i*r/(i-r),n}function createProjectionAndView(t,e,r,i){var n=createProjection(1,e/t,r,i),a=mat4.create();mat4.translate(a,a,vec3.clone([0,0,-(i-r)/2]));var o=(i-r)/2/r,s={near:r,far:i,width:t,height:e,projectionMatrix:n,viewMatrix:a,translateScale:o};return s}function initWebGL(t,e){gl=null;try{gl=t.getContext("webgl",e)||t.getContext("experimental-webgl")}catch(t){}return gl||(console.log("ERROR: Unable to initialize WebGL in target node"),gl=null),gl}function swipestart(t){pointerTimestamp=sys.timestamp(),lastPointerPosition.x=t.x,lastPointerPosition.y=t.y,pointerDirection.x=0,pointerDirection.y=0,pointerTargetDirection.x=0,pointerTargetDirection.y=0}function swipedrag(t){var e=sys.timestamp()-pointerTimestamp,r=t.x-lastPointerPosition.x,i=t.y-lastPointerPosition.y,n=Math.max(e,16.66);pointerTargetDirection.x=r/(n/16.66),pointerTargetDirection.y=i/(n/16.66),pointerDirection.y<0&&(pointerDirection.y=Math.min(pointerDirection.y,pointerTargetDirection.y)),pointerDirection.y>0&&(pointerDirection.y=Math.max(pointerDirection.y,pointerTargetDirection.y)),pointerDirection.x<0&&(pointerDirection.x=Math.min(pointerDirection.x,pointerTargetDirection.x)),pointerDirection.x>0&&(pointerDirection.x=Math.max(pointerDirection.x,pointerTargetDirection.x));var a=pointerTargetDirection.y/Math.abs(pointerTargetDirection.y),o=pointerDirection.y/Math.abs(pointerDirection.y);a!=o&&(pointerDirection.y=pointerTargetDirection.y);var a=pointerTargetDirection.x/Math.abs(pointerTargetDirection.x),o=pointerDirection.x/Math.abs(pointerDirection.x);a!=o&&(pointerDirection.x=pointerTargetDirection.x),lastPointerPosition.x=t.x,lastPointerPosition.y=t.y}function swipeend(){var t=.08*viewWidth,e=.07*viewHeight,r=pointerDirection.x;r>0&&(r=Math.min(1,r/t)),0>r&&(r=Math.max(-1,r/t));var i=pointerDirection.y;i>0&&(i=Math.min(1,i/e)),0>i&&(i=Math.max(-1,i/e));var n={x:r,y:i};return n}function mousedown(t){if(!scene.isAnimating()&&1!=touch){var e=t.currentTarget.getBoundingClientRect();touch=!0;var r=scene.getPointerUser();if(null!=r){var i={x:(t.clientX-e.left-layoutOffset.x)*layoutScale.x,y:(t.clientY-e.top-layoutOffset.y)*layoutScale.y};swipestart(i),r.press(i.x,i.y),r.drag(i.x,i.y)}}}function mouseup(t){if(scene.resetPointerStealer(),!scene.isAnimating()&&0!=touch){console.log("mouseup : "+t.clientX+","+t.clientY);var e=t.currentTarget.getBoundingClientRect();touch=!1;var r=scene.getPointerUser();if(null!=r){var i={x:(t.clientX-e.left-layoutOffset.x)*layoutScale.x,y:(t.clientY-e.top-layoutOffset.y)*layoutScale.y},n=swipeend(i);r.swipe(n)?resetpress():r.release(i.x,i.y)}}}function mouseout(t){touch&&mouseup(t)}function mousemove(t){if(!scene.isAnimating()&&0!=touch){var e=t.currentTarget.getBoundingClientRect(),r=scene.getPointerUser();if(null!=r&&touch){var i={x:(t.clientX-e.left-layoutOffset.x)*layoutScale.x,y:(t.clientY-e.top-layoutOffset.y)*layoutScale.y};swipedrag(i),r.drag(i.x,i.y)}}}function touchstart(t){if(allowDefaultPointerEvent=!1,!scene.isAnimating()&&1!=touch){var e=t.currentTarget.getBoundingClientRect();touch=!0;var r=scene.getPointerUser();if(null!=r){var i={x:(t.touches[0].pageX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,y:(t.touches[0].pageY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y};swipestart(i),r.press(i.x,i.y),r.drag(i.x,i.y),lasttouch=t,0==allowDefaultPointerEvent&&t.preventDefault()}}}function touchend(t){if(allowDefaultPointerEvent=!1,scene.resetPointerStealer(),!scene.isAnimating()&&0!=touch){var e=t.currentTarget.getBoundingClientRect();touch=!1;var r=scene.getPointerUser();if(null!=r){var i={x:(lasttouch.touches[0].pageX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,y:(lasttouch.touches[0].pageY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y},n=swipeend(i);r.swipe(n)?resetpress():r.release(i.x,i.y)}}}function touchmove(t){if(!scene.isAnimating()&&0!=touch){var e=t.currentTarget.getBoundingClientRect(),r=scene.getPointerUser();if(null!=r){if(touch){var i={x:(t.touches[0].pageX-e.left-window.pageXOffset-layoutOffset.x)*layoutScale.x,y:(t.touches[0].pageY-e.top-window.pageYOffset-layoutOffset.y)*layoutScale.y};swipedrag(i),r.drag(i.x,i.y)}lasttouch=t,0==allowDefaultPointerEvent&&t.preventDefault()}}}function deviceMotionHandler(t){sensors.acceleration=t.acceleration,sensors.rotationRate=t.rotationRate}function deviceOrientationHandler(t){null!=t&&(sensors.orientation={alpha:t.alpha+orientation_hack,beta:t.beta,gamma:t.gamma})}function orientationChanged(){window.requestAnimationFrame(curlify.resizeCanvas)}function resizeCanvas(){var t=window.devicePixelRatio||1;t=1;var e=Math.floor(glcanvas.clientWidth*t),r=Math.floor(glcanvas.clientHeight*t);layoutWidth=e,layoutHeight=r,layoutScale={x:screenWidth/layoutWidth,y:screenHeight/layoutHeight},viewWidth=screenWidth,viewHeight=screenHeight;var i=Math.max(layoutScale.x,layoutScale.y);aspectratioZoom&&(i=Math.min(layoutScale.x,layoutScale.y),viewWidth=e*i,viewHeight=r*i),layoutScale.x=i,layoutScale.y=i,layoutWidth=Math.floor(screenWidth*(1/i)),layoutHeight=Math.floor(screenHeight*(1/i)),layoutOffset.x=(e-layoutWidth)/2,layoutOffset.y=(r-layoutHeight)/2,glcanvas.width=glcanvas.clientWidth,glcanvas.height=glcanvas.clientHeight,curlify.localVars.layoutWidth=layoutWidth,curlify.localVars.layoutHeight=layoutHeight,curlify.localVars.layoutScale=layoutScale,curlify.localVars.layoutOffset=layoutOffset,curlify.localVars.viewWidth=viewWidth,curlify.localVars.viewHeight=viewHeight,curlify.localVars.screenWidth=screenWidth,curlify.localVars.screenHeight=screenHeight,console.log("resizeCanvas "+glcanvas.clientWidth+"x"+glcanvas.clientHeight+" "+screenWidth+"x"+screenHeight+" "+layoutWidth+"x"+layoutHeight+" "+glcanvas.width+","+glcanvas.height)}function mergeRecursive(t,e){for(var r in e)try{t[r]=e[r].constructor==Object?mergeRecursive(t[r],e[r]):e[r]}catch(i){t[r]=e[r]}return t}function getRandom(t,e){return Math.floor(Math.random()*(e-t)+t)}function spawn(t){return function(){function e(t,e){var a;try{a=r[t](e)}catch(t){return Promise.reject(t)}return a.done?a.value:Promise.resolve(a.value).then(i,n)}var r=t.apply(this,arguments),i=e.bind(e,"next"),n=e.bind(e,"throw");return i()}}function createCORSRequest(t,e){return new Promise(function(r,i){var n=new XMLHttpRequest;if("withCredentials"in n)n.open(t,e,!0);else{if("undefined"==typeof XDomainRequest)return n=null,void i(Error("createCORSRequest failed with 'XMLHttpRequest not supported'"));n=new XDomainRequest,n.open(t,e)}n.onload=function(){200==n.status?r(n.response):i(Error("cors request failed with '"+n.statusText+"'"))},n.onerror=function(){i(Error("cors request failed with 'Network Error'"))},n.send()})}function require(script){var module=curlify.getModule(script);return null!=module?(console.log("return module '"+script+"'",module),module):new Promise(function(resolve,reject){var scriptid=script,element=document.getElementById(scriptid);null==element?".zip"==script.slice(-4)?JSZipUtils.getBinaryContent(script,function(err,data){if(err)return void reject(Error("require zip load failed for '"+script+"' with '"+err+"'"));zipfile=new JSZip(data),curlify.localVars.zipfile=zipfile;var adscriptfile=zipfile.file("main.js");if(null==adscriptfile)return zipfile=null,curlify.localVars.zipfile=null,void reject(Error("require failed for '"+script+"' with 'main.js not found inside zip'"));var scriptobject=null;try{scriptobject=eval(adscriptfile.asText())}catch(t){return zipfile=null,curlify.localVars.zipfile=null,void reject(Error("require eval failed for zip '"+script+"' with '"+t+"'"))}resolve(scriptobject)}):(element=document.createElement("script"),element.setAttribute("id",scriptid),element.setAttribute("type","text/javascript"),document.head.appendChild(element),appendedElements.push(scriptid),".js"==script.slice(-3)?createCORSRequest("GET",script).then(function(response){try{element.scriptobject=eval(response)}catch(t){return void reject(Error("require eval failed for '"+script+"' with '"+t+"'",response))}resolve(element.scriptobject)},function(t){reject(Error("require load failed for '"+script+"' with '"+t+"'"))}):(element.setAttribute("src",script),element.onload=function(){resolve()},element.onerror=function(){reject(Error("require failed for '"+script+"'"))})):resolve(element.scriptobject)})}function isElementInViewport(t){var e=t.getBoundingClientRect();return e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)}var revision="6.9";console.log("initialize main",revision);var currentScript=document.currentScript,curlify=document.currentScript.curlify;eval(curlify.extract(curlify.modules,"curlify.modules")),eval(curlify.extract(curlify.localVars,"curlify.localVars"));var glcanvas,glclearcolor=0,aspectratioZoom=!0,touch=!1,lasttouch=null,lastPointerPosition={x:0,y:0},pointerTargetDirection={x:0,y:0},pointerDirection={x:0,y:0},pointerTimestamp=0,renderRequested=!0,imageid=0,running=!1,appendedElements=[],allowDefaultPointerEvent=!1,orientation_hack=sys.ismobile.any()?-180:0;curlify.resizeCanvas=resizeCanvas,curlify.addImageElement=function(){var t="curlify_image_"+imageid,e=document.createElement("img");return e.setAttribute("id",t),document.body.appendChild(e),appendedElements.push(t),imageid+=1,e},curlify.requestRender=function(){renderRequested=!0},curlify.render=function(){0!=running&&(document.hidden||0==isElementInViewport(glcanvas)||(renderRequested=!1,gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.disable(gl.DEPTH_TEST),gl.enable(gl.CULL_FACE),gl.cullFace(gl.FRONT),gl.viewport(layoutOffset.x,layoutOffset.y,layoutWidth,layoutHeight),scene.render()))},curlify.stop=function(){if(console.log("Cleaning up..."),null==glcanvas)return void console.log("ERROR: canvas not set");"ontouchstart"in window?(glcanvas.removeEventListener("touchstart",touchstart,!1),glcanvas.removeEventListener("touchmove",touchmove,!1),glcanvas.removeEventListener("touchend",touchend,!1)):(glcanvas.removeEventListener("mousedown",mousedown,!1),glcanvas.removeEventListener("mousemove",mousemove,!1),glcanvas.removeEventListener("mouseup",mouseup,!1),glcanvas.removeEventListener("mouseout",mouseout,!1)),window.DeviceMotionEvent&&window.removeEventListener("devicemotion",deviceMotionHandler,!1),window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",deviceOrientationHandler,!1),window.removeEventListener("orientationchange",orientationChanged),window.removeEventListener("resize",orientationChanged),scene.removeAllScenes();for(var t=0;t<appendedElements.length;t++){var e=appendedElements[t],r=document.getElementById(e);r.parentNode.removeChild(r)}appendedElements=[],null!=curlify.intervalId&&window.clearInterval(curlify.intervalId),curlify.clearModuleBuffersAndPrograms(),running=!1},curlify.start=function(t){if(console.log("curlify.start",t,revision),running&&curlify.stop(),running=!0,null==t.script)return void console.log("ERROR: no script source set");if(screenWidth=t.width?t.width:480,screenHeight=t.height?t.height:852,curlify.localVars.screenWidth=screenWidth,curlify.localVars.screenHeight=screenHeight,glcanvas=t.canvas?document.getElementById(t.canvas):currentScript.parentNode,curlify.localVars.glcanvas=glcanvas,null==glcanvas)return void(t.canvas?console.log("ERROR: cannot find canvas to draw on:",t.canvas):console.log("ERROR: no canvas to draw to as parentNode:",glcanvas));if(resizeCanvas(),gl=initWebGL(glcanvas,t.glparameters),curlify.localVars.gl=gl,null==gl)return void console.log("ERROR: could not initialize webgl");"ontouchstart"in window?(glcanvas.addEventListener("touchstart",touchstart,!1),glcanvas.addEventListener("touchmove",touchmove,!1),glcanvas.addEventListener("touchend",touchend,!1)):(glcanvas.addEventListener("mousedown",mousedown,!1),glcanvas.addEventListener("mousemove",mousemove,!1),glcanvas.addEventListener("mouseup",mouseup,!1),glcanvas.addEventListener("mouseout",mouseout,!1)),camera=createProjectionAndView(screenWidth,screenHeight,3,100),curlify.localVars.camera=camera,window.DeviceMotionEvent?window.addEventListener("devicemotion",deviceMotionHandler,!1):console.log("DeviceMotionEvent not supported"),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",deviceOrientationHandler,!1):console.log("DeviceOrientationEvent not supported");var e=("onorientationchange"in window,"resize");window.addEventListener(e,function(){orientationChanged()},!1),require(t.script).then(function(e){scene.openScene(e.new()),null!=t.onload&&t.onload(),zipfile=null,curlify.localVars.zipfile=null,curlify.intervalId=window.setInterval(curlify.render,1e3/60)})}}();